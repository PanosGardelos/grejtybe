(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[83353],{341720:(e,t,n)=>{e.exports=n.p+"fcc69dd2a691299993ca011e8d7eba52.mp4"},992769:(e,t,n)=>{e.exports=n.p+"b5b9c408c1b1f4356a6c21503357b8c7.mp4"},512639:(e,t,n)=>{e.exports=n.p+"f4be89b3c09171867faaef39d35e1b67.mp4"},98483:(e,t,n)=>{e.exports=n.p+"15f4e6ad3ace7590905fa4aceae5a76e.png"},842313:(e,t,n)=>{e.exports=n.p+"769f92d805fa8ca416f5c5877ac69f12.mp4"},27498:(e,t,n)=>{e.exports=n.p+"0be7f2b1876357da5283441d0c33bd3d.png"},909743:(e,t,n)=>{e.exports=n.p+"b8e840561f365a47a93b71b5eeaad845.png"},544035:(e,t,n)=>{e.exports=n.p+"08ed5fe901dd4f852da1ecd8f13dfc5a.png"},601845:(e,t,n)=>{e.exports=n.p+"e832e0d3ae05e24d29ceb3384113ea0c.mp4"},650331:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(675860),i=n(173436),o=n(464623),a=n(105405),u=n(859023),c=n(932847),s=n(992497),l=n(735713),f=n(804626),d=n(461061),p=n(959797);const _={call:function(e,t,n,i,o){var _=this,h=function(n){f.default.selectVoiceChannel(e,t)
;n&&_.ring(e);null==o||o()};if(null!=i){if(a.Z.isBlocked(i))return;var E=u.default.getUser(i);r.Z.get({url:d.ANM.CALL(e),oldFormErrors:!0}).then((function(e){h(n&&e.body.ringable)}),(function(){c.default.track(d.rMx.OPEN_POPOUT,{type:"Not Friend",source:"Call"});s.Z.show({title:p.Z.Messages.START_CALL,body:p.Z.Messages.CALL_INVITE_NOT_FRIENDS.format({username:null!=E?E.username:""}),confirmText:p.Z.Messages.ADD_FRIEND_BUTTON,cancelText:p.Z.Messages.OKAY,onConfirm:function(){l.Z.addRelationship({userId:i,context:{location:"Call"}})}})}))}else h(n)},ring:function(e,t){var n=o.Z.getCall(e);null==n||null==n.messageId||o.Z.isCallUnavailable(e)?i.Z.dispatch({type:"CALL_ENQUEUE_RING",channelId:e,recipients:t}):r.Z.post({url:d.ANM.CALL_RING(e),body:{recipients:t},oldFormErrors:!0})},stopRinging:function(e,t){return r.Z.post({url:d.ANM.CALL_STOP_RINGING(e),body:{recipients:t},oldFormErrors:!0})}}},642400:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m})
;var r=n(675860),i=n(173436),o=n(838478),a=n(218276),u=n(205949),c=n(351793),s=n(655695),l=n(53551),f=n(356004),d=n(935406),p=n(650331),_=n(804626),h=n(461061),E=n(959797);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,u,"next",e)}function u(e){v(o,r,i,a,u,"throw",e)}a(void 0)}))}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){
if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break
;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};const m={openPrivateChannel:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return O((function(){var a,u,s,l,f,d,_,E,y;return b(this,(function(v){switch(v.label){case 0:a=this._getRecipients(e);u=function(e){t&&p.Z.call(e.id,n,!0,e.isDM()?e.getRecipientId():null)};if(1===a.length){s=I(a,1),l=s[0]
;if(null!=(f=this._openCachedDMChannel(l,o))){u(f);return[2,Promise.resolve(f.id)]}}v.label=1;case 1:v.trys.push([1,3,,4]);return[4,r.Z.post({url:h.ANM.USER_CHANNELS,body:{recipients:a},context:{location:i},oldFormErrors:!0})];case 2:d=v.sent();null==o||o();_=this._openPrivateChannel(d.body);u(_);return[2,d.body.id];case 3:(null==(E=v.sent())||null===(y=E.body)||void 0===y?void 0:y.code)===h.evJ.QUARANTINED&&(0,c.Z)();throw E;case 4:return[2]}}))})).apply(this)},_openCachedDMChannel:function(e,t){var n=f.Z.getDMFromUserId(e),r=null!=n?f.Z.getChannel(n):null;if(null!=r){null==t||t();null!=(0,u.D)()?(0,s.uL)(h.Z5c.CHANNEL(h.ME,r.id),{navigationReplace:!0}):_.default.selectPrivateChannel(r.id);return r}return null},ensurePrivateChannel:function(e){return O((function(){var t,n,o;return b(this,(function(a){switch(a.label){case 0:t=this._getRecipients(e);return[4,r.Z.post({url:h.ANM.USER_CHANNELS,body:{recipients:t},oldFormErrors:!0})];case 1:n=a.sent();o=(0,l.q_)(n.body);i.Z.dispatch({
type:"CHANNEL_CREATE",channel:o});return[2,o.id]}}))})).apply(this)},_getRecipients:function(e){return null!=e?Array.isArray(e)?e:[e]:[]},_openPrivateChannel:function(e){var t=(0,l.q_)(e);i.Z.dispatch({type:"CHANNEL_CREATE",channel:t});null!=(0,u.D)()?(0,s.uL)(h.Z5c.CHANNEL(h.ME,t.id),{navigationReplace:!0}):_.default.selectPrivateChannel(t.id);return t},closePrivateChannel:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Z.dispatch({type:"CHANNEL_DELETE",channel:{id:e,guild_id:null,parent_id:null},silent:n});t&&!__OVERLAY__&&(0,s.uL)(h.Z5c.FRIENDS);return r.Z.delete({url:h.ANM.CHANNEL(e),query:{silent:n},oldFormErrors:!0}).then((function(){o.Z.announce(E.Z.Messages.A11Y_ANNOUNCEMENT_DM_CLOSED)})).catch((function(){o.Z.announce(E.Z.Messages.A11Y_ANNOUNCEMENT_DM_CLOSED_FAILED)}))},updatePermissionOverwrite:function(e,t){return r.Z.put({url:h.ANM.CHANNEL_PERMISSIONS_OVERWRITE(e,t.id),body:t,
oldFormErrors:!0})},clearPermissionOverwrite:function(e,t){return r.Z.delete({url:h.ANM.CHANNEL_PERMISSIONS_OVERWRITE(e,t),oldFormErrors:!0})},addRecipient:function(e,t,n,i){var a=this;return r.Z.put({url:h.ANM.CHANNEL_RECIPIENT(e,t),context:{location:n},oldFormErrors:!0}).then((function(t){o.Z.announce(E.Z.Messages.A11Y_ANNOUNCEMENT_USER_ADDED_TO_GROUP_DM);null==i||i();return 201===t.status?a._openPrivateChannel(t.body).id:e})).catch((function(){o.Z.announce(E.Z.Messages.A11Y_ANNOUNCEMENT_USER_ADDED_TO_GROUP_DM_FAILED);return e}))},addRecipients:function(e,t,n,r){var i=this;return this.addRecipient(e,t[0],n,r).then((function(e){return Promise.all(t.slice(1).map((function(t){return i.addRecipient(e,t,n)}))).then((function(){return e}))}))},removeRecipient:function(e,t){return r.Z.delete({url:h.ANM.CHANNEL_RECIPIENT(e,t),oldFormErrors:!0})},setDMOwner:function(e,t){return r.Z.patch({url:h.ANM.CHANNEL(e),body:{owner:t},oldFormErrors:!0})},setName:function(e,t){return O((function(){
var n,i,o;return b(this,(function(u){switch(u.label){case 0:n=f.Z.getChannel(e);return[4,r.Z.patch({url:h.ANM.CHANNEL(e),body:{name:t},oldFormErrors:!0})];case 1:i=u.sent();null==(o=null==n?void 0:n.getGuildId())||(null==n?void 0:n.isThread())||a.Z.checkGuildTemplateDirty(o);return[2,i]}}))}))()},setIcon:function(e,t){var n=f.Z.getChannel(e);r.Z.patch({url:h.ANM.CHANNEL(e),body:{icon:t},oldFormErrors:!0}).then((function(){var e=null==n?void 0:n.getGuildId();null==e||(null==n?void 0:n.isThread())||a.Z.checkGuildTemplateDirty(e)}))},convertToGuild:function(e){return r.Z.post({url:h.ANM.CHANNEL_CONVERT(e),oldFormErrors:!0})},preload:function(e,t,n){i.Z.dispatch({type:"CHANNEL_PRELOAD",guildId:e===h.ME?null:e,channelId:t,isHighlight:n,context:h.e3s})},fetchChannelStoreListing:function(e,t){var n=null!=t?h.ANM.CHANNEL_STORE_LISTING_SKU(e,t):h.ANM.CHANNEL_STORE_LISTING(e);return(0,d.Kb)(n).then((function(t){i.Z.dispatch({type:"STORE_LISTING_FETCH_SUCCESS",channelId:e,storeListing:t.body})}))
},createTextChannel:function(e,t,n,i){return O((function(){var o,u;return b(this,(function(c){switch(c.label){case 0:o={type:h.d4z.GUILD_TEXT,name:t,permission_overwrites:[]};null!=n&&(o.parent_id=n);null!=i&&(o.topic=i);return[4,r.Z.post({url:h.ANM.GUILD_CHANNELS(e),body:o,oldFormErrors:!0})];case 1:u=c.sent();a.Z.checkGuildTemplateDirty(e);return[2,u]}}))}))()}}},825524:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(173436),i=n(23816),o=n(932847),a=n(882699),u=n(461061);function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}const l={rebuildRTCActiveChannels:function(){r.Z.dispatch({
type:"CHANNEL_RTC_ACTIVE_CHANNELS"})},selectParticipant:function(e,t){r.Z.dispatch({type:"CHANNEL_RTC_SELECT_PARTICIPANT",channelId:e,id:t})},updateLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.IlC.APP;o.default.track(u.rMx.VIDEO_LAYOUT_TOGGLED,s({video_layout:t},(0,i.AB)(e)));r.Z.dispatch({type:"CHANNEL_RTC_UPDATE_LAYOUT",channelId:e,layout:t,appContext:n})},toggleParticipants:function(e,t){r.Z.dispatch({type:"CHANNEL_RTC_UPDATE_PARTICIPANTS_OPEN",channelId:e,participantsOpen:t})},toggleVoiceParticipantsHidden:function(e,t){r.Z.dispatch({type:"CHANNEL_RTC_UPDATE_VOICE_PARTICIPANTS_HIDDEN",channelId:e,voiceParticipantsHidden:t})},updateStageStreamSize:function(e,t){r.Z.dispatch({type:"CHANNEL_RTC_UPDATE_STAGE_STREAM_SIZE",channelId:e,large:t})},updateStageVideoLimitBoostUpsellDismissed:function(e,t){r.Z.dispatch({type:"CHANNEL_RTC_UPDATE_STAGE_VIDEO_LIMIT_BOOST_UPSELL_DISMISSED",channelId:e,dismissed:t})},updateChatOpen:function(e,t){r.Z.dispatch({
type:"CHANNEL_RTC_UPDATE_CHAT_OPEN",channelId:e,chatOpen:t});t?setTimeout((function(){a.S.dispatch(u.CkL.FOCUS_CHANNEL_TEXT_AREA,{channelId:e})}),0):a.S.dispatch(u.CkL.FOCUS_CHAT_BUTTON)}}},690217:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(506884),i=n(817178),o=n(675860),a=n(173436),u=n(144857),c=n(832691),s=n(932847),l=n(666492),f=n(461061);function d(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,u,"next",e)}function u(e){d(o,r,i,a,u,"throw",e)}a(void 0)}))}}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){_(e,t,n[t])}))}return e}function E(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var y=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},v=new c.Z("ConnectedAccounts");function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.Z.post({url:f.ANM.CONNECTIONS_CALLBACK(e),body:E(h({},t),{insecure:n,friend_sync:f.BFP.has(e)
}),oldFormErrors:!0})}const I={fetch:function(){return o.Z.get({url:f.ANM.CONNECTIONS,oldFormErrors:!0}).then((function(e){return a.Z.dispatch({type:"USER_CONNECTIONS_UPDATE",local:!0,accounts:e.body})}),(function(){return a.Z.dispatch({type:"USER_CONNECTIONS_UPDATE",local:!0,accounts:[]})}))},authorize:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.location,a=n.twoWayLinkType,u=n.userCode;s.default.track(f.rMx.CONNECTED_ACCOUNT_INITIATED,{platform_type:e,location:r});t=a===i.g.DEVICE_CODE&&null!=u?f.ANM.CONNECTIONS_AUTHORIZE_LINK_DEVICE(e,u):null!=a?f.ANM.CONNECTIONS_AUTHORIZE_LINK(e,a):f.ANM.CONNECTIONS_AUTHORIZE(e);return o.Z.get({url:t,oldFormErrors:!0})},callback:O,connect:function(e,t,n,i,o){var a;return l.Z.put({url:f.ANM.CONNECTION(e,t),body:{name:n,friend_sync:null!==(a=null==o?void 0:o.friend_sync)&&void 0!==a?a:f.BFP.has(e)},context:{location:i},oldFormErrors:!0,trackedActionData:{event:r.a9.USER_CONNECTIONS_UPDATE,properties:{name:n,
friend_sync:f.BFP.has(e)}}})},disconnect:function(e,t){return o.Z.delete({url:f.ANM.CONNECTION(e,t),oldFormErrors:!0})},refresh:function(e,t){return o.Z.post({url:f.ANM.CONNECTION_REFRESH(e,t),oldFormErrors:!0})},submitPinCode:function(e,t){return o.Z.get({url:f.ANM.CONNECTIONS_CALLBACK_CONTINUATION(t,e),oldFormErrors:!0}).then((function(e){var n=e.body;s.default.track(f.rMx.ACCOUNT_LINK_STEP,{previous_step:"PIN code entry",current_step:"PIN success",session_id:n.state,platform_type:t});return O(t,E(h({},n),{from_continuation:!0}),!0)}))},setVisibility:function(e,t,n){return this.update(e,t,{visibility:1===n})},setMetadataVisibility:function(e,t,n){return this.update(e,t,{metadata_visibility:1===n})},setFriendSync:function(e,t,n){return this.update(e,t,{friend_sync:n})},setShowActivity:function(e,t,n){return this.update(e,t,{show_activity:n})},update:function(e,t,n){return l.Z.patch({url:f.ANM.CONNECTION(e,t),body:n,oldFormErrors:!0,trackedActionData:{
event:r.a9.USER_CONNECTIONS_UPDATE,properties:h({},n)}})},joinServer:function(e,t){a.Z.dispatch({type:"USER_CONNECTIONS_INTEGRATION_JOINING",integrationId:e,joining:!0});o.Z.post({url:f.ANM.INTEGRATION_JOIN(e),oldFormErrors:!0},(function(n){a.Z.dispatch({type:"USER_CONNECTIONS_INTEGRATION_JOINING",integrationId:e,joining:!1});n.ok||null==t||t()}))},refreshAccessToken:function(e,t){return p((function(){var n,r,i,u;return y(this,(function(c){switch(c.label){case 0:c.trys.push([0,2,,3]);return[4,o.Z.get({url:f.ANM.CONNECTION_ACCESS_TOKEN(e,t),oldFormErrors:!0})];case 1:n=c.sent(),r=n.body,i=r.access_token;a.Z.dispatch({type:"USER_CONNECTION_UPDATE",platformType:e,id:t,accessToken:i});return[2,i];case 2:(u=c.sent()).body.code===f.evJ.CONNECTION_REVOKED&&a.Z.dispatch({type:"USER_CONNECTION_UPDATE",platformType:e,id:t,revoked:!0});throw u;case 3:return[2]}}))}))()},linkDispatchAuthCallback:function(e,t){return o.Z.post({url:f.ANM.CONNECTIONS_LINK_DISPATCH_AUTH_CALLBACK(e),body:h({},t),
oldFormErrors:!0})},completeTwoWayLink:function(e,t,n,r,i){return p((function(){var o,a,c,s;return y(this,(function(l){switch(l.label){case 0:if(null==t){v.error("Two-way link: missing authorize location");return[2]}o=(0,u.xp)(t),a=o.code,c=o.error,s=o.errorDescription;if(null!=c){v.error("Two-way link: missing authorize code",{error:c,errorDescription:s});return[2]}return[4,O(e,{code:n,state:r,two_way_link_code:a,token_redirect_uri:i})];case 1:return[2,l.sent()]}}))}))()}}},141301:(e,t,n)=>{"use strict";n.d(t,{Z:()=>oe,B:()=>ie});var r=n(131795),i=n.n(r),o=n(951660),a=n(531286),u=n(865622),c=n(675860),s=n(173436),l=n(55690),f=n(168831);var d=n(538796),p=n(987593),_=n(449024),h=n(836343),E=n(455040),y=n(613258),v=n(905895),O=n(46323);const I=(0,n(553494).B)({kind:"user",id:"2022-12_mobile_gdm_invite_link",label:"Enable Mobile GDM Invite Links",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled - Use default max age for invite link",config:{enabled:!0}}]})
;var b=n(598738),m=n(351793),S=n(944861),g=n(655695),T=n(510174),A=n(338588),N=n(53551),C=n(356004),P=n(1812),R=n(653772),D=n(287452),w=n(940712),L=n(970397),U=n(859023),k=n(932847),M=n(618468),Z=n(354290),j=n(370442),G=n(461061),V=n(35236),B=n(855846),x=n(848545),F=n(385202),H=n(959797);function Y(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Y(o,r,i,a,u,"next",e)}function u(e){Y(o,r,i,a,u,"throw",e)}a(void 0)}))}}function K(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){K(e,t,n[t])}))}return e}function W(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var Q=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value])
;switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},J="invite",$=null;function X(e){var t,n={};switch(e.target_type){case x.Iq.STREAM:var r;n.targetType=e.target_type;n.targetUserId=null===(r=e.target_user)||void 0===r?void 0:r.id;break;case x.Iq.EMBEDDED_APPLICATION:var i;n.targetType=e.target_type;n.targetApplicationId=null===(i=e.target_application)||void 0===i?void 0:i.id;break;case x.Iq.ROLE_SUBSCRIPTIONS_PURCHASE:n.targetType=e.target_type}
(!(null!=R.Z.getGuild(null===(t=e.guild)||void 0===t?void 0:t.id))||e.new_member)&&null!=e.channel&&(0,N.zi)(e.channel.type)&&(n.welcomeModalChannelId=e.channel.id);null!=e.guild_scheduled_event&&(n.guildScheduledEvent=e.guild_scheduled_event);return n}function ee(e){var t=e.guildId,r=e.channel,i=e.options,o=e.analyticsLocations,a=void 0===o?[]:o,u=r.type,c=function(e,t,n){var r;if((null==n?void 0:n.targetType)==x.Iq.ROLE_SUBSCRIPTIONS_PURCHASE)return V.oC.ROLE_SUBSCRIPTIONS;if(null==(null==n?void 0:n.targetType)&&!N.tx.has(t.type)&&(0,_.YM)(e))return V.oC.GUILD_HOME;var i,o=C.Z.getChannel(t.id);return w.Z.can(G.Plq.VIEW_CHANNEL,o)?t.id:null!==(i=null===(r=P.ZP.getDefaultChannel(e))||void 0===r?void 0:r.id)&&void 0!==i?i:t.id}(t,r,i),l=null!=i?i:{},f=l.targetUserId,d=l.targetType,p=l.targetApplicationId,h=u===G.d4z.GUILD_STAGE_VOICE,E=G.Z5c.CHANNEL(t,c);if(N.tx.has(u)){E=G.Z5c.CHANNEL(t,h?c:(0,T.V)(t));(0,L.h)((function(){Promise.resolve().then(n.bind(n,804626)).then((function(e){
var n=e.default;if(h){(0,A.Cq)(r instanceof N.Sf?r:(0,N.kt)(r));(0,g.uL)(E)}else{n.selectVoiceChannel(c);d===x.Iq.STREAM&&null!=f&&j.iV({streamType:B.lo.GUILD,ownerId:f,guildId:t,channelId:c});if(d===x.Iq.EMBEDDED_APPLICATION&&null!=p){(0,g.uL)(G.Z5c.CHANNEL(null!=t?t:G.ME,c));!function(e,t,n,r){s.Z.dispatch({type:"EMBEDDED_ACTIVITY_DEFERRED_OPEN",channelId:e,applicationId:t,intent:r,analyticsLocations:n})}(c,p,a,null==i?void 0:i.intent)}}}))}))}var y=function(e,t){var n=e.type,r=null!=t?t:{},i=r.transitionTo,o=r.welcomeModalChannelId,a=r.guildScheduledEvent,u=n===G.d4z.GUILD_STAGE_VOICE,c={};null!=o&&(c.welcomeModalChannelId=o);u&&(c.state=F.Df);null!=a&&(c.guildScheduledEventId=a.id);return function(e){return null!=i?i(e,c,S.ZP.INVITE_ACCEPT):(0,g.uL)(e,c,S.ZP.INVITE_ACCEPT)}}(r,i);y(E)}function te(e){var t=e.guildScheduledEvent,n=e.welcomeModalChannelId;null!=t&&(0,L.h)((function(){var e={guildScheduledEventId:t.id};null!=n&&(e.welcomeModalChannelId=n);(0,E.P3)(t,e)}))}
var ne,re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];C.Z.addConditionalChangeListener((function(){var r,i=C.Z.getChannel(e),o=U.default.getCurrentUser();if(null==i||null==o)return!0;if(i.nsfw&&!o.nsfwAllowed)return!1;if(null!=(null==t?void 0:t.guildScheduledEvent)){te(t);return!1}ee({guildId:null!==(r=i.getGuildId())&&void 0!==r?r:G.ME,channel:i,options:t,analyticsLocations:n});return!1}))},ie=(ne=z((function(e){var t,n;return Q(this,(function(r){switch(r.label){case 0:t=e.guild_id,n=e.channel_id;if(!(0,y.xt)(e)||null==n)return[3,1];re(n);return[3,3];case 1:return[4,Z.Z.transitionToGuildSync(t)];case 2:r.sent();r.label=3;case 3:return[2]}}))})),function(e){return ne.apply(this,arguments)});const oe={resolveInvite:function e(t,n,r){if(s.Z.isDispatching())return Promise.resolve().then((function(){return e(t,n,r)}));s.Z.dispatch({type:"INVITE_RESOLVE",code:t});return(0,b.Z)(t,n,r).then((function(e){var t=e.invite,n=e.code,r=e.banned
;null!=t?s.Z.dispatch({type:"INVITE_RESOLVE_SUCCESS",invite:t,code:n}):s.Z.dispatch({type:"INVITE_RESOLVE_FAILURE",code:n,banned:r});return{invite:t,code:n}}))},getInviteContext:function(e,t){return{location:e,location_guild_id:null!=t.guild?t.guild.id:void 0,location_channel_id:null!=t.channel?t.channel.id:void 0,location_channel_type:null!=t.channel?t.channel.type:void 0}},createInvite:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return z((function(){var r,i,o;return Q(this,(function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,c.Z.post({url:G.ANM.INSTANT_INVITES(e),body:t,context:{location:n}})];case 1:r=a.sent(),i=r.body;s.Z.dispatch({type:"INSTANT_INVITE_CREATE_SUCCESS",channelId:e,invite:i});return[2,i];case 2:o=a.sent();s.Z.dispatch({type:"INSTANT_INVITE_CREATE_FAILURE",channelId:e});throw new l.Z(o);case 3:return[2]}}))}))()},mobileCreateAndShareInvite:function(e,t){return z((function(){
var n,r,i;return Q(this,(function(o){switch(o.label){case 0:n=I.getCurrentConfig({}).maxAgeLink;r=null!=n?{max_age:n}:{max_age:G.UF9.DAY};return[4,this.createInvite(e,r,t).catch((function(){return s.Z.dispatch({type:"NATIVE_APP_INSTANT_INVITE_GDM_SHARE_FAILED"})}))];case 1:null!=(i=o.sent())&&s.Z.dispatch({type:"NATIVE_APP_INSTANT_INVITE_GDM_SHARE",invite:i});return[2]}}))})).apply(this)},getAllFriendInvites:function(e){return z((function(){var t;return Q(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e){return s.Z.wait((function(){return e(null)}))}))];case 1:n.sent();if(D.Z.getFriendInvitesFetching())return null!=$?[2,$.then((function(e){return e.body}))]:[2,Promise.reject(new Error("Invalid friend invite fetch request"))];$=c.Z.get({url:G.ANM.FRIEND_INVITES,context:{location:e}});s.Z.dispatch({type:"FRIEND_INVITES_FETCH_REQUEST",requestedAt:new Date});return[4,$];case 2:t=n.sent().body;$=null;s.Z.dispatch({type:"FRIEND_INVITES_FETCH_RESPONSE",
receivedAt:new Date,invites:t});return[2,t]}}))}))()},createFriendInvite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;s.Z.dispatch({type:"FRIEND_INVITE_CREATE_REQUEST"});return c.Z.post({url:G.ANM.FRIEND_INVITES,body:e,context:{location:t}}).then((function(e){var t=e.body;s.Z.dispatch({type:"FRIEND_INVITE_CREATE_SUCCESS",invite:t});return t}),(function(e){s.Z.dispatch({type:"FRIEND_INVITE_CREATE_FAILURE",error:e});throw e}))},revokeFriendInvites:function(){s.Z.dispatch({type:"FRIEND_INVITE_REVOKE_REQUEST"});return c.Z.delete({url:G.ANM.FRIEND_INVITES,context:{location}}).then((function(e){var t=e.body;s.Z.dispatch({type:"FRIEND_INVITE_REVOKE_SUCCESS",invites:t})}))},revokeInvite:function(e){var t=e.code,n=e.channel;c.Z.delete({url:G.ANM.INVITE(t),oldFormErrors:!0}).then((function(){s.Z.dispatch({type:"INSTANT_INVITE_REVOKE_SUCCESS",code:t,channelId:n.id})}))},acceptInvite:function(e){
var t,r=e.inviteKey,i=e.context,o=e.callback,a=e.captchaPayload,u=e.skipOnboarding,l=(0,O.fU)(r),p=l.baseCode,_=function(e,t){return W(q({},e),{invite_guild_scheduled_event_id:t.guildScheduledEventId})}(i,l),E=U.default.getCurrentUser();if(null!==(t=null==E?void 0:E.hasFlag(G.xW$.QUARANTINED))&&void 0!==t&&t){(0,m.Z)();return new Promise((function(e,t){return t(new Error)}))}s.Z.dispatch({type:"INVITE_ACCEPT",code:p});var v=this;return c.Z.post({url:G.ANM.INVITE(p),context:_,oldFormErrors:!0,body:null!=a?a:{}}).then(function(){var e=z((function(e){var t,n,r,i,a;return Q(this,(function(c){switch(c.label){case 0:s.Z.dispatch({type:"INVITE_ACCEPT_SUCCESS",invite:e.body,code:p});n=y.ZP.getGuildScheduledEvent(l.guildScheduledEventId);r=W(q({},e.body),{guild_scheduled_event:n});a=null!==(i=null==r?void 0:r.guild_id)&&void 0!==i?i:null==r||null===(t=r.guild)||void 0===t?void 0:t.id;return u||null==a||!r.new_member?[3,2]:[4,(0,h.ZP)({guildId:a})];case 1:c.sent();c.label=2;case 2:null==o||o(r)
;return[2,e.body]}}))}));return function(t){return e.apply(this,arguments)}}(),function(){var e=z((function(e){var t,c,l,_;return Q(this,(function(h){switch(h.label){case 0:return null==(null==e||null===(t=e.body)||void 0===t?void 0:t.captcha_key)||null!=a?[3,2]:[4,n.e(41704).then(n.bind(n,141704))];case 1:_=h.sent();_.default.showCaptcha((0,d.z)(e.body),(function(e){return v.acceptInvite({inviteKey:r,context:i,callback:o,captchaPayload:e,skipOnboarding:u})}),{bodyText:H.Z.Messages.GUILD_JOIN_CAPTCHA_DESCRIPTION});return[2];case 2:s.Z.dispatch({type:"INVITE_ACCEPT_FAILURE",code:p,error:{message:null===(c=e.body)||void 0===c?void 0:c.message,code:null===(l=e.body)||void 0===l?void 0:l.code}});throw new f.Z(e)}}))}));return function(t){return e.apply(this,arguments)}}())},acceptInviteAndTransitionToInviteChannel:function(e){var t=e.inviteKey,n=e.context,r=e.analyticsLocations,i=e.callback,o=e.skipOnboarding;return this.acceptInvite({inviteKey:t,context:n,skipOnboarding:o,
callback:function(e){if(null!=e.channel){var t=X(e);re(e.channel.id,t,null!=r?r:[])}null!=i&&i(e)}})},transitionToInvite:function(e,t){var n,r,i,o=e.channel,a=e.guild;if(null!=a&&(null===(n=a.features)||void 0===n?void 0:n.includes(G.oNc.HUB)))v.Z.onOpenHubInvite(e);else if(null!=a&&(null===(r=a.features)||void 0===r?void 0:r.includes(G.oNc.COMMUNITY))&&(null===(i=a.features)||void 0===i?void 0:i.includes(G.oNc.MEMBER_VERIFICATION_GATE_ENABLED))&&!a.features.includes(G.oNc.PREVIEW_ENABLED))(0,g.uL)(G.Z5c.GUILD_MEMBER_VERIFICATION(a.id,e.code));else if(null!=o){var u=X(e);null!=t&&(u.transitionTo=t);ee({guildId:null!=a?a.id:G.ME,channel:o,options:u})}},transitionToInviteSync:function(e,t,n){if(null!=e.channel){var r=X(e);this.transitionToInviteChannelSync(e.channel.id,W(q({},r),{intent:n,transitionTo:t}))}},openNativeAppModal:function(e){p.Z.openNativeAppModal(e,G.Etm.INVITE_BROWSER)},openApp:function(e,t,n,r){var c,l,f=null!=e?(0,O.fU)(e):null,d=null==f?void 0:f.baseCode;s.Z.dispatch({
type:"INVITE_APP_OPENING",code:e});if(null!=i().ua&&i().ua.toLowerCase().indexOf("googlebot")>-1)s.Z.dispatch({type:"INVITE_APP_NOT_OPENED",code:e});else{var p;if("Android"===(null===(c=i().os)||void 0===c?void 0:c.family)||"iOS"===(null===(l=i().os)||void 0===l?void 0:l.family)){var _=null!=d?(0,o.z0)(d):(0,o.Gk)(),h=(0,a.WS)();p=(0,a.ZP)(_,{utmSource:J,fingerprint:n,username:r,attemptId:h,event:null==f?void 0:f.guildScheduledEventId});k.default.track(G.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,u.K)(n),attempt_id:h,source:J,invite_code:d})}else{"#"===(p=null!=t?G.Z5c.INVITE_PROXY(t):"")[0]&&(p=p.slice(1));p="discord://".concat(p)}M.Z.launch(p,(function(t){s.Z.dispatch(t?{type:"INVITE_APP_OPENED",code:e}:{type:"INVITE_APP_NOT_OPENED",code:e})}))}},transitionToInviteChannelSync:re}},735713:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(675860),i=n(173436),o=n(838478),a=n(538796),u=n(767870),c=n(351793),s=n(893321),l=n(859023),f=n(714226),d=n(992497),p=n(281081),_=n(461061),h=n(959797)
;function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,u,"next",e)}function u(e){y(o,r,i,a,u,"throw",e)}a(void 0)}))}}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){O(e,t,n[t])}))}return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){
return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function S(e){(0,p.Zy)();d.Z.show(e)}function g(e,t){var n=e.status,r=e.body,i=r&&r.code;switch(n){case 429:S({
title:h.Z.Messages.FRIEND_REQUEST_RATE_LIMITED_HEADER,body:h.Z.Messages.FRIEND_REQUEST_RATE_LIMITED_BODY,confirmText:h.Z.Messages.FRIEND_REQUEST_RATE_LIMITED_BUTTON});break;case 403:if(i===_.evJ.EMAIL_VERIFICATION_REQUIRED){S({title:h.Z.Messages.FRIEND_REQUEST_REQUIRES_EMAIL_VALIDATION_HEADER,body:h.Z.Messages.FRIEND_REQUEST_REQUIRES_EMAIL_VALIDATION_BODY,confirmText:h.Z.Messages.FRIEND_REQUEST_REQUIRES_EMAIL_VALIDATION_BUTTON,onConfirm:function(){u.j()}});break}default:if(i==_.evJ.USER_QUARANTINED)!function(){(0,p.Zy)();(0,c.Z)()}();else{var o=null!=t?(0,f.N)(i||0,t):h.Z.Messages.ADD_FRIEND_ERROR_OTHER;S({title:h.Z.Messages.FRIEND_REQUEST_FAILED_HEADER,body:o,confirmText:h.Z.Messages.OKAY})}}throw e}var T={sendRequest:function(e,t,i){var o,u=b(e.split("#"),2),c=u[0],s=u[1];return r.Z.post({url:_.ANM.USER_RELATIONSHIPS(),body:I({username:c,discriminator:parseInt(s)},i),context:t,oldFormErrors:!0}).catch((o=v((function(r){return m(this,(function(o){switch(o.label){case 0:
return null==r.body||null==r.body.captcha_key||null!=i?[3,2]:[4,n.e(41704).then(n.bind(n,141704))];case 1:o.sent().default.showCaptchaAsync((0,a.z)(r.body)).then((function(n){T.sendRequest(e,t,n)}));return[3,3];case 2:g(r,e);o.label=3;case 3:return[2]}}))})),function(e){return o.apply(this,arguments)}))},addRelationship:function(e,t){var i,o=e.userId,u=e.context,c=e.type,f=e.friendToken,d=e.fromFriendSuggestion,p=e.captchaPayload,h=l.default.getUser(o),E=s.Z.hidePersonalInformation;return r.Z.put({url:_.ANM.USER_RELATIONSHIP(o),body:I({type:c,friend_token:f,from_friend_suggestion:d},p),context:u,oldFormErrors:!0}).then((function(){null==t||t()})).catch((i=v((function(e){return m(this,(function(t){switch(t.label){case 0:return null==e.body.captcha_key||null!=p?[3,2]:[4,n.e(41704).then(n.bind(n,141704))];case 1:t.sent().default.showCaptchaAsync((0,a.z)(e.body)).then((function(e){T.addRelationship({userId:o,context:u,type:c,friendToken:f,fromFriendSuggestion:d,captchaPayload:e})}))
;return[3,3];case 2:g(e,E?null==h?void 0:h.username:null==h?void 0:h.tag);t.label=3;case 3:return[2]}}))})),function(e){return i.apply(this,arguments)}))},acceptFriendRequest:function(e){return T.addRelationship(e,(function(){o.Z.announce(h.Z.Messages.A11Y_ANNOUNCEMENT_FRIEND_ACCEPT_REQUEST)}))},cancelFriendRequest:function(e,t){return T.removeRelationship(e,t,(function(){o.Z.announce(h.Z.Messages.A11Y_ANNOUNCEMENT_FRIEND_CANCEL_REQUEST)}))},removeFriend:function(e,t){T.removeRelationship(e,t,(function(){o.Z.announce(h.Z.Messages.A11Y_ANNOUNCEMENT_FRIEND_REMOVED)}))},unblockUser:function(e,t){T.removeRelationship(e,t,(function(){o.Z.announce(h.Z.Messages.A11Y_ANNOUNCEMENT_USER_UNBLOCKED)}))},removeRelationship:function(e,t,n){return r.Z.delete({url:_.ANM.USER_RELATIONSHIP(e),context:t,oldFormErrors:!0}).then((function(){null==n||n()})).catch((function(){o.Z.announce(h.Z.Messages.A11Y_ANNOUNCEMENT_GENERIC_FAIL)}))},updateRelationship:function(e,t){return r.Z.patch({
url:_.ANM.USER_RELATIONSHIP(e),body:{nickname:t}})},fetchRelationships:function(){r.Z.get({url:_.ANM.USER_RELATIONSHIPS(),oldFormErrors:!0}).then((function(e){return i.Z.dispatch({type:"LOAD_RELATIONSHIPS_SUCCESS",relationships:e.body})}),(function(){return i.Z.dispatch({type:"LOAD_RELATIONSHIPS_FAILURE"})}))}};const A=T},804626:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>G});var r=n(173436),i=n(94531),o=n(430923),a=n(280195),u=n(655695),c=n(322928),s=n(356004),l=n(179468),f=n(934714),d=n(379822),p=n(971738),_=n(859023),h=n(268333),E=n(345209),y=n(862770),v=n(116212),O=n(930149),I=n(23816),b=n(620369),m=n(989822),S=n(910016),g=n(733285);function T(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){T(e,t,n[t])}))}return e}function N(e,t,n,i){var o,a,u=d.Z.getVoiceChannelId(),c=s.Z.getChannel(u);if(null==t&&null!=u&&null!=c){var l=function(e,t){return A({channel_id:e.id,channel_type:e.type,guild_id:e.getGuildId(),rtc_connection_id:g.Z.getRTCConnectionId(),duration:g.Z.getDuration(),media_session_id:g.Z.getMediaSessionId()},(0,I.kO)(g.Z.getGuildId(),g.Z.getChannelId(),t))}(c,i);e();if(m.Z.hasUsedBackgroundInCall){var p=A({},l,(a=(0,b.P)(_.default.getCurrentUser()),{video_device_name:null===(o=f.Z.getVideoDevices()[f.Z.getVideoDeviceId()])||void 0===o?void 0:o.name,video_hardware_scaling_enabled:f.Z.getHardwareH264(),video_effect_type:(0,S.TA)(a),video_effect_detail:(0,S.V$)(a)}));r.Z.dispatch({type:"VIDEO_BACKGROUND_SHOW_FEEDBACK",analyticsData:p})}else r.Z.dispatch({type:"VOICE_CHANNEL_SHOW_FEEDBACK",analyticsData:l})}else e()}var C=n(653772),P=n(243256),R=n(882687),D=n(897576)
;function w(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){w(o,r,i,a,u,"next",e)}function u(e){w(o,r,i,a,u,"throw",e)}a(void 0)}))}}function U(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){U(e,t,n[t])}))}return e}var M=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},Z=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=function(){
r.Z.dispatch({type:"VOICE_CHANNEL_SELECT",guildId:t,channelId:e,currentVoiceChannelId:d.Z.getVoiceChannelId(),video:i,stream:o})},u=s.Z.getChannel(e),c=R.Z.getCurrentClientVoiceChannelId(null!=t?t:null)===e,l=null!=u?P.Z.getCheck(u.guild_id):null,f=null!=t&&(0,E.n)(t);if(!f&&(null==l||l.canChat||(0,y.jU)(u))){if(null!=u&&!c){var p=(0,h.rY)(u,R.Z,C.Z);if(p&&u.isGuildStageVoice()&&(0,v.x)(u.id)){(0,D.ZD)(L((function(){var e,t;return M(this,(function(r){switch(r.label){case 0:return[4,Promise.all([n.e(40532),n.e(40721),n.e(71784),n.e(64229),n.e(82089),n.e(62405),n.e(19887),n.e(69672),n.e(17126),n.e(66936),n.e(40455),n.e(45337),n.e(61434),n.e(56345),n.e(92072),n.e(69225),n.e(66722),n.e(10029),n.e(65974),n.e(24366)]).then(n.bind(n,31662))];case 1:e=r.sent(),t=e.default;return[2,function(e){return t(k({channel:u},e))}]}}))})));return}if(p){(0,D.ZD)(L((function(){var e,t;return M(this,(function(r){switch(r.label){case 0:return[4,Promise.all([n.e(40532),n.e(47294)]).then(n.bind(n,647294))]
;case 1:e=r.sent(),t=e.default;return[2,function(e){return t(e)}]}}))})));return}}i&&(0,O.eH)();N(a,e,0,i)}},j=n(461061);const G={selectChannel:function(e){var t=e.guildId,n=e.channelId,i=e.messageId,o=e.jumpType,a=e.preserveDrawerState,u=e.source;r.Z.dispatch({type:"CHANNEL_SELECT",guildId:t===j.ME?null:t,channelId:n,messageId:i,jumpType:o,preserveDrawerState:a,source:u})},selectPrivateChannel:function(e){(0,u.uL)(j.Z5c.CHANNEL(j.ME,e))},selectVoiceChannel:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=s.Z.getChannel(e),o=null==i?void 0:i.getGuildId();if(!((null==i?void 0:i.isGuildVoice())||(null==i?void 0:i.isGuildStageVoice())&&(0,c.Og)(o))||!(null==i?void 0:i.isNSFW())||(null===(t=_.default.getCurrentUser())||void 0===t?void 0:t.nsfwAllowed)&&l.Z.didAgree(o)){if(f.Z.isSupported()){null!=e&&f.Z.getMediaEngine().interact();Z(e,o,n,r)}}else(0,u.uL)(j.Z5c.CHANNEL(o,e))},disconnect:function(){
var e=o.Z.getRemoteSessionId();null!=e&&i._(e);var t=s.Z.getChannel(d.Z.getChannelId()),n=d.Z.getChannelId()===d.Z.getVoiceChannelId()&&!0===(null==t?void 0:t.isThread());this.selectVoiceChannel(null);a.xv(j.KJ3.CHANNEL_CALL_POPOUT);if(n){var r=p.Z.getGuildId();null!=r&&(0,u.uL)((0,h.LY)(r))}}}},370442:(e,t,n)=>{"use strict";n.d(t,{WH:()=>P,tK:()=>R,rn:()=>w,pR:()=>L,iV:()=>U,g:()=>k,aP:()=>M,n9:()=>Z,xc:()=>G,Rc:()=>B,dV:()=>x});var r=n(441143),i=n.n(r),o=n(506884),a=n(675860),u=n(173436),c=n(430923),s=n(997163),l=n(357523),f=n(937155),d=n(18416),p=n(631134),_=n(356004),h=n(653772),E=n(379822),y=n(882687),v=n(268333),O=n(316076),I=n(666492),b=n(825524),m=n(461061),S=n(855846);function g(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){g(o,r,i,a,u,"next",e)}function u(e){g(o,r,i,a,u,"throw",e)}a(void 0)}))}}
function A(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){A(e,t,n[t])}))}return e}var C=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++
;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function P(e,t,n){u.Z.dispatch(N({type:"STREAM_START",streamType:null!=e?S.lo.GUILD:S.lo.CALL,guildId:e,channelId:t,appContext:__OVERLAY__?m.IlC.OVERLAY:m.IlC.APP},n))}function R(e,t){var n=(0,s.V9)(e);u.Z.dispatch({type:"STREAM_SET_PAUSED",streamKey:n,paused:t})}function D(e,t){var n=_.Z.getChannel(t);i()(null!=n,"Cannot join a null voice channel");return!y.Z.isInChannel(t)&&(0,v.rY)(n,y.Z,h.Z)}function w(e,t){if(!(null!=c.Z.getRemoteSessionId())){
var n=e.guildId,r=e.channelId;if(null==n||!D(0,r)){var i=(0,s.V9)(e),o=(null==t?void 0:t.forceMultiple)||d.Z.getAllActiveStreamsForChannel(r).filter((function(e){return e.ownerId!==p.default.getId()})).length>=2;u.Z.dispatch({type:"STREAM_WATCH",streamKey:i,allowMultiple:o});o||(null==t?void 0:t.noFocus)||b.Z.selectParticipant(e.channelId,i)}}}function L(e,t){u.Z.dispatch({type:"STREAM_UPDATE_SELF_HIDDEN",channelId:e,selfStreamHidden:t})}function U(e,t){var n=e.guildId,r=e.channelId;if(null==n||!D(0,r)){w(e,t);var i=f.Z.getWindowOpen(m.KJ3.CHANNEL_CALL_POPOUT),o=E.Z.getVoiceChannelId();i&&o===r||(0,l.Z)(e)}}function k(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];M(e,t);u.Z.dispatch({type:"STREAM_STOP",streamKey:e,appContext:__OVERLAY__?m.IlC.OVERLAY:m.IlC.APP})}function M(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u.Z.dispatch({type:"STREAM_CLOSE",streamKey:e,canShowFeedback:t})}function Z(e,t,n){return j.apply(this,arguments)}
function j(){return(j=T((function(e,t,n){var r,i,o,c;return C(this,(function(l){switch(l.label){case 0:r=(0,s.V9)({streamType:null!=e?S.lo.GUILD:S.lo.CALL,guildId:e,channelId:t,ownerId:n});u.Z.dispatch({type:"STREAM_PREVIEW_FETCH_START",streamKey:r});l.label=1;case 1:l.trys.push([1,3,,4]);return[4,a.Z.get({url:m.ANM.STREAM_PREVIEW(r),query:{version:Date.now()},oldFormErrors:!0})];case 2:i=l.sent();u.Z.dispatch({type:"STREAM_PREVIEW_FETCH_SUCCESS",streamKey:r,previewURL:i.body.url});return[3,4];case 3:429===(o=l.sent()).status&&(c=1e3*o.body.retry_after);u.Z.dispatch({type:"STREAM_PREVIEW_FETCH_FAIL",streamKey:r,retryAfter:c});return[3,4];case 4:return[2]}}))}))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=T((function(e){return C(this,(function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,I.Z.post({url:m.ANM.STREAM_NOTIFY(e),oldFormErrors:!0,trackedActionData:{event:o.a9.STREAM_NOTIFY}})];case 1:t.sent();return[3,3];case 2:
t.sent();return[3,3];case 3:return[2]}}))}))).apply(this,arguments)}function B(e){(0,O.Ye)(e.preset,e.resolution,e.frameRate);u.Z.dispatch(N({type:"STREAM_UPDATE_SETTINGS"},e))}function x(e,t){a.Z.patch({url:m.ANM.STREAM(e),body:{region:t},oldFormErrors:!0})}},174034:(e,t,n)=>{"use strict";n.d(t,{GZ:()=>E,Gn:()=>v,Y2:()=>O,mE:()=>I});var r=n(675860),i=n(173436),o=n(168831),a=n(378564),u=n(590483),c=n(937026),s=n(935406),l=n(737325),f=n(461061),d=n(298716);function p(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,u,"next",e)}function u(e){p(o,r,i,a,u,"throw",e)}a(void 0)}))}}var h=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function E(e,t,n,r,i){return y.apply(this,arguments)}function y(){return(y=_((function(e,t,n,d,p){var _,E,y,v;return h(this,(function(h){switch(h.label){
case 0:i.Z.dispatch({type:"SUBSCRIPTION_PLANS_FETCH",skuId:e});h.label=1;case 1:h.trys.push([1,5,,6]);_={url:f.ANM.STORE_PUBLISHED_LISTINGS_SUBSCRIPTION_PLANS(e),oldFormErrors:!0};E={};null!=t&&(E.country_code=t);null!=n&&(E.payment_source_id=n);null!=d&&(E.include_unpublished=d);null!=p&&(E.revenue_surface=p);_.query=E;return!(0,u.Z8)()||a.Z.ipCountryCodeLoaded?[3,3]:[4,(0,l.GE)()];case 2:h.sent();h.label=3;case 3:return[4,((0,u.Z8)()?r.Z.get:s.Kb)(_)];case 4:y=h.sent();i.Z.dispatch({type:"SUBSCRIPTION_PLANS_FETCH_SUCCESS",skuId:e,subscriptionPlans:y.body});return[3,6];case 5:v=h.sent();i.Z.dispatch({type:"SUBSCRIPTION_PLANS_FETCH_FAILURE",skuId:e});c.Z.captureException(v,{tags:{context:"billing"}});throw new o.Z(v);case 6:return[2]}}))}))).apply(this,arguments)}function v(e,t){return Promise.all(e.filter((function(e){return e!==d.Si.NONE})).map((function(e){return E(e,t)})))}function O(e,t,n){return Promise.all(Object.values(d.Si).filter((function(e){return e!==d.Si.NONE
})).map((function(r){return E(r,e,t,void 0,n)})))}function I(){i.Z.dispatch({type:"SUBSCRIPTION_PLANS_RESET"})}},572561:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(332233),i=n(461061),o=n(64027);function a(e){return null!=e&&e.type===i.IIU.LISTENING&&e.name===r.Z.get(i.ABu.SPOTIFY).name&&null!=e.party&&null!=e.party.id&&(0,o.Ps)(e.party.id)}},283185:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(173436);function i(){r.Z.dispatch({type:"ACTIVITY_SYNC_STOP"})}},735489:(e,t,n)=>{"use strict";n.d(t,{t:()=>d,Q:()=>p});var r=n(934714),i=n(73462),o=n(343435),a=n(932847),u=n(23816),c=n(461061);function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){s(e,t,n[t])}))}return e}function f(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function d(){var e,t,n,o,a,u=r.Z.getDesktopSource();if(null!=u){e=u.resolution;t=u.frameRate;n=u.soundshareSession;o=null!=u.sourcePid?i.Z.getGameNameForPID(u.sourcePid):null;a=null!=u.sourcePid?i.Z.getGameIdForPID(u.sourcePid):null}return{video_input_resolution:e,video_input_frame_rate:t,soundshare_session:n,share_game_name:o,share_game_id:a}}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o.Z.getGame();t=f(l({},t),{
overlay_game_name:null!=r?r.name:"Unknown Game",overlay_app_id:null!=r?r.id:null});switch(e){case c.rMx.VOICE_CHANNEL_SELECTED:case c.rMx.SETTINGS_PANE_VIEWED:case c.rMx.GUILD_VIEWED:case c.rMx.CHANNEL_OPENED:return(0,u.yw)(e,t,n);default:return a.default.track(e,t,{flush:n})}}},534115:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var r;!function(e){e[e.GAME=1]="GAME";e[e.MUSIC=2]="MUSIC";e[e.TICKETED_EVENTS=3]="TICKETED_EVENTS";e[e.GUILD_ROLE_SUBSCRIPTIONS=4]="GUILD_ROLE_SUBSCRIPTIONS"}(r||(r={}))},767870:(e,t,n)=>{"use strict";n.d(t,{i:()=>d,j:()=>p});var r=n(785893),i=(n(667294),n(897576)),o=n(442068),a=n(609993);function u(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,c,"next",e)}function c(e){u(o,r,i,a,c,"throw",e)}a(void 0)}))}}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,
enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){s(e,t,n[t])}))}return e}var f=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0]
;continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function d(e){(0,i.ZD)(c((function(){var e,t;return f(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(40532),n.e(92224),n.e(741),n.e(36497)]).then(n.bind(n,700741))];case 1:e=i.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,l({},e))}]}}))})),{modalKey:o.$$,onCloseRequest:a.dG,onCloseCallback:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;(0,i.ZD)(c((function(){var t,i;return f(this,(function(o){switch(o.label){case 0:
return[4,Promise.all([n.e(40532),n.e(40721),n.e(71784),n.e(64229),n.e(82089),n.e(69672),n.e(17126),n.e(66936),n.e(40455),n.e(45337),n.e(61434),n.e(8452)]).then(n.bind(n,987554))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,l({claimRequired:e},t))}]}}))})),{onCloseRequest:e?a.dG:null,onCloseCallback:t})}},987593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(173436),i=n(32733);const o={openNativeAppModal:function(e,t){var o=this;if(!i.a){r.Z.dispatch({type:"NATIVE_APP_MODAL_OPENING",code:e});Promise.resolve().then(n.bind(n,772731)).then((function(n){var r=n.default;r.request(t,{code:e}).then((function(e){var t=e.code;return o.nativeModalOpened(t)})).catch((function(){return o.nativeModalOpenFailed(e)})).then((function(){return r.disconnect()}))}))}},nativeModalOpened:function(e){r.Z.dispatch({type:"NATIVE_APP_MODAL_OPENED",code:e})},nativeModalOpenFailed:function(e){r.Z.dispatch({type:"NATIVE_APP_MODAL_OPEN_FAILED",code:e})}}},24390:(e,t,n)=>{"use strict"
;n.d(t,{Z:()=>a});var r=n(725616),i=n(392115),o=n(461061);function a(e){var t=null;if(null!=e.emojiId&&"0"!==e.emojiId){var n=i.Z.getUsableCustomEmojiById(e.emojiId);t=null!=n?{id:n.id,name:n.name,animated:n.animated}:null}else if(null!=e.emojiName&&""!==e.emojiName){var a=r.Z.getByName(r.Z.convertSurrogateToName(e.emojiName,!1));t=null!=a?{id:null,name:a.surrogates,animated:!1}:null}var u=Number(e.expiresAtMs);return{name:"Custom Status",type:o.IIU.CUSTOM_STATUS,state:e.text.length>0?e.text:void 0,timestamps:u>0?{end:u}:void 0,emoji:t}}},409726:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,e:()=>c});var r=n(791462),i=n(971738),o=n(987762),a=n(461061);function u(e){var t=(0,r.e7)([i.Z],(function(){return i.Z.getGuildId()}));return null!=t?t:e.getGuildId()}function c(e){if(i.Z.getGuildId()!==a.I_8)return e.getGuildId();var t=e.isThread()?e.parent_id:e.id;return o.Z.isFavorite(t)?a.I_8:e.getGuildId()}},94531:(e,t,n)=>{"use strict";n.d(t,{s6:()=>h,ef:()=>y,Vv:()=>v,_:()=>O,On:()=>I});n(383342)
;var r=n(675860),i=n(173436),o=n(992497),a=n(72529),u=(n(934714),n(430923)),c=n(461061),s=n(959797);function l(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,u,"next",e)}function u(e){l(o,r,i,a,u,"throw",e)}a(void 0)}))}}function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){d(e,t,n[t])}))}return e}var _=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),
return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function h(){return E.apply(this,arguments)}function E(){
return(E=f((function(){var e,t,n;return _(this,(function(r){switch(r.label){case 0:e=u.Z.getAwaitingRemoteSessionInfo();t=null==e?void 0:e.nonce;i.Z.dispatch({type:"REMOTE_SESSION_DISCONNECT"});n=[];(null==e?void 0:e.type)!==c.ABu.PLAYSTATION&&(null==e?void 0:e.type)!==c.ABu.PLAYSTATION_STAGING||null==(null==e?void 0:e.commandId)||null==(null==e?void 0:e.deviceId)||n.push(m(e.type,e.deviceId,e.commandId));null!=t&&n.push(b(t));r.label=1;case 1:r.trys.push([1,3,,4]);return[4,Promise.all(n)];case 2:r.sent();return[3,4];case 3:r.sent();o.Z.show({title:s.Z.Messages.CANCEL_TRANSFER_VOICE_FAILED_TITLE,body:s.Z.Messages.CANCEL_TRANSFER_VOICE_FAILED_BODY});return[3,4];case 4:return[2]}}))}))).apply(this,arguments)}function y(e){i.Z.dispatch({type:"REMOTE_SESSION_CONNECT",sessionId:e})}function v(e,t){var n=t.selfMute,r=t.selfDeaf;i.Z.dispatch({type:"REMOTE_COMMAND",sessionId:e,payload:{type:"VOICE_STATE_UPDATE",self_mute:n,self_deaf:r}})}function O(e){i.Z.dispatch({type:"REMOTE_COMMAND",
sessionId:e,payload:{type:"DISCONNECT"}});h()}function I(e,t,n,r){var o=(0,a.z)(n);null!=o&&i.Z.dispatch({type:"REMOTE_COMMAND",sessionId:e,payload:p({type:"AUDIO_SETTINGS_UPDATE",context:o,id:t},r)})}function b(e){return r.Z.delete({url:c.ANM.CONNECT_REQUEST(e)})}function m(e,t,n){return S.apply(this,arguments)}function S(){return(S=f((function(e,t,n){var o;return _(this,(function(a){switch(a.label){case 0:i.Z.dispatch({type:"GAME_CONSOLE_DEVICE_CANCEL_COMMAND_START",platform:e,deviceId:t,commandId:n});a.label=1;case 1:a.trys.push([1,3,,4]);return[4,r.Z.delete({url:"/consoles/".concat(e,"/devices/").concat(t,"/commands/").concat(n)})];case 2:a.sent();return[3,4];case 3:o=a.sent();i.Z.dispatch({type:"GAME_CONSOLE_DEVICE_CANCEL_COMMAND_FAIL",platform:e,deviceId:t,commandId:n,error:o});throw o;case 4:i.Z.dispatch({type:"GAME_CONSOLE_DEVICE_CANCEL_COMMAND_SUCCESS",platform:e,deviceId:t,commandId:n});return[2]}}))}))).apply(this,arguments)}},664637:(e,t,n)=>{"use strict";n.d(t,{LY:()=>r,
aW:()=>f,ws:()=>i,tI:()=>o,L9:()=>d,no:()=>p,ND:()=>_,WC:()=>E,km:()=>v,k0:()=>O,af:()=>I});var r,i,o,a,u=n(461061),c=n(298716),s=n(959797);function l(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}!function(e){e[e.RESOLUTION_480=480]="RESOLUTION_480";e[e.RESOLUTION_720=720]="RESOLUTION_720";e[e.RESOLUTION_1080=1080]="RESOLUTION_1080";e[e.RESOLUTION_SOURCE=0]="RESOLUTION_SOURCE"}(r||(r={}));function f(e){switch(e){case r.RESOLUTION_480:return r.RESOLUTION_480;case r.RESOLUTION_720:return r.RESOLUTION_720;case r.RESOLUTION_1080:return r.RESOLUTION_1080;case r.RESOLUTION_SOURCE:return r.RESOLUTION_SOURCE;default:throw new Error("Unknown resolution: ".concat(e))}}!function(e){e[e.FPS_5=5]="FPS_5";e[e.FPS_15=15]="FPS_15";e[e.FPS_30=30]="FPS_30";e[e.FPS_60=60]="FPS_60"}(i||(i={}));!function(e){e[e.PRESET_VIDEO=1]="PRESET_VIDEO";e[e.PRESET_DOCUMENTS=2]="PRESET_DOCUMENTS";e[e.PRESET_CUSTOM=3]="PRESET_CUSTOM"}(o||(o={}))
;function d(e){switch(e){case i.FPS_5:return i.FPS_5;case i.FPS_15:return i.FPS_15;case i.FPS_30:return i.FPS_30;case i.FPS_60:return i.FPS_60;default:throw new Error("Unknown frame rate: ".concat(e))}}var p=(l(a={},o.PRESET_DOCUMENTS,[{resolution:r.RESOLUTION_SOURCE,fps:i.FPS_15},{resolution:r.RESOLUTION_SOURCE,fps:i.FPS_5}]),l(a,o.PRESET_VIDEO,[{resolution:r.RESOLUTION_1080,fps:i.FPS_60},{resolution:r.RESOLUTION_720,fps:i.FPS_60},{resolution:r.RESOLUTION_720,fps:i.FPS_30}]),l(a,o.PRESET_CUSTOM,[]),a),_=[{resolution:r.RESOLUTION_SOURCE,fps:i.FPS_60,quality:c.ys.HIGH_STREAMING_QUALITY},{resolution:r.RESOLUTION_SOURCE,fps:i.FPS_30,quality:c.ys.HIGH_STREAMING_QUALITY},{resolution:r.RESOLUTION_SOURCE,fps:i.FPS_15,quality:c.ys.HIGH_STREAMING_QUALITY},{resolution:r.RESOLUTION_SOURCE,fps:i.FPS_5,preset:o.PRESET_DOCUMENTS},{resolution:r.RESOLUTION_1080,fps:i.FPS_60,guildPremiumTier:u.Eu4.TIER_2,quality:c.ys.MID_STREAMING_QUALITY},{resolution:r.RESOLUTION_1080,fps:i.FPS_30,
guildPremiumTier:u.Eu4.TIER_2,quality:c.ys.MID_STREAMING_QUALITY},{resolution:r.RESOLUTION_1080,fps:i.FPS_15,guildPremiumTier:u.Eu4.TIER_2,quality:c.ys.MID_STREAMING_QUALITY},{resolution:r.RESOLUTION_720,fps:i.FPS_60,guildPremiumTier:u.Eu4.TIER_1,quality:c.ys.MID_STREAMING_QUALITY},{resolution:r.RESOLUTION_720,fps:i.FPS_30},{resolution:r.RESOLUTION_720,fps:i.FPS_15},{resolution:r.RESOLUTION_720,fps:i.FPS_5},{resolution:r.RESOLUTION_480,fps:i.FPS_60,guildPremiumTier:u.Eu4.TIER_1,quality:c.ys.MID_STREAMING_QUALITY},{resolution:r.RESOLUTION_480,fps:i.FPS_30},{resolution:r.RESOLUTION_480,fps:i.FPS_15},{resolution:r.RESOLUTION_480,fps:i.FPS_5}];function h(e,t){return{value:e,get label(){return null!=t?t():e}}}var E=[h(r.RESOLUTION_720),h(r.RESOLUTION_1080),h(r.RESOLUTION_SOURCE,(function(){return s.Z.Messages.SCREENSHARE_SOURCE}))],y=function(e){return"".concat(e,"p")},v=[h(r.RESOLUTION_480,(function(){return y(r.RESOLUTION_480)})),h(r.RESOLUTION_720,(function(){return y(r.RESOLUTION_720)
})),h(r.RESOLUTION_1080,(function(){return y(r.RESOLUTION_1080)})),h(r.RESOLUTION_SOURCE,(function(){return s.Z.Messages.SCREENSHARE_SOURCE}))],O=[h(i.FPS_15),h(i.FPS_30),h(i.FPS_60)],I=[h(i.FPS_15,(function(){return s.Z.Messages.STREAM_FPS_OPTION.format({value:i.FPS_15})})),h(i.FPS_30,(function(){return s.Z.Messages.STREAM_FPS_OPTION.format({value:i.FPS_30})})),h(i.FPS_60,(function(){return s.Z.Messages.STREAM_FPS_OPTION.format({value:i.FPS_60})}))]},573643:(e,t,n)=>{"use strict";n.d(t,{Um:()=>o,L2:()=>a});var r=n(461061);function i(e){return e.type===r.IIU.PLAYING}function o(e,t){return null!=e?function(e,t){return t.findActivity(e,i)}(e.ownerId,t):null}function a(e,t){if(null==e)return null;var n=o(e,t);return null==n?null:{id:n.application_id,name:n.name}}},357523:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(672549);function i(e){(0,r.Kh)(e.channelId)}},345209:(e,t,n)=>{"use strict";n.d(t,{n:()=>l,J:()=>f});var r=n(791462),i=n(212218),o=n(653772),a=n(243256),u=n(859023)
;function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){
var t=s(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[o.Z,a.Z,u.default,i.ZP],4),n=t[0],r=t[1],c=t[2],l=t[3];if(null==e)return!1;var f=n.getGuild(e),d=r.getCheck(e).notClaimed,p=c.getCurrentUser(),_=!1;if(null!=p){var h,E;_=null!==(E=null===(h=l.getMember(e,p.id))||void 0===h?void 0:h.isPending)&&void 0!==E&&E}var y=_||d;return y&&!!(null==f?void 0:f.hasVerificationGate())}function f(e){return(0,r.e7)([o.Z,a.Z,u.default,i.ZP],(function(){return null!=e&&l(e,[o.Z,a.Z,u.default,i.ZP])}),[e])}},455040:(e,t,n)=>{"use strict";n.d(t,{bO:()=>_,P3:()=>h,lC:()=>y});var r=n(785893),i=(n(667294),n(354290)),o=n(897576),a=n(461061),u=n(86030);function c(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,u,"next",e)}function u(e){c(o,r,i,a,u,"throw",e)}a(void 0)}))}}function l(e,t,n){
t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){l(e,t,n[t])}))}return e}function d(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var p=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]}
;return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function _(e){
var t=e.eventId,i=e.parentGuildId;(0,o.ZD)(s((function(){var e,o;return p(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(40721),n.e(71784),n.e(64229),n.e(82089),n.e(62405),n.e(36222),n.e(6816),n.e(47007),n.e(45419),n.e(69672),n.e(17126),n.e(66936),n.e(40455),n.e(45337),n.e(61434),n.e(56345),n.e(69225),n.e(4688),n.e(20590),n.e(10029),n.e(7046),n.e(65974),n.e(6385),n.e(7746),n.e(26466),n.e(9850),n.e(16486),n.e(56002),n.e(60420),n.e(69343),n.e(20659)]).then(n.bind(n,394413))];case 1:e=a.sent(),o=e.default;return[2,function(e){return(0,r.jsx)(o,f({guildScheduledEventId:t,parentGuildId:i},e))}]}}))})))}function h(e,t){return E.apply(this,arguments)}function E(){return(E=s((function(e,t){var n;return p(this,(function(r){switch(r.label){case 0:n=e.guild_id;return[4,i.Z.transitionToGuildSync(n,t)];case 1:r.sent();_({eventId:e.id,event:e});return[2]}}))}))).apply(this,arguments)}function y(e,t){(0,o.ZD)(s((function(){var t,i;return p(this,(function(o){
switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(66602)]).then(n.bind(n,66602))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,d(f({},t),{channel:e}))}]}}))})),{contextKey:t===a.IlC.POPOUT?u.u1:u.z1})}},682881:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(213192),i=n.n(r)()({REPORT_PROBLEM_POST_STREAM:null,VIDEO_BACKGROUND_FEEDBACK:null,VOICE_CALL_FEEDBACK:null,GUILD_ANALYTICS_GUILD_SETTINGS_MENU:null,NOW_PLAYING_CONSENT_CARD:null,IOS_GUILD_NAV_EDUCATION:null,VOICE_PANEL_INTRODUCTION:null,GUILD_SETTINGS_COMMUNITY_GUILD_UPSELL:null,FAVORITE_EMOJI_TOOLTIP:null,POST_ACTIVITY_FEEDBACK:null,GUILD_DELETE_FEEDBACK:null,GUILD_LEAVE_FEEDBACK:null,APPLICATION_COMMAND_TOOLTIP:null,GUILD_CAP_INLINE_UPSELL:null,STAGE_CHANNEL_UPSELL:null,HUB_WAITLIST_UPSELL:null,HUB_NEW:null,HUB_SECOND_EMAIL_CONNECTION_UPSELL:null,LIVE_STAGE_NOTIFICATION_BADGE:null,GUILD_EVENT_UPSELL:null,HUB_LINK_CHANNEL_NOTICE:null,PREMIUM_PROGRESS_BAR_GUILD_HEADER_TOOLTIP:null,
ANIMATED_GUILD_BANNER_GUILD_HEADER_TOOLTIP:null,ANIMATED_GUILD_BANNER_SETTINGS_NEW_PILL:null,MULTI_ACCOUNT_TOOLTIP:null,HUB_STUDY_ROOM_NOTICE:null,CHANNEL_BANNER_MEMBER_LIST_NOTICE:null,CHANGE_LANGUAGE_MODAL:null,ACTIVITY_BEB_TUTORIAL:null,APP_DIRECTORY_SETTINGS_NEW_PILL:null,INVITE_SPLASH_GUILD_HEADER_TOOLTIP:null,ANIMATED_VIDEO_BG_CAPERNITE_DAY_NEW:null,ANIMATED_VIDEO_BG_CAPERNITE_NIGHT_NEW:null,ANIMATED_VIDEO_BG_HACKER_DEN_NEW:null,ANIMATED_VIDEO_BG_WUMPICE_NEW:null,ANIMATED_VIDEO_BG_CUSTOM_TOOLTIP_NEW:null,ANIMATED_VIDEO_BG_BIRTHDAY_1_NEW:null,SOUNDBOARD_WHEEL_EDUCATION_MODAL:null,IN_APP_REPORTS_FEEDBACK:null})},905895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(655695),i=n(461061);const o={onOpenHubInvite:function(e){var t=e.guild;null!=t&&(0,r.uL)(i.Z5c.GUILD_MEMBER_VERIFICATION_FOR_HUB(t.id,e.code))}}},848545:(e,t,n)=>{"use strict";n.d(t,{wx:()=>i,Iq:()=>o});var r,i,o;!function(e){e.SENDING="sending";e.SENT="sent";e.ERROR="error"}(r||(r={}));!function(e){e[e.GUILD=0]="GUILD"
;e[e.GROUP_DM=1]="GROUP_DM";e[e.FRIEND=2]="FRIEND"}(i||(i={}));!function(e){e[e.STREAM=1]="STREAM";e[e.EMBEDDED_APPLICATION=2]="EMBEDDED_APPLICATION";e[e.ROLE_SUBSCRIPTIONS_PURCHASE=3]="ROLE_SUBSCRIPTIONS_PURCHASE"}(o||(o={}))},598738:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(506884),i=n(856864),o=n(53551),a=n(631134),u=n(932847),c=n(666492),s=n(46323),l=n(848545),f=n(461061);function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function p(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function _(e){var t=null
;if(null!=e&&null!=e.channel){var n=e.channel;t=e.target_type===l.Iq.STREAM?f.dAT.STREAM:e.target_type===l.Iq.EMBEDDED_APPLICATION?f.dAT.APPLICATION:(0,o.bc)(n.type)?f.dAT.GDM_INVITE:null==n||(0,o.hv)(n.type)?f.dAT.FRIEND_INVITE:f.dAT.SERVER_INVITE}return t}function h(e,t,n){u.default.track(f.rMx.INVITE_OPENED,{invite_code:e});var o=(0,s.fU)(e),l=p(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){d(e,t,n[t])}))}return e}({},n),{with_counts:!0,with_expiration:!0,guild_scheduled_event_id:o.guildScheduledEventId});return c.Z.get({url:f.ANM.INVITE(o.baseCode),query:l,oldFormErrors:!0,trackedActionData:{event:r.a9.INVITE_RESOLVE,properties:function(e){var r,u,c,s,l,d,p=e.body,h=(null===(r=e.body)||void 0===r?void 0:r.code)===f.evJ.USER_BANNED
;return(0,i.iG)({resolved:e.ok,guild_id:null==p||null===(u=p.guild)||void 0===u?void 0:u.id,channel_id:null==p||null===(c=p.channel)||void 0===c?void 0:c.id,channel_type:null==p||null===(s=p.channel)||void 0===s?void 0:s.type,inviter_id:null==p||null===(l=p.inviter)||void 0===l?void 0:l.id,code:o.baseCode,input_value:null==n?void 0:n.inputValue,location:t,authenticated:a.default.isAuthenticated(),size_total:null==p?void 0:p.approximate_member_count,size_online:null==p?void 0:p.approximate_presence_count,destination_user_id:null==p||null===(d=p.target_user)||void 0===d?void 0:d.id,invite_type:_(p),user_banned:h})}}}).then((function(r){var i=r.body;null!=t&&u.default.track(f.rMx.INVITE_RESOLVED,{resolved:!0,guild_id:null!=i.guild?i.guild.id:null,channel_id:null!=i.channel?i.channel.id:null,channel_type:null!=i.channel?i.channel.type:null,inviter_id:i.inviter?i.inviter.id:null,code:o.baseCode,input_value:null==n?void 0:n.inputValue,location:t,authenticated:a.default.isAuthenticated(),
size_total:i.approximate_member_count,size_online:i.approximate_presence_count,destination_user_id:null!=i.target_user?i.target_user.id:null,invite_type:_(i)},{flush:!0});return{invite:i,code:e}}),(function(r){var i=null!=r.body&&r.body.code===f.evJ.USER_BANNED;if(null!=t){var c,s;u.default.track(f.rMx.INVITE_RESOLVED,{resolved:!1,code:o.baseCode,input_value:null==n?void 0:n.inputValue,location:t,authenticated:a.default.isAuthenticated(),user_banned:i,error_code:null===(c=r.body)||void 0===c?void 0:c.code,error_message:null===(s=r.body)||void 0===s?void 0:s.message},{flush:!0})}return{invite:null,code:e,banned:i}}))}},937155:(e,t,n)=>{"use strict";n.d(t,{Z:()=>G});var r=n(441143),i=n.n(r),o=n(496486),a=n.n(o),u=n(620745),c=n(791462),s=n(173436),l=n(832691),f=n(742269),d=n(588641),p=n(787619),_=n(461061);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,
writable:!0}):e[t]=n;return e}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return y(e)}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){I=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return I(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}var S={},g={},T={},A={},N={},C=new Set,P="app-mount",R=function(){return j.emitChange()},D=a().debounce(R,150);function w(e){var t=T[e];null==t||t.closed||(S[e]={x:t.screenX,y:t.screenY,width:t.innerWidth,height:t.innerHeight,alwaysOnTop:!!f.FB&&g[e]})}function L(e){var t=T[e],n=N[e];if(null!=t){var r=t.document;(0,p.uF)(r,R);t.addEventListener("focus",R);t.addEventListener("blur",R);t.addEventListener("resize",D);!function(e,t){var n=t.document,r=document.querySelectorAll('link[rel="stylesheet"]'),o="".concat(window.location.protocol,"//").concat(window.location.host),a=!0,u=!1,c=void 0;try{
for(var s,l=r[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value;if(f.href.startsWith(o)){var d=n.createElement("link");d.href=f.href;d.rel=f.rel;d.integrity=f.integrity;i()(null!=n.head,"Document head was null");n.head.appendChild(d)}}}catch(e){u=!0;c=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw c}}}(0,t);var o=(0,u.s)(r.getElementById(P));i()(null!=o,"No render target for popout!");A[e]=o;o.render(n(e))}else new l.Z("PopoutWindowStore").warn("Failed to open window",e)}function U(e){var t=T[e];if(null!=t){t.closed||w(e);t.close();!function(e){var t=T[e];i()(null!=t,"Popout window was null during unmount");t.removeEventListener("focus",R);t.removeEventListener("blur",R);t.removeEventListener("resize",D);var n=A[e];i()(null!=n,"Window root was null while unmounting");n.unmount();delete T[e];delete g[e];delete N[e];delete A[e]}(e);j.emitChange()}}function k(e){var t=e.data;if(t instanceof Object&&t.discordPopoutEvent instanceof Object){
var n=t.discordPopoutEvent;if(null!=n.key)switch(n.type){case _.l9w.LOADED:return function(e){if(C.has(e)){L(e);C.delete(e);j.emitChange()}}(n.key);case _.l9w.UNLOADED:return U(n.key)}}}function M(){var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(T)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,a=T[o];null!=a&&a.close()}}catch(e){t=!0;n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&I(e,t)}(n,e);var t=m(n);function n(){h(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){window.addEventListener("message",k);window.addEventListener("beforeunload",M);S=null!=e?e:{}};r.getWindow=function(e){return T[e]};r.getWindowState=function(e){return S[e]};r.getWindowKeys=function(){
return Object.keys(T)};r.getWindowOpen=function(e){var t=T[e];return null!=t&&!t.closed};r.getIsAlwaysOnTop=function(e){return Boolean(g[e])};r.getWindowFocused=function(e){var t,n,r=T[e];return null!==(n=null==r||null===(t=r.document)||void 0===t?void 0:t.hasFocus())&&void 0!==n&&n};r.getState=function(){return S};r.unmountWindow=function(e){return U(e)};r.__getLocalVars=function(){return{popoutWindowState:S,popoutWindowsAlwaysOnTop:g,popoutWindows:T,windowRoots:A,windowRenderers:N,pendingInjections:C,INJECTION_ID:P,emitChange:R,debouncedEmitChange:D,DEVELOPMENT_MODE:false,instance:j}};return n}(c.ZP.PersistedStore);Z.displayName="PopoutWindowStore";Z.persistKey="PopoutWindowStore";var j=new Z(s.Z,{POPOUT_WINDOW_OPEN:function(e){var t=e.key,n=e.features,r=e.render;if(f.FB&&!d.default.supportsFeature(_.eRX.POPOUT_WINDOWS))throw new Error("Popout windows not supported on this native module version!");var i=T[t];if(null!=i&&!i.closed){f.FB?d.default.focus(t):i.focus();return!1}
var o=n.defaultWidth,a=n.defaultHeight,u=n.defaultAlwaysOnTop,c=void 0!==u&&u,s=v(n,["defaultWidth","defaultHeight","defaultAlwaysOnTop"]),l=c,p=S[t];if(null!=p){var h=p.width,y=p.height,O=p.x,I=p.y,b=p.alwaysOnTop;l=null!=b?b:c;s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){E(e,t,n[t])}))}return e}({width:null!=h&&0!==h?h:o,height:null!=y&&0!==y?y:a,left:O,top:I},s)}var m=window.open(_.Z5c.POPOUT_WINDOW,t,function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,c=e[u];if(void 0!==c){"boolean"==typeof c&&(c=c?"yes":"no");t+="".concat(u,"=").concat(c,",")}}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(s))
;m.windowKey=t;null==m||m.focus();T[t]=m;N[t]=r;if(f.FB){d.default.setAlwaysOnTop(t,l);g[t]=l;d.default.isAlwaysOnTop(t).then((function(e){return g[t]=e}))}C.add(t)},POPOUT_WINDOW_CLOSE:function(e){var t=e.key,n=T[t];if(null!=n&&!n.closed){w(t);n.close()}},POPOUT_WINDOW_SET_ALWAYS_ON_TOP:function(e){var t=e.key,n=e.alwaysOnTop;if(f.FB){d.default.setAlwaysOnTop(t,n);g[t]=n;d.default.isAlwaysOnTop(t).then((function(e){return g[t]=e}))}},LOGOUT:M});const G=j},280195:(e,t,n)=>{"use strict";n.d(t,{bA:()=>u,hP:()=>c,xv:()=>s,hY:()=>l});var r=n(173436);function i(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){i(e,t,n[t])}))}return e}
var a={menubar:!1,toolbar:!1,location:!1,directories:!1};function u(e,t,n){r.Z.dispatch({type:"POPOUT_WINDOW_OPEN",key:e,features:o({},a,n),render:t})}function c(e){r.Z.dispatch({type:"CHANNEL_CALL_POPOUT_WINDOW_OPEN",channel:e})}function s(e){r.Z.dispatch({type:"POPOUT_WINDOW_CLOSE",key:e})}function l(e,t){r.Z.dispatch({type:"POPOUT_WINDOW_SET_ALWAYS_ON_TOP",alwaysOnTop:t,key:e})}},672549:(e,t,n)=>{"use strict";n.d(t,{Kh:()=>l,ad:()=>f,jd:()=>d});var r=n(441143),i=n.n(r),o=n(642400),a=n(409726),u=n(356004),c=n(655695),s=n(461061);function l(e,t,n){var r=u.Z.getChannel(e);if(null!=r){var i=(0,a.e)(r);o.Z.preload(r.guild_id,r.id);(0,c.uL)(s.Z5c.CHANNEL(i,r.id),t,n)}}function f(e,t){i()(null!=e.parent_id,"Thread must have a parent ID.");var n=(0,a.e)(e);(0,c.uL)(s.Z5c.CHANNEL(n,e.id),void 0,t)}function d(e,t,n,r){var i=u.Z.getChannel(e);if(null!=i){var o=(0,a.e)(i);(0,c.uL)(s.Z5c.CHANNEL(o,i.id,t),n,r)}}},615430:(e,t,n)=>{"use strict";n.d(t,{rC:()=>E,hP:()=>y,am:()=>v,Ai:()=>O,PW:()=>I,
hY:()=>b,wO:()=>m,k1:()=>S,Tu:()=>g});var r=n(675860),i=n(365523),o=n(173436),a=n(206264),u=n(742269),c=n(94049),s=n(64027),l=n(461061);function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){f(e,t,n[t])}))}return e}function p(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var _=5e3;function h(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;r=p(d({},r),{headers:{authorization:"Bearer ".concat(n)}});return e(r).then((function(e){return 202===e.status?Promise.reject(e):e})).catch((function(n){var a=!0!==r.onlyRetryOnAuthorizationErrors&&202===n.status;return(401===n.status||a)&&o>0?(202===n.status?(0,i.GR)(_):Promise.resolve()).then((function(){return y(t)})).then((function(n){var i=n.body.access_token;return h(e,t,i,r,o-1)})).then((function(e){return new Promise((function(t){return setImmediate((function(){return t(e)}))}))})):Promise.reject(n)}))}var E={get:h.bind(null,r.Z.get),put:h.bind(null,r.Z.put)};function y(e){return r.Z.get({url:l.ANM.CONNECTION_ACCESS_TOKEN(l.ABu.SPOTIFY,e),oldFormErrors:!0}).catch((function(t){if(401===t.status)o.Z.dispatch({type:"SPOTIFY_ACCOUNT_ACCESS_TOKEN_REVOKE",accountId:e});else if(429===t.status){
var n=1e3*t.headers["retry-after"],r=isNaN(n)||0===n?5e3:n;return(0,i.GR)(r).then((function(){return y(e)}))}return Promise.reject(t)})).then((function(t){var n=t.body.access_token;o.Z.dispatch({type:"SPOTIFY_ACCOUNT_ACCESS_TOKEN",accountId:e,accessToken:n});return t}))}function v(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return E.put(e,t,{url:s.C7.NOTIFICATIONS_PLAYER,query:{connection_id:n}}).catch((function(o){return r<=0?Promise.reject(o):(0,i.GR)(_).then((function(){return v(e,t,n,r-1)}))}))}function O(e,t){return E.get(e,t,{url:s.C7.PROFILE}).then((function(t){o.Z.dispatch({type:"SPOTIFY_PROFILE_UPDATE",accountId:e,isPremium:"premium"===t.body.product});return t}))}function I(e,t){return E.get(e,t,{url:s.C7.PLAYER_DEVICES}).then((function(t){t.body&&o.Z.dispatch({type:"SPOTIFY_SET_DEVICES",accountId:e,devices:t.body.devices});return t}))}function b(e,t,n){
var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=s.C7.PLAYER_OPEN(s.Hw.TRACK,n,!1),a=r.deviceId,u=r.position,c=r.contextUri,l=r.repeat;return E.put(e,t,{url:s.C7.PLAYER_PLAY,query:{device_id:a},body:{context_uri:null!=c?c:void 0,uris:null==c?[i]:void 0,offset:null!=c?{uri:i}:void 0,position_ms:null!=u?u:0}}).then((function(n){return null==l?n:E.put(e,t,{url:s.C7.PLAYER_REPEAT,query:{device_id:a,state:l?"context":"off"}})})).then((function(e){o.Z.dispatch({type:"SPOTIFY_PLAYER_PLAY",id:n,position:null!=u?u:0});return e}))}function m(e,t){return E.put(e,t,{url:s.C7.PLAYER_PAUSE}).then((function(e){o.Z.dispatch({type:"SPOTIFY_PLAYER_PAUSE"});return e}))}function S(){c.Z.isProtocolRegistered()||(0,u.nI)()&&a.Z.isProtocolRegistered(s.M5).then((function(e){o.Z.dispatch({type:"SPOTIFY_SET_PROTOCOL_REGISTERED",isRegistered:e})}))}function g(e,t){o.Z.dispatch({type:"SPOTIFY_SET_ACTIVE_DEVICE",accountId:e,deviceId:t})}},94049:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p})
;var r=n(791462),i=n(173436);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return a(e)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var f=!1;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&c(e,t)}(n,e);var t=l(n);function n(){o(this,n);return t.apply(this,arguments)}var r=n.prototype;r.isProtocolRegistered=function(){return f};r.__getLocalVars=function(){return{isProtocolRegistered:f}};return n}(r.ZP.Store);d.displayName="SpotifyProtocolStore";const p=new d(i.Z,{SPOTIFY_SET_PROTOCOL_REGISTERED:function(e){var t=e.isRegistered;f=t}})},830260:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Se})
;var r=n(213192),i=n.n(r),o=n(496486),a=n.n(o),u=n(681178),c=n(791462),s=n(606750),l=n(365523),f=n(173436),d=n(332233),p=n(283185),_=n(832691),h=n(631134),E=n(950008),y=n(978627),v=n(962564),O=n(73462),I=n(248604),b=n(882687),m=n(932847),S=n(137861),g=n(615430),T=n(64027),A=n(461061);function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function P(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function R(e){R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return R(e)}function D(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function w(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e,t){L=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return L(e,t)}var U=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var i=R(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}var M,Z,j,G=d.Z.get(A.ABu.SPOTIFY),V="wss://dealer.spotify.com/?access_token=",B="hm://pusher/v1/connections/",x=3e4,F=3e5,H=5e3,Y="Computer",z=i()({PLAYER_STATE_CHANGED:null,DEVICE_STATE_CHANGED:null}),K={MESSAGE:"message",PING:"ping",PONG:"pong"},q={SINGLE:"single"},W=new _.Z("Spotify"),Q=new l.V7,J=new l.V7,$=new l.V7,X=new l.V7,ee=new l.V7,te={},ne={},re={},ie=!1,oe=null;function ae(){for(var e in te){var t=te[e];if(t.connected&&null!=ne[e]){var n=ne[e].find((function(e){return e.is_active}));if(null!=n)return{socket:t,device:n}}}}function ue(e,t){var n=Date.now(),r=null!=e?e.startTime:0,i=n-t;return Math.abs(i-r)>1500?i:r}function ce(e){f.Z.dispatch({type:"SPOTIFY_PLAYER_STATE",accountId:e,track:null,volumePercent:0,isPlaying:!1,repeat:!1,position:0,context:null})}function se(e){return v.Z.findActivity(e,(function(e){return null!=e.party&&null!=e.party.id&&(0,T.Ps)(e.party.id)}))}
var le=function(){function e(t,n){var r=this;N(this,e);this._requestedDisconnect=!1;this._requestedConnect=!1;this.handleDeviceStateChange=a().throttle((function(){(0,g.PW)(r.accountId,r.accessToken);Ie(r.accountId,r.accessToken)}),3e3);this.accountId=t;this.accessToken=n;this.pingInterval=new l.Xp;this.backoff=new u.Z(void 0,6e4);this.connect()}var t=e.prototype;t.connect=function(){var e=this;if(!this.connected&&!this._requestedConnect){W.info("WS Connecting");this._requestedDisconnect=!1;this._requestedConnect=!0;Ie(this.accountId,this.accessToken).then((function(){e._requestedConnect=!1;e.socket=new WebSocket("".concat(V).concat(e.accessToken));e.socket.onopen=e.handleOpen.bind(e);e.socket.onmessage=e.handleMessage.bind(e);e.socket.onclose=e.socket.onerror=e.handleClose.bind(e)})).catch((function(t){W.error(t);e._requestedConnect=!1;e.handleClose()}))}};t.disconnect=function(){this._requestedDisconnect=!0;this.backoff.cancel();try{var e;null===(e=this.socket)||void 0===e||e.close()
}catch(e){}};t.ping=function(){var e;this.connected&&(null===(e=this.socket)||void 0===e||e.send(JSON.stringify({type:K.PING})))};t.handleOpen=function(){var e=this;W.info("WS Connected");this.backoff.succeed();this.pingInterval.start(3e4,(function(){return e.ping()}));(0,g.Ai)(this.accountId,this.accessToken);(0,g.PW)(this.accountId,this.accessToken)};t.handleMessage=function(e){var t=e.data;if("string"==typeof t){var n=JSON.parse(t),r=n.type,i=n.uri,o=n.payloads;if(r===K.MESSAGE)if("string"==typeof i&&i.startsWith(B)){this.connectionId=decodeURIComponent(i.split(B)[1]);(0,g.am)(this.accountId,this.accessToken,this.connectionId)}else if(Array.isArray(o)){var a=!0,u=!1,c=void 0;try{for(var s,l=o[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var f=s.value.events;if(null!=f){var d=!0,p=!1,_=void 0;try{for(var h,E=f[Symbol.iterator]();!(d=(h=E.next()).done);d=!0){var y=h.value;this.handleEvent(y)}}catch(e){p=!0;_=e}finally{try{d||null==E.return||E.return()}finally{if(p)throw _}}}}
}catch(e){u=!0;c=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw c}}}}};t.handleClose=function(){var e=this;this.pingInterval.stop();if(!this._requestedDisconnect)try{var t=this.backoff.fail((function(){e._requestedDisconnect||e.connect()}));W.info("WS Disconnected. Next retry in ".concat(Math.round(t),"ms"))}catch(e){}};t.handleEvent=function(e){var t=e.type,n=e.event;switch(t){case z.PLAYER_STATE_CHANGED:null!=n&&null!=n.state&&Oe(this.accountId,this.accessToken,n.state);break;case z.DEVICE_STATE_CHANGED:this.handleDeviceStateChange()}};!function(e,t,n){t&&C(e.prototype,t);n&&C(e,n)}(e,[{key:"connected",get:function(){return null!=this.socket&&[WebSocket.CONNECTING,WebSocket.OPEN].includes(this.socket.readyState)}}]);return e}();function fe(e,t){if(e in te){te[e].accessToken=t;W.info("Updated account access token: ".concat(e))}else{te[e]=new le(e,t);W.info("Added account: ".concat(e))}}function de(e){if(e in te){te[e].disconnect();delete te[e];var t=re[e]
;null!=t&&null!=M&&t.track.id===M.track.id&&(M=null);delete re[e];W.info("Removed account: ".concat(e))}}function pe(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=ne[e][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;u.is_active=u.id===t}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}function _e(e,t,n){var r=ae();if(null==r)return!1;var i=r.socket,o=r.device,a=t.sync_id,u=t.party,c=t.timestamps;if(null==a||null==u||null==u.id||!(0,T.Ps)(u.id))return!1;var s=null!=c&&null!=c.start?c.start:Date.now(),l=Math.max(0,Date.now()-s),f=!1,d=re[i.accountId];null!=d&&!1===d.repeat&&(f=null);(0,g.hY)(i.accountId,i.accessToken,a,{position:+l,deviceId:o.id,repeat:f});Z={userId:e,partyId:u.id,trackId:a,startTime:s};var p="presence change";if(n){p="started";m.default.track(A.rMx.SPOTIFY_LISTEN_ALONG_STARTED,{party_id:u.id,other_user_id:e})}
W.info("Listen along ".concat(p,": ").concat(i.accountId," to ").concat(e," playing ").concat(a," on ").concat(o.name))}function he(){m.default.track(A.rMx.SPOTIFY_LISTEN_ALONG_ENDED,{party_id:null!=Z?Z.partyId:null,other_user_id:null!=Z?Z.userId:null});var e=null!=Z?Z.trackId:null;Z=null;W.info("Listen along stopped");var t=ae();if(null!=t){var n=t.socket,r=re[n.accountId];null!=r&&r.track.id===e&&(0,g.wO)(n.accountId,n.accessToken)}}function Ee(){var e=Object.keys(te),t=E.Z.getAccounts().filter((function(e){return e.type===A.ABu.SPOTIFY}));if(null==t)return!1;var n=t.map((function(e){return e.id})),r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;n.includes(c)||de(c)}}catch(e){i=!0;o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}var s=!1,l=!0,f=!1,d=void 0;try{for(var p,_=t[Symbol.iterator]();!(l=(p=_.next()).done);l=!0){var h=p.value;if(null!=M&&M.account.id===h.id){M.account=h;s=!0}
e.includes(h.id)||(null==h.accessToken?(0,g.hP)(h.id):fe(h.id,h.accessToken))}}catch(e){f=!0;d=e}finally{try{l||null==_.return||_.return()}finally{if(f)throw d}}return s}function ye(){if(null!=M){var e=ae();if(null!=e){var t=e.socket;ie=!0;(0,g.wO)(t.accountId,t.accessToken);m.default.track(A.rMx.SPOTIFY_AUTO_PAUSED);W.info("Playback auto paused")}}}function ve(e){if(e===h.default.getId()){var t=b.Z.isCurrentClientInVoiceChannel(),n=I.Z.isSpeaking(e)||I.Z.isSoundSharing(e);if(t&&n&&null!=M){Q.start(x,ye,!1);J.stop()}else J.start(100,(function(){return Q.stop()}),!1)}return!1}function Oe(e,t,n){var r,i,o=n.device,a=n.progress_ms,u=n.is_playing,c=n.repeat_state,s=n.item,l=n.context;if(null!=s&&s.type===T.Hw.TRACK){var d=s.id;null!=s.linked_from&&null!=s.linked_from.id&&(d=s.linked_from.id);r={id:d,name:s.name,duration:s.duration_ms,album:{id:s.album.id,name:s.album.name,image:s.album.images[0]},artists:s.artists,isLocal:s.is_local||!1}}null!=o&&!0!==o.is_active&&(o=D(function(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){P(e,t,n[t])}))}return e}({},o),{is_active:!0}));if(null!=l&&[T.Hw.PLAYLIST,T.Hw.ALBUM].includes(l.type)){var p=me.getPlayerState(e);i=null!=p&&null!=p.context&&p.context.uri===l.uri?Promise.resolve(p.context):l.type===T.Hw.ALBUM?Promise.resolve(l):g.rC.get(e,t,{url:l.href}).then((function(e){return e.body}))}else i=Promise.resolve(void 0);return i.then((function(t){null==t||t.type!==T.Hw.PLAYLIST||t.public||(t=null);f.Z.dispatch({type:"SPOTIFY_PLAYER_STATE",accountId:e,track:r,volumePercent:null!=o?o.volume_percent:0,isPlaying:u,repeat:"off"!==c,position:a,context:t,device:o})}))}function Ie(e,t){return g.rC.get(e,t,{url:T.C7.PLAYER,onlyRetryOnAuthorizationErrors:!0}).then((function(n){
return Oe(e,t,n.body).then((function(){return n}))})).catch((function(){return f.Z.dispatch({type:"SPOTIFY_PLAYER_STATE",accountId:e,track:null,volumePercent:0,isPlaying:!1,repeat:!1,position:0,context:null})}))}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&L(e,t)}(n,e);var t=k(n);function n(){N(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(E.Z,I.Z);this.syncWith([v.Z],(function(){return function(){if(null==Z)return!1;if(null==ae())return!1;var e=Z.userId,t=se(e);if(null==t){$.start(F,(function(){null!=Z&&Z.userId===e&&(0,p.Z)()}));return!1}$.stop();var n=t.sync_id,r=t.timestamps,i=t.party,o=null!=n&&Z.trackId!==n,a=null!=r&&Z.startTime!==r.start;if(o||a)return _e(e,t,!1);if(null!=i&&i.id!==Z.partyId){Z.partyId=i.id;return!0}return!1}()}));(0,
g.k1)()};r.hasConnectedAccount=function(){return Object.keys(te).length>0};r.getActiveSocketAndDevice=function(){return ae()};r.getPlayableComputerDevices=function(){var e=[];for(var t in te){var n=te[t];if(n.connected&&null!=ne[t]){var r=ne[t].find((function(e){return!e.is_restricted&&e.type===Y}));null!=r&&e.push({socket:n,device:r})}}return e};r.canPlay=function(e){var t=e.sync_id,n=e.party;return null!=ae()&&null!=t&&null!=n&&null!=n.id&&(0,T.Ps)(n.id)};r.getSyncingWith=function(){return Z};r.wasAutoPaused=function(){return ie};r.getLastPlayedTrackId=function(){return j};r.getTrack=function(){return null!=M?M.track:null};r.getPlayerState=function(e){return re[e]};r.shouldShowActivity=function(){return null!=M&&M.account.showActivity&&!y.Z.isIdle()};r.getActivity=function(){if(null==M)return null!=Z?se(Z.userId):null;var e,t=M.track,n=t.artists,r=t.album,i=t.name,o=t.id,a=t.duration,u=t.isLocal,c=M.startTime,s=M.context,l=n.slice(0,5);n.length>0&&(e=l.map((function(e){
return e.name.replace(/;/g,"")})).join("; "));var f,d,p={},_=null!=r.image?(0,S.f)(A.ABu.SPOTIFY,r.image.url):null;null!=r.image&&null!=_&&(p.large_image=_);r.type!==q.SINGLE&&(p.large_text=r.name);null!=s&&(f=s.uri);d=null!=Z&&null!=Z.partyId?Z.partyId:"".concat(T.lS).concat(h.default.getId());var E=i.length>128?i.substring(0,125)+"...":i,y={name:G.name,assets:p,details:E,state:e,timestamps:{start:c,end:c+a},party:{id:d}};if(!u){y.sync_id=o;y.flags=A.xjy.PLAY|A.xjy.SYNC;y.metadata={context_uri:f,album_id:r.id,artist_ids:l.map((function(e){return e.id}))}}return y};r.__getLocalVars=function(){return{PLATFORM:G,SPOTIFY_SOCKET_URL_PREFIX:V,SPOTIFY_CONNECTION_URI_PREFIX:B,PING_INTERVAL:3e4,AUTO_PAUSE_TIMEOUT:x,SPEAKING_AUTO_PAUSE_GAP_TIMEOUT:100,SYNCING_HOST_TIMEOUT:F,TRACK_UPDATE_TIMEOUT:H,MAXIMUM_START_TIME_DIFFERENCE:1500,SPOTIFY_DEVICE_COMPUTER_TYPE:Y,MAXIMUM_ARTISTS:5,MAXIMUM_BACKOFF:6e4,DEVICE_STATE_CHANGE_THROTTLE:3e3,RICH_PRESENCE_MAX_LENGTH:128,SpotifyEventTypes:z,
SpotifyDataTypes:K,SpotifyAlbumTypes:q,logger:W,speakingAutoPause:Q,speakingAutoPauseGap:J,syncingHostTimeout:$,trackUpdateTimeout:X,trackSyncUpdateTimeout:ee,accounts:te,playerDevices:ne,playerStates:re,pinnedState:M,syncingWith:Z,wasAutoPaused:ie,lastPlayedTrackId:j,streamingAutoPause:oe,store:me}};return n}(c.ZP.Store);be.displayName="SpotifyStore";var me=new be(f.Z,{USER_CONNECTIONS_UPDATE:Ee,CONNECTION_OPEN:Ee,SPOTIFY_ACCOUNT_ACCESS_TOKEN:function(e){fe(e.accountId,e.accessToken);return!1},SPOTIFY_ACCOUNT_ACCESS_TOKEN_REVOKE:function(e){de(e.accountId)},SPOTIFY_PROFILE_UPDATE:function(e){var t=e.accountId,n=e.isPremium,r=te[t];if(null==r)return!1;r.isPremium=n;W.info("Profile updated for ".concat(t,": isPremium = ").concat(n))},SPOTIFY_PLAYER_STATE:function(e){var t=e.accountId,n=e.isPlaying,r=e.repeat,i=e.track,o=e.position,u=e.device,c=e.context,l=!1;if(null!=u)if(null!=ne[t]){var f=ne[t].find((function(e){return e.id===u.id}));if(null==f){ne[t].push(u);l=!0}else if(!(0,
s.Z)(f,u)){Object.assign(f,u);l=!0}pe(t,u.id)}else{ne[t]=[u];l=!0}if(n)null==oe||oe.start(x,ye);else{i=null;null==oe||oe.stop()}var d=E.Z.getAccount(t,A.ABu.SPOTIFY);if(null==d)return l;var _=re[t],y=null!=i?{account:d,track:i,startTime:ue(_,o),context:c,repeat:r}:null,v=null!=u&&null!=Z&&0===o&&!n;v||(re[t]=y);var O=M;M=a().values(re).find((function(e){return null!=e}));ve(h.default.getId());null==i||v?X.stop():X.start(i.duration-o+H,(function(){return ce(d.id)}));if(null!=Z&&(!n&&o>0||null==u||null!=y&&Z.trackId!==y.track.id)){W.info("Listen along active but playback stopped or track changed. Stopping listen along in ".concat(H,"ms"));ee.start(H,(function(){W.info("Stopping listening along");(0,p.Z)();ce(d.id)}))}else if(ee.isStarted()){W.info("Listen along stop cancelled as playback of track resumed");ee.stop()}if(O===M||null==_&&null==y)return l;if(null!=_&&null!=y&&_.track.id===y.track.id&&_.startTime===y.startTime)return l;null!=i&&m.default.track(A.rMx.ACTIVITY_UPDATED,{
party_platform:A.ABu.SPOTIFY,track_id:i.id,has_images:!0})},SPOTIFY_PLAYER_PLAY:function(e){var t=e.id;j=t},ACTIVITY_PLAY:function(e){var t=e.activity,n=e.metadata,r=ae();if(null==r)return!1;var i,o=r.socket,a=r.device,u=t.sync_id,c=t.party;if(null==u||null==c||null==c.id||!(0,T.Ps)(c.id))return!1;null!=n&&(i=n.context_uri);null!=Z&&he();(0,g.hY)(o.accountId,o.accessToken,u,{contextUri:i,deviceId:a.id});W.info("Play started: ".concat(o.accountId," playing ").concat(u," on ").concat(a.name))},ACTIVITY_SYNC:function(e){var t=e.activity;return _e(e.userId,t,!0)},ACTIVITY_SYNC_STOP:he,SPOTIFY_SET_DEVICES:function(e){var t=e.accountId,n=e.devices;ne[t]=n;W.info("Devices updated for ".concat(t,":"),n)},SPOTIFY_SET_ACTIVE_DEVICE:function(e){pe(e.accountId,e.deviceId)},SPEAKING:function(e){return ve(e.userId)},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){return ve(t.userId)||e}),!1)},MEDIA_ENGINE_SET_DESKTOP_SOURCE:function(e){var t=e.sourceId,n=e.sound
;null==oe||oe.stop();null!=t&&O.Z.getObservedAppNameForWindow(t)===G.name&&n?(oe=new l.Xp).start(x,ye):oe=null}});const Se=me},458981:(e,t,n)=>{"use strict";n.d(t,{T:()=>I,Ev:()=>b,$Q:()=>m,vu:()=>g,Us:()=>T,Zl:()=>A,R5:()=>N});var r=n(785893),i=(n(667294),n(672549)),o=n(631134),a=n(897576),u=n(975906),c=n(756328),s=n(242275),l=n(398272),f=n(461061),d=n(86030);function p(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,u,"next",e)}function u(e){p(o,r,i,a,u,"throw",e)}a(void 0)}))}}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){h(e,t,n[t])}))}return e}function y(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var v=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function O(e){var t=o.default.getId(),i=u.ZP.isModerator(t,e.id),s=c.Z.isLive(e.id);i&&!s?I(e):i&&s&&function(e){(0,a.ZD)(_((function(){var t,i;return v(this,(function(o){switch(o.label){case 0:
return[4,Promise.all([n.e(40532),n.e(40721),n.e(71784),n.e(64229),n.e(82089),n.e(69672),n.e(17126),n.e(66936),n.e(40455),n.e(45337),n.e(61434),n.e(55432),n.e(56345),n.e(80441)]).then(n.bind(n,219237))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,y(E({},t),{channel:e}))}]}}))})))}(e)}function I(e,t){(0,a.ZD)(_((function(){var t,i;return v(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(40721),n.e(71784),n.e(64229),n.e(82089),n.e(69672),n.e(17126),n.e(66936),n.e(40455),n.e(45337),n.e(61434),n.e(55432),n.e(56345),n.e(69225),n.e(31628),n.e(49579)]).then(n.bind(n,364541))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,y(E({},t),{channel:e}))}]}}))})),{contextKey:t===f.IlC.POPOUT?d.u1:d.z1})}function b(e,t){(0,a.ZD)(_((function(){var t,i;return v(this,(function(o){switch(o.label){case 0:
return[4,Promise.all([n.e(40532),n.e(40721),n.e(71784),n.e(64229),n.e(82089),n.e(69672),n.e(17126),n.e(66936),n.e(40455),n.e(45337),n.e(61434),n.e(55432),n.e(56345),n.e(51105),n.e(45991)]).then(n.bind(n,745991))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,y(E({},t),{channel:e}))}]}}))})),{contextKey:t===f.IlC.POPOUT?d.u1:d.z1})}function m(e){}function S(e){(0,i.Kh)(e.id)}function g(e,t){(0,a.ZD)(_((function(){var i,o;return v(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(66936),n.e(40455),n.e(19758),n.e(49308)]).then(n.bind(n,233172))];case 1:i=a.sent(),o=i.default;return[2,function(n){return(0,r.jsx)(o,y(E({},n),{channel:e,onAccept:t}))}]}}))})))}function T(e,t){(0,a.ZD)(_((function(){var t,i;return v(this,(function(o){switch(o.label){case 0:
return[4,Promise.all([n.e(40532),n.e(40721),n.e(71784),n.e(64229),n.e(82089),n.e(69672),n.e(17126),n.e(66936),n.e(40455),n.e(45337),n.e(61434),n.e(55432),n.e(56345),n.e(51105),n.e(37268)]).then(n.bind(n,890374))];case 1:t=o.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,y(E({},t),{channel:e}))}]}}))})),{contextKey:t===f.IlC.POPOUT?d.u1:d.z1})}function A(e){var t=o.default.getId(),n=(0,l.Z7)(e);return!u.ZP.isModerator(t,e)&&n>0}function N(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t!==e.id&&(0,s.Ku)(!0);S(e);t!==e.id&&n&&O(e)}},338588:(e,t,n)=>{"use strict";n.d(t,{Cq:()=>Y,AC:()=>F,TM:()=>H,R5:()=>z});var r=n(354290),i=n(804626),o=n(370442),a=n(355309),u=n(18416),c=n(356004),s=n(653772),l=n(940712),f=n(379822),d=n(458981),p=n(444450),_=n(173436),h=n(245189),E=n(631134);function y(e){d.$Q(e)}var v=n(975906),O=n(385202);function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e){
b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return b(e)}function m(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t){S=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return S(e,t)}var g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}var A=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&S(e,t)}(n,e);var t=T(n);function n(){I(this,n);var e;(e=t.apply(this,arguments)).handleVoiceStateUpdates=function(t){t.voiceStates.forEach((function(t){if(null!=t.channelId&&t.userId===E.default.getId()){e.terminate();if(!p.Z.get(O.$z,!1)){var n=f.Z.getVoiceChannelId();if(null!=n&&t.channelId===n&&v.ZP.isAudienceMember(t.userId,n)){p.Z.set(O.$z,!0);y(n)}}}}))};return e}var r=n.prototype;r._initialize=function(){_.Z.subscribe("VOICE_STATE_UPDATES",this.handleVoiceStateUpdates)};r._terminate=function(){_.Z.unsubscribe("VOICE_STATE_UPDATES",this.handleVoiceStateUpdates)};r.__getLocalVars=function(){return{}};return n}(h.Z);const N=new A;var C=n(531648),P=n(971738),R=n(90816);function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e){
w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return w(e)}function L(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e,t){U=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return U(e,t)}var k=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}var Z=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&U(e,t)}(n,e);var t=M(n);function n(){D(this,n);var e;(e=t.apply(this,arguments)).handleVoiceChannelSelect=function(t){var n=t.channelId,r=t.guildId;if(null!=n){var i=c.Z.getChannel(n);if(null==i||i.isGuildStageVoice())return}e.terminate();var o=null==n?null:null!=r?r:null;e.handleDisconnectFromStageChannel(o)};e.handleDisconnectFromStageChannel=function(e){var t=P.Z.getGuildId();(0,a.O)([t,e].filter(R.lm))};e.handleLogout=function(){e.terminate();e.handleDisconnectFromStageChannel(null)};return e}var r=n.prototype;r._initialize=function(){_.Z.subscribe("VOICE_CHANNEL_SELECT",this.handleVoiceChannelSelect);_.Z.subscribe("LOGOUT",this.handleLogout)};r._terminate=function(){_.Z.unsubscribe("VOICE_CHANNEL_SELECT",this.handleVoiceChannelSelect);_.Z.unsubscribe("LOGOUT",this.handleLogout)}
;r.__getLocalVars=function(){return{}};return n}(h.Z);const j=new Z;function G(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){G(o,r,i,a,u,"next",e)}function u(e){G(o,r,i,a,u,"throw",e)}a(void 0)}))}}var B=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue
;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function x(e,t){if(!l.Z.can(C.gl,e))return!1;if(d.Zl(e.id)&&t!==e.id){d.vu(e,(function(){return Y(e,!0)}));return!1}return!0}function F(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((n=V((function(n){var o;return B(this,(function(u){switch(u.label){case 0:if(null!=(o=c.Z.getChannel(t))){H(o,i);return[2,n(o)]}return[4,(0,a.O)([e])];case 1:u.sent();return[4,r.Z.joinGuild(e,{lurker:!0})];case 2:u.sent();s.Z.addConditionalChangeListener((function(){var e=c.Z.getChannel(t);if(null==e)return!0;H(e)
;j.initialize();n(e);return!1}));return[2]}}))})),function(e){return n.apply(this,arguments)}))}function H(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f.Z.getVoiceChannelId();if(!t&&!x(e,n))return!1;N.initialize();i.default.selectVoiceChannel(e.id);if((n=f.Z.getVoiceChannelId())!=e.id)return!1;var r=u.Z.getAllApplicationStreamsForChannel(e.id);r.length>0&&(0,o.rn)(r[0],{noFocus:!1});return!0}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=f.Z.getVoiceChannelId(),i=H(e,t);i&&z(e,r,n)}function z(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];d.R5(e,t,n)}},820498:(e,t,n)=>{"use strict";n.d(t,{Z:()=>J});var r=n(110251),i=n.n(r),o=n(496486),a=n.n(o),u=n(791462),c=n(105994),s=n(173436),l=n(997163),f=n(18416),d=n(631134),p=n(356004),_=n(653772),h=n(940712),E=n(105405),y=n(248604),v=n(859023),O=n(882687),I=n(645897),b=n(312855),m=n(975906),S=n(756328)
;function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e){T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return T(e)}function A(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e,t){N=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return N(e,t)}var C=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)
}else n=r.apply(this,arguments);return A(this,n)}}var R="NO_GUILD",D=new c.Z((function(e){return[U(e)]}),(function(e){return e.id})),w=new Set,L={};function U(e){var t;return null!==(t=e.getGuildId())&&void 0!==t?t:R}function k(e){return D.values(null!=e?e:void 0,!0).map((function(e){return e.id}))}function M(e){if(!w.has(e)){w.add(e);a()(p.Z.getMutableGuildChannelsForGuild(e)).values().forEach((function(e){G(e)&&D.set(e.id,e)}))}}function Z(e){var t=L[e];if(null!=t)return t;var n=p.Z.getChannel(e);if(null==n||!n.isGuildStageVoice())return null;M(n.guild_id);return G(n)?j(e):null}function j(e){var t=L[e];if(null==t){t=new b.ZP(e);L[e]=t;t.rebuild()}return t}function G(e){return null!=e&&e.isGuildStageVoice()&&I.ZP.countVoiceStatesForChannel(e.id)>0}function V(e,t){var n=p.Z.getChannel(e);return null!=n&&n.isGuildStageVoice()?0===t.size()?F(n.id):null==D.get(n.id)&&D.set(n.id,n):F(e)}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k()
;return t.reduce((function(t,n){var r=j(n);if(!e(r))return t;V(n,r);return!0}),!1)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k();return B((function(t){return t.updateParticipant(e)}),t)}function F(e){if(null==e)return!1;delete L[e];D.delete(e);return!0}function H(){w.clear();D.clear();L={}}function Y(e){return x(e.user.id)}function z(e){return x(e.relationship.id)}function K(e){!function(e){var t=D.values(e),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;D.delete(u.id);delete L[u.id]}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}w.delete(e)}(e.guild.id)}function q(e){var t=e.streamKey,n=(0,l.my)(t),r=n.channelId,i=n.guildId,o=n.ownerId;return!(null==i||!w.has(i))&&x(o,[r])}var W=[],Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,writable:!0,configurable:!0}});t&&N(e,t)}(n,e);var t=P(n);function n(){g(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(d.default,v.default,p.Z,y.Z,O.Z,h.Z,I.ZP,_.Z,m.ZP,E.Z,S.Z,f.Z)};r.getParticipantsVersion=function(e){var t,n;return null==e?-1:null!==(n=null===(t=Z(e))||void 0===t?void 0:t.version)&&void 0!==n?n:-1};r.getMutableParticipants=function(e,t){var n,r;return null==e?W:null!==(r=null===(n=Z(e))||void 0===n?void 0:n.toArray(t))&&void 0!==r?r:W};r.getMutableRequestToSpeakParticipants=function(e){var t,n;return null!==(n=null===(t=Z(e))||void 0===t?void 0:t.getRequestToSpeakParticipants())&&void 0!==n?n:W};r.getRequestToSpeakParticipantsVersion=function(e){var t,n;return null!==(n=null===(t=Z(e))||void 0===t?void 0:t.requestToSpeakVersion)&&void 0!==n?n:-1};r.getParticipantCount=function(e,t){var n,r;return null!==(r=null===(n=Z(e))||void 0===n?void 0:n.size(t))&&void 0!==r?r:0};r.getChannels=function(e){
M(null!=e?e:R);return D.values(null!=e?e:R)};r.getChannelsVersion=function(){return D.version};r.getParticipant=function(e,t){var n,r;return null!==(r=null===(n=Z(e))||void 0===n?void 0:n.getParticipant(t))&&void 0!==r?r:null};r.__getLocalVars=function(){return{GUILDLESS_GUILD_ID:R,activeStageChannels:D,trackedGuildIds:w,stageParticipantsByChannelId:L,NO_PARTICIPANTS:W}};return n}(u.ZP.Store);Q.displayName="StageChannelParticipantStore";const J=new Q(s.Z,{CONNECTION_OPEN:H,OVERLAY_INITIALIZE:H,VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){var n=t.userId,r=t.channelId,i=t.guildId;if(null==i||!w.has(i))return e;var o=k(i);if(null!=r){var a=p.Z.getChannel(r);if(null==a?void 0:a.isGuildStageVoice()){null==D.get(r)&&o.push(r)}}return x(n,o)||e}),!1)},CHANNEL_DELETE:function(e){return F(e.channel.id)},GUILD_MEMBERS_CHUNK:function(e){var t=e.members,n=!1,r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){n=x(a.value.user.id)||n}
}catch(e){i=!0;o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n},USER_UPDATE:Y,GUILD_MEMBER_REMOVE:Y,GUILD_MEMBER_UPDATE:Y,CHANNEL_UPDATES:function(e){var t=e.updates.reduce((function(e,t){var n=t.channel;if(!n.isGuildStageVoice()||!w.has(n.guild_id))return e;var r=D.get(n.id);if(null==r||i()(n.permissionOverwrites,r.permissionOverwrites))return e;e.push(n.id);D.set(n.id,n);return e}),[]);B((function(e){return e.rebuild()}),t);return t.length>0},GUILD_ROLE_UPDATE:function(e){var t=e.guildId;if(w.has(t))return B((function(e){return e.rebuild()}),k(t))},RTC_CONNECTION_VIDEO:function(e){var t=e.channelId,n=e.guildId,r=e.userId;return!(null==n||!w.has(n))&&x(r,[t])},STREAM_CLOSE:q,STREAM_DELETE:q,RELATIONSHIP_ADD:z,RELATIONSHIP_REMOVE:z,GUILD_CREATE:K,GUILD_DELETE:K,PASSIVE_UPDATE_V1:function(e){var t=!1,n=!0,r=!1,i=void 0;try{for(var o,a=k(e.guildId)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){t=j(o.value).rebuild()||t}}catch(e){r=!0;i=e}finally{try{
n||null==a.return||a.return()}finally{if(r)throw i}}return t}})},312855:(e,t,n)=>{"use strict";n.d(t,{pV:()=>A,Ui:()=>N,ZP:()=>w});var r=n(105994),i=n(997163),o=n(18416),a=n(356004),u=n(210854),c=n(212218),s=n(105405),l=n(859023),f=n(882687),d=n(570992),p=n(975906),_=n(756328),h=n(673221),E=(n(791462),n(653772)),y=n(108580);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=function(e,t){var n=O(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[E.Z,c.ZP],2),r=n[0],i=n[1];if(null==e||null==t)return null;var o=r.getGuild(e);if(null==o)return null;var a=i.getMember(o.id,t);return null==a?null:y.ZP.getHighestHoistedRole(o,a)};var b=n(461061);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){S(e,t,n[t])}))}return e}function T(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var A,N;!function(e){e.SPEAKER="SPEAKER";e.MODERATOR="MODERATOR";e.AUDIENCE="AUDIENCE";e.NO_ROLE="NO_ROLE";e.ALL_REQUESTED_TO_SPEAK="ALL_REQUESTED_TO_SPEAK";e.REQUESTED_TO_SPEAK_ONLY="REQUESTED_TO_SPEAK_ONLY";e.BLOCKED="BLOCKED";e.FRIEND="FRIEND";e.SELECTED="SELECTED";e.MEDIA="MEDIA"}(A||(A={}));!function(e){
e.VOICE="VOICE";e.STREAM="STREAM"}(N||(N={}));function C(e){var t,n=e.speaker,r=e.role,i=e.user,o=e.userNick,a=e.connectedOn,u=e.voiceState,c=n?"\0":"",s="";e.type===N.STREAM?s="\0":u.selfVideo&&(s="");var l="".concat(null!==(t=null==r?void 0:r.position)&&void 0!==t?t:999).padStart(3,"0");return"".concat(c).concat(s).concat(l).concat(a).concat(function(e,t){return"".concat(e.toLowerCase().padEnd(32,"!")).concat(t.discriminator)}(o,i))}function P(e){var t=e.user,n=e.voiceState.requestToSpeakTimestamp;return null==n?t.id:"".concat(Date.parse(n)).concat(t.id)}function R(e){return e===h.xO.REQUESTED_TO_SPEAK||e===h.xO.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK}function D(e){var t=e.speaker,n=e.moderator,r=e.role,i=e.rtsState,o=e.blocked,a=e.isFriend,u=[];R(i)&&u.push(A.ALL_REQUESTED_TO_SPEAK);i===h.xO.REQUESTED_TO_SPEAK&&u.push(A.REQUESTED_TO_SPEAK_ONLY);if(t)u.push(A.SPEAKER);else{null!=r?u.push(r.id):u.push(A.NO_ROLE);u.push(A.AUDIENCE)}n&&u.push(A.MODERATOR);o&&u.push(A.BLOCKED)
;a&&u.push(A.FRIEND);return u}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n;this.participants={};this._participantsIndex=new r.Z(D,C);this._requestToSpeakIndex=new r.Z((function(){return[]}),P);this.channelId=t;this.guildId=null===(n=a.Z.getChannel(t))||void 0===n?void 0:n.getGuildId()}var t=e.prototype;t._getParticipantsForUser=function(e,t){var n=[],r=f.Z.getVoiceStateForChannel(this.channelId,e);if(null==r)return n;var a=l.default.getUser(e);if(null==a){null!=this.guildId&&_.Z.isPublic(this.channelId)&&u.Z.requestMember(this.guildId,e);return n}var E,y,v,O=null!=t?t[0]:null,m=T(g({user:a,userNick:d.Z.getName(this.guildId,this.channelId,a),voiceState:r,role:I(this.guildId,e)},p.ZP.getPermissionsForUser(e,this.channelId)),{member:null!=this.guildId?c.ZP.getMember(this.guildId,e):null,blocked:s.Z.getRelationships()[a.id]===b.OGo.BLOCKED,isFriend:s.Z.isFriend(a.id),
connectedOn:null!==(E=null==O?void 0:O.connectedOn)&&void 0!==E?E:Date.now()}),S=T(g({},m),{type:N.VOICE,id:a.id,rtsState:(0,h.gf)(r)});n.push(S);var A=null!==(v=o.Z.getStreamForUser(e))&&void 0!==v?v:o.Z.getActiveStreamForUser(e);if(null!=A&&A.channelId===this.channelId){var C=(0,i.V9)(A);y=T(g({},m),{id:C,type:N.STREAM,rtsState:h.xO.NONE});n.push(y)}return n};t.updateParticipant=function(e){var t=this,n=this.participants[e],r=this._getParticipantsForUser(e,n);if(null==n&&0===r.length)return!1;null==n||n.forEach((function(e){t._participantsIndex.delete(e.id);t._requestToSpeakIndex.delete(e.id)}));r.forEach((function(n){t._participantsIndex.set(n.id,n);n.id===e&&R(n.rtsState)?t._requestToSpeakIndex.set(e,n):t._requestToSpeakIndex.delete(e)}));this.participants[e]=r;return!0};t.rebuild=function(){var e=this,t=a.Z.getChannel(this.channelId);if(null==t||!t.isGuildStageVoice())return!1;var n=new Set(Object.keys(f.Z.getVoiceStatesForChannel(t.id)));this._participantsIndex.clear()
;this._requestToSpeakIndex.clear();this.participants={};n.forEach((function(t){return e.updateParticipant(t)}));return!0};t.size=function(e){return this._participantsIndex.size(e)};t.toArray=function(e){return this._participantsIndex.values(e,!0)};t.getParticipant=function(e){var t;return null!==(t=this._participantsIndex.get(e))&&void 0!==t?t:null};t.getRequestToSpeakParticipants=function(){return this._requestToSpeakIndex.values(void 0,!0)};!function(e,t,n){t&&m(e.prototype,t);n&&m(e,n)}(e,[{key:"version",get:function(){return this._participantsIndex.version}},{key:"requestToSpeakVersion",get:function(){return this._requestToSpeakIndex.version}}]);return e}()},862770:(e,t,n)=>{"use strict";n.d(t,{_L:()=>p,Os:()=>_,nG:()=>h,B:()=>E,jU:()=>y});var r=n(368365),i=n(791462),o=n(630695),a=(n(631134),n(356004)),u=n(653772),c=n(940712),s=n(108580),l=n(531648),f=n(756328),d=n(461061);function p(e,t,n){var i,o,a=null==n?void 0:n.permissionOverwrites[e];return{id:e,type:t,
deny:null!==(i=null==a?void 0:a.deny)&&void 0!==i?i:s.ZP.NONE,allow:r.Z.remove(null!==(o=null==a?void 0:a.allow)&&void 0!==o?o:s.ZP.NONE,l.yP)}}function _(e){var t=e.allow,n=e.deny;return r.Z.equals(t,s.ZP.NONE)&&r.Z.equals(n,s.ZP.NONE)}function h(e){return(0,i.e7)([c.Z,u.Z,a.Z],(function(){var t=a.Z.getChannel(e),n=u.Z.getGuild(null==t?void 0:t.getGuildId());return!(!c.Z.can(d.Plq.ADMINISTRATOR,n)&&!c.Z.can(d.Plq.MANAGE_ROLES,t,void 0,void 0,!0))||!!c.Z.can(l.N,t)}),[e])}function E(e){return(0,i.e7)([a.Z,c.Z],(function(){return null!=e&&c.Z.can(d.Plq.MUTE_MEMBERS,a.Z.getChannel(e))}),[e])}function y(e){return!(null==e||!e.isGuildStageVoice())&&(!!o.Z.isLurking(e.guild_id)&&(!!f.Z.isPublic(e.id)&&c.Z.can(l.gl,e)))}},824044:(e,t,n)=>{"use strict";n.d(t,{Lw:()=>d,rq:()=>p,dS:()=>_,JE:()=>h});var r=n(631134),i=n(356004),o=n(653772),a=n(975906),u=n(385202),c=n(461061);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){
return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f="stage:";function d(e,t){var n=0,i=r.default.getId();a.ZP.isSpeaker(i,e.id)&&(n|=1);var u=o.Z.getGuild(e.getGuildId());if(null!=u){
u.hasFeature(c.oNc.PARTNERED)&&(n|=2);u.hasFeature(c.oNc.VERIFIED)&&(n|=4)}var s=n.toString(16);return"".concat(f).concat(e.guild_id,":").concat(e.id,":").concat(s,":").concat(t.id)}function p(e){if(null!=e&&null!=e.party){var t=e.party,n=t.id,r=t.size;try{if(null==n||!n.startsWith(f))return;var i=l(n.split(":"),5),o=i[1],a=i[2],u=i[3],c=i[4],s=parseInt(u,16);return{guildId:o,channelId:a,size:r,userIsSpeaker:0!=(1&s),guildIsPartnered:0!=(2&s),guildIsVerified:0!=(4&s),stageInstanceId:c}}catch(e){return null}}}function _(e){return(null==e?void 0:e.application_id)===u.gD}function h(e){var t=p(e);if(null==t)return!1;var n=t.channelId;return null!=i.Z.getChannel(n)}},975906:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>L});var r=n(496486),i=n.n(r),o=n(791462),a=n(173436),u=n(356004),c=n(1812),s=n(212218),l=n(653772),f=n(859023),d=n(882687),p=n(108580),_=n(531648),h=n(673221);function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n){
t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function O(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){I=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return I(e,t)}var b,m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)
}else n=r.apply(this,arguments);return O(this,n)}}!function(e){e.SPEAKER="speaker";e.MODERATOR="moderator"}(b||(b={}));var g,T={},A=(y(g={},b.SPEAKER,!1),y(g,b.MODERATOR,!1),g);function N(e,t){var n,r=u.Z.getChannel(t),i=null==r?void 0:r.getGuildId(),o=l.Z.getGuild(i);return null!=o&&null!=r&&r.isGuildStageVoice()?(y(n={},b.SPEAKER,function(e,t){var n=d.Z.getVoiceStateForChannel(t,e);return(0,h.gf)(n)===h.xO.ON_STAGE}(e,t)),y(n,b.MODERATOR,function(e,t,n){return p.ZP.can({permission:_.yP,user:e,context:t,overwrites:n.permissionOverwrites,roles:t.roles})}(e,o,r)),n):A}function C(e,t){var n;if(null==t)return!1;var r=u.Z.getChannel(t);if(null==r||!r.isGuildStageVoice())return!1;null===(n=T[t])||void 0===n||delete n[e];return!0}function P(e){var t=c.ZP.getChannels(e)[c.Zb].filter((function(e){return e.channel.isGuildStageVoice()})),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value.channel;delete T[u.id]}}catch(e){r=!0;i=e}finally{try{
n||null==a.return||a.return()}finally{if(r)throw i}}return t.length>0}function R(e){var t=e.guildId,n=e.user;return null!=n&&null!=t&&function(e,t){for(var n in T){var r=u.Z.getBasicChannel(n);null!=r&&r.guild_id===t&&delete T[n][e]}return!0}(n.id,t)}function D(e){var t=e.guild;for(var n in T){var r=u.Z.getBasicChannel(n);null!=r&&r.guild_id!==t.id||delete T[n]}}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&I(e,t)}(n,e);var t=S(n);function n(){E(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(s.ZP,u.Z,l.Z,f.default,d.Z)};r.isSpeaker=function(e,t){return this.getPermissionsForUser(e,t)[b.SPEAKER]};r.isModerator=function(e,t){return this.getPermissionsForUser(e,t)[b.MODERATOR]};r.isAudienceMember=function(e,t){var n=this.getPermissionsForUser(e,t)
;return!n[b.SPEAKER]&&!n[b.MODERATOR]};r.getPermissionsForUser=function(e,t){var n;if(null==e||null==t)return A;var r=null===(n=T[t])||void 0===n?void 0:n[e];return null!=r?r:function(e,t){null==T[t]&&(T[t]={});var n=N(e,t);T[t][e]=n;return n}(e,t)};r.__getLocalVars=function(){return{userStageRoles:T}};return n}(o.ZP.Store);w.displayName="StageChannelRoleStore";const L=new w(a.Z,{CHANNEL_UPDATES:function(e){var t=e.updates,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value.channel;delete T[u.id]}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},CONNECTION_OPEN:function(){T={}},GUILD_MEMBER_REMOVE:R,GUILD_MEMBER_UPDATE:R,GUILD_ROLE_UPDATE:function(e){P(e.guildId)},PASSIVE_UPDATE_V1:function(e){var t,n=P(e.guildId),r=!0,i=!1,o=void 0;try{for(var a,u=(null!==(t=e.voiceStates)&&void 0!==t?t:[])[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;n=C(c.userId,c.channelId)||n}}catch(e){i=!0;o=e
}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n},VOICE_STATE_UPDATES:function(e){var t=e.voiceStates;return!i().isEmpty(T)&&t.reduce((function(e,t){return C(t.userId,t.channelId)||e}),!1)},GUILD_CREATE:D,GUILD_DELETE:D})},501887:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(110251),i=n.n(r),o=n(791462),a=n(173436),u=n(631134),c=n(356004),s=n(653772),l=n(733285),f=n(379822),d=n(108580),p=n(820498),_=n(312855),h=n(824044),E=n(756328),y=n(385202),v=n(461061);function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e){I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return I(e)}function b(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t){m=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return m(e,t)}
var S=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}var T=null;function A(){var e,t,n=f.Z.getVoiceChannelId();if(null==n)return null;var r=E.Z.getStageInstanceByChannel(n);if(null==r)return null;var i=c.Z.getChannel(n);if(null==i)return null;if(!d.ZP.canEveryone(v.Plq.VIEW_CHANNEL,i))return null;var o=s.Z.getGuild(i.getGuildId());if(null==o)return null;if(!o.hasFeature(v.oNc.DISCOVERABLE))return null;var a,u,l,O,I=(0,h.Lw)(i,r),b=(null==T||null===(e=T.party)||void 0===e?void 0:e.id)===I?T:null;return{application_id:y.gD,
name:null!==(u=null!==(a=r.topic)&&void 0!==a?a:i.topic)&&void 0!==u?u:i.name,type:v.IIU.LISTENING,timestamps:{start:null!==(l=null==b||null===(t=b.timestamps)||void 0===t?void 0:t.start)&&void 0!==l?l:(new Date).getTime()},assets:{small_image:null!==(O=o.icon)&&void 0!==O?O:void 0,small_text:o.name},party:{id:I,size:[p.Z.getParticipantCount(n,_.pV.SPEAKER),p.Z.getParticipantCount(n)]}}}function N(){var e=A();if(!i()(e,T)){T=e;return!0}return!1}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&m(e,t)}(n,e);var t=g(n);function n(){O(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(c.Z,f.Z,E.Z,l.Z)};r.getActivity=function(){return T};r.__getLocalVars=function(){return{activity:T}};return n}(o.ZP.Store);C.displayName="StageChannelSelfRichPresenceStore"
;const P=new C(a.Z,{CONNECTION_OPEN:N,STAGE_INSTANCE_CREATE:N,STAGE_INSTANCE_UPDATE:N,STAGE_INSTANCE_DELETE:N,VOICE_CHANNEL_SELECT:N,RTC_CONNECTION_STATE:function(e){var t,n,r,i=e.state,o=null!==(r=null==T||null===(t=T.party)||void 0===t||null===(n=t.size)||void 0===n?void 0:n[1])&&void 0!==r?r:0;return!(i!==v.hes.RTC_CONNECTED||o>0)&&N()},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){var n,r;if(t.userId!==u.default.getId())return e;var i=A();if((null==i||null===(n=i.party)||void 0===n?void 0:n.id)===(null==T||null===(r=T.party)||void 0===r?void 0:r.id))return e;T=i;return!0}),!1)}})},385202:(e,t,n)=>{"use strict";n.d(t,{xA:()=>o,gD:()=>a,Df:()=>u,$z:()=>c,BM:()=>r,lv:()=>i});n(95467),n(461061),n(959797);var r,i,o=240,a="834488117758001152",u="stage-invite",c="stage-channel-audience-notice-shown";!function(e){e[e.EVERYONE=1]="EVERYONE";e[e.NO_ONE=2]="NO_ONE";e[e.ROLES=3]="ROLES"}(r||(r={}));!function(e){e[e.GUILD_SELECTION=0]="GUILD_SELECTION"
;e[e.STAGE_CHANNEL_SETTINGS=1]="STAGE_CHANNEL_SETTINGS";e[e.PUBLIC_STAGE_PREVIEW=2]="PUBLIC_STAGE_PREVIEW"}(i||(i={}))},116212:(e,t,n)=>{"use strict";n.d(t,{P:()=>u,x:()=>c});var r=n(791462),i=n(882687),o=n(820498),a=n(312855);function u(e){return(0,r.e7)([o.Z,i.Z],(function(){return null!=o.Z.getMutableParticipants(e,a.pV.SPEAKER).find((function(e){return e.type===a.Ui.STREAM}))||i.Z.hasVideo(e)}),[e])}function c(e){return null!=o.Z.getMutableParticipants(e,a.pV.SPEAKER).find((function(e){return e.type===a.Ui.STREAM}))||i.Z.hasVideo(e)}},242275:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>f,Ku:()=>d,MV:()=>p});var r=n(667294),i=n(185253),o=n(791462),a=n(322928),u=n(940712),c=n(531648),s=n(756328),l=(0,i.Z)((function(e){return{isOnStartStageScreen:!0}}));const f=l;function d(e){l.setState({isOnStartStageScreen:e})}function p(e){var t=(0,o.e7)([u.Z],(function(){return u.Z.can(c.yP,e)}),[e]),n=(0,o.e7)([s.Z],(function(){return s.Z.isLive(e.id)}),[e.id]),i=(0,a.Vy)(e.guild_id),l=t&&!n
;r.useEffect((function(){i?d(!n):l||d(!1)}),[l,i,n])}},398272:(e,t,n)=>{"use strict";n.d(t,{_d:()=>a,Z7:()=>u,z:()=>c});var r=n(791462),i=n(820498),o=n(312855);function a(e){return(0,r.e7)([i.Z],(function(){return null!=e?i.Z.getParticipantCount(e,o.pV.BLOCKED):0}),[e])}function u(e){var t;return null!==(t=i.Z.getParticipantCount(e,o.pV.BLOCKED))&&void 0!==t?t:0}function c(e){return(0,r.e7)([i.Z],(function(){return i.Z.getMutableParticipants(e,o.pV.BLOCKED)}),[e])}},876679:(e,t,n)=>{"use strict";n.d(t,{Z:()=>W});var r=n(791462),i=n(173436),o=n(725616),a=n(630695),u=n(989232),c=n(653772),s=n(893264),l=n(673973),f=n(461061);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}
function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function E(e){E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return E(e)}function y(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}
function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}var T=new Map,A=new Map,N=null,C=[],P=null,R=!1,D=new Map,w=function(e,t){D=new Map(D.set(e,t))},L=1e3*f.UF9.HOUR,U=function(e){
var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;A.set(e.id,e);t&&k(e,n)},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=N){var n=e.tags,r={type:s.MO.STICKER_NAME,value:e.name.trim().toLocaleLowerCase()};if((0,l.jl)(e)){var i=C.find((function(t){return t.id===e.pack_id})),a=[r].concat(b((null!=n?n:"").split(",").map((function(e){return{type:s.MO.TAG,value:e.trim().toLocaleLowerCase()}}))));null!=i&&a.push({type:s.MO.PACK_NAME,value:i.name});N.set(e.id,a)}else if((0,l.J8)(e)&&null!=n){var c=o.Z.getByName(n),f={type:s.MO.TAG,value:n.trim().toLocaleLowerCase()},d=[r,f];if(null!=t){var p=(t instanceof u.Z?t.name:t.properties.name).trim().toLocaleLowerCase();null!=p&&""!==p&&d.push({type:s.MO.GUILD_NAME,value:p})}if(null==c){N.set(e.id,d);return}d.push({type:s.MO.CORRELATED_EMOJI,value:c.surrogates});c.forEachDiversity((function(e){return d.push({
type:s.MO.CORRELATED_EMOJI,value:e.surrogates})}));N.set(e.id,d)}}},M=function(e,t,n){T.set(e.id,e);var r=b(C);if(t){var i=r.findIndex((function(t){return t.id===e.id}));-1!==i?r[i]=e:r.push(e);C=r}(t||n)&&e.stickers.forEach((function(e){return U(e)}))},Z=function(){D.forEach((function(e,t){var n=c.Z.getGuild(t);null!=n&&e.forEach((function(e){return k(e,n)}))}));C.forEach((function(e){e.stickers.forEach((function(e){return k(e)}))}))},j=function(e){var t=e.guilds;N=null;A=new Map;D=new Map;t.forEach(G)};function G(e){e.stickers.forEach((function(t){U(t,!0,e)}));w(e.id,e.stickers)}var V=function(){C=[];A.clear();T.clear();N=null;D.clear();D=new Map(D);R=!1;P=null},B=function(){R=!0},x=function(e){e.packs.forEach((function(e){return M(e,!0)}));P=Date.now();R=!1},F=function(e){var t=e.pack,n=e.ingestStickers;M(t,!1,n)},H=function(e){var t=e.guildId,n=e.stickers;n.forEach((function(e){return U(e)}));w(t,n)},Y=function(e){
var t,n,r=e.guildId,i=e.sticker,o=null!==(t=D.get(r))&&void 0!==t?t:[];w(r,b(null!==(n=o.filter((function(e){return e.id!==i.id})))&&void 0!==n?n:[]).concat([i]));U(i)},z=function(e){var t=e.sticker;U(t,!1)},K=function(e){var t,n=e.guildId,r=e.stickers,i=function(e){var t,n=A.get(e.id);null!=n&&(0,l.J8)(n)&&(t=null!=n.user?n.user:void 0);return y(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){h(e,t,n[t])}))}return e}({},e),{user:t})};(null!==(t=D.get(n))&&void 0!==t?t:[]).filter((function(e){return null==r.find((function(t){return t.id===e.id}))})).forEach((function(e){A.delete(e.id);null!=N&&N.delete(e.id)}));var o=r.map((function(e){return i(e)}));o.forEach((function(e){return U(e)}));w(n,o)},q=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=g(n);function n(){p(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(c.Z)};r.getStickerById=function(e){return A.get(e)};r.getStickerPack=function(e){return T.get(e)};r.getPremiumPacks=function(){return C};r.isPremiumPack=function(e){return C.some((function(t){return t.id===e}))};r.getAllStickersIterator=function(){return A.values()};r.getAllGuildStickers=function(){return D};r.getStickersByGuildId=function(e){return D.get(e)};r.__getLocalVars=function(){return{stickerPacksByPackId:T,stickersById:A,stickerMetadata:N,premiumStickerPacks:C,lastFetchedPremiumStickerPacks:P,isFetchingStickerPacks:R,guildStickersByGuildId:D,setGuildStickersByGuildId:w,FETCHED_STANDARD_STICKER_PACKS_TTL_MS:L,ingestSticker:U,
ingestStickerMetadata:k,ingestStickerPack:M,rebuildStickerMetadata:Z,handleConnectionOpen:j,handleLogout:V,handleStickerPacksFetchStart:B,handleStickerPacksFetchSuccess:x,handleStickerPackFetchSuccess:F,handleGuildStickersFetchSuccess:H,handleGuildStickersCreateSuccess:Y,handleStickerFetchSuccess:z,handleGuildStickersUpdate:K}};!function(e,t,n){t&&_(e.prototype,t);n&&_(e,n)}(n,[{key:"stickerMetadata",get:function(){if(null==N){N=new Map;Z()}return N}},{key:"hasLoadedStickerPacks",get:function(){return null!=P&&P+L>Date.now()}},{key:"isFetchingStickerPacks",get:function(){return R}}]);return n}(r.ZP.Store);q.displayName="StickersStore";const W=new q(i.Z,{CONNECTION_OPEN:j,CACHE_LOADED_LAZY:function(e){var t=e.referencedStickers,n=e.allStickers;N=null;if(null!=t){D=new Map;Object.entries(t).forEach((function(e){var t=I(e,2),n=t[0],r=t[1];r.forEach((function(e){return U(e)}));D.set(n,r)}))}if(null!=n){D=new Map;for(var r in n)D.set(r,n[r])}},GUILD_CREATE:function(e){var t=e.guild
;a.Z.isLurking(t.id)||G(t)},GUILD_DELETE:function(e){var t,n=e.guild;(null!==(t=D.get(n.id))&&void 0!==t?t:[]).forEach((function(e){null!=N&&N.delete(e.id);A.delete(e.id)}));D.delete(n.id);D=new Map(D)},LOGOUT:V,STICKER_PACKS_FETCH_START:B,STICKER_PACKS_FETCH_SUCCESS:x,STICKER_PACK_FETCH_SUCCESS:F,GUILD_STICKERS_FETCH_SUCCESS:H,GUILD_STICKERS_CREATE_SUCCESS:Y,STICKER_FETCH_SUCCESS:z,GUILD_STICKERS_UPDATE:K})},868299:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(458248);function i(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0
;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function c(e,t,n){t&&u(e.prototype,t);n&&u(e,n);return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function l(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}var _=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}
i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},h=function(){},E=function(){function e(t,n){a(this,e);this.emoji=t;this.name=n;this.start_=0;this.end_=0}var t=e.prototype;t.hasData=function(){return this.end_>0};t.recordStart=function(){0===this.start_&&(this.start_=Date.now());r.Z.mark(this.emoji,"Start ".concat(this.name));h()};t.recordEnd=function(){if(0===this.end_){this.end_=Date.now();r.Z.mark(this.emoji,"Finish ".concat(this.name),this.end_-this.start_)}else r.Z.mark(this.emoji,"Finish ".concat(this.name));h()};t.set=function(e,t){if(0===this.start_){this.start_=e;this.end_=e+t}r.Z.mark(this.emoji,this.name,t);h()};t.serializeStart=function(e){return 0===this.start_?null:this.start_-e};t.serializeEnd=function(e){return 0===this.end_?null:this.end_-e};t.measure=function(e){if(this.start_>0)return r.Z.time(this.emoji,this.name,e);this.start_=Date.now()
;var t=r.Z.time(this.emoji,this.name,e);this.end_=Date.now();h();return t};t.measureAsync=function(e){var t=this;return o((function(){var n;return _(this,(function(i){switch(i.label){case 0:if(t.start_>0)return[2,r.Z.timeAsync(t.emoji,t.name,e)];t.start_=Date.now();return[4,r.Z.timeAsync(t.emoji,t.name,e)];case 1:n=i.sent();t.end_=Date.now();h();return[2,n]}}))}))()};c(e,[{key:"start",get:function(){return this.start_}},{key:"end",get:function(){return this.end_}}]);return e}(),y=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(this,e);this.emoji=t;this.name=n;this.onlyOnce=r;this.time_=0}var t=e.prototype;t.record=function(){0===this.time_&&(this.time_=Date.now());this.onlyOnce||r.Z.mark(this.emoji,this.name);h()};t.hasData=function(){return this.time_>0};t.serialize=function(e){return 0===this.time_?null:this.time_-e};c(e,[{key:"time",get:function(){return this.time_}}]);return e}(),v=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&f(e,t)}(i,e);var t=p(i);function i(){a(this,i);var e;(e=t.apply(this,arguments)).readyProperties={};e.didBackgroundApp=!1;e.wasAuthenticated=!1;e.interstitial=null;e.cachedChannelId=null;e.cachedMessageIds=null;e.messageCacheMissingReason="never-loaded";e.messageCacheAgeSeconds=null;e.messageCacheMissingCount=null;return e}var u=i.prototype;u.setTTICallback=function(e){h=function(){!0===e()&&(h=function(){return!1})}};u.setInterstitial=function(e){this.interstitial=e;h()};u.attachReadyPayloadProperties=function(e){this.readyProperties=e};u.appStateChanged=function(e){null==this.readyProperties.num_guilds&&(this.didBackgroundApp=this.didBackgroundApp||"active"!==e)};u.recordRender=function(e,t){this.renderMessages.record();e>0&&this.renderMessagesWithCache.record()
;e>0&&t&&this.renderLatestMessages.record()};u.recordMessageRender=function(e,t,r){var i=this;return o((function(){var o,a,u,c;return _(this,(function(s){switch(s.label){case 0:return[4,Promise.resolve().then(n.bind(n,277563))];case 1:o=s.sent(),a=o.default;if(i.renderLatestMessages.hasData())return[2];i.renderMessages.record();t.length>0&&i.renderMessagesWithCache.record();if(r){i.renderLatestMessages.record();if(null==i.cachedChannelId){i.messageCacheMissingReason="no-cache";return[2]}if(i.cachedChannelId!==e){i.messageCacheMissingReason="channel-changed";return[2]}if(null==i.cachedMessageIds||0===i.cachedMessageIds.length){i.messageCacheMissingReason="no-cache";return[2]}if(0===t.length){i.messageCacheMissingReason="channel-empty";return[2]}if(e===i.cachedChannelId){u=i.cachedMessageIds.sort(a.compare).reverse()[0];c=t.sort(a.compare).reverse()[0];i.messageCacheAgeSeconds=Math.floor((a.extractTimestamp(c)-a.extractTimestamp(u))/1e3);i.messageCacheMissingCount=t.filter((function(e){
return!i.cachedMessageIds.includes(e)})).length}}else if(null==i.cachedChannelId){i.cachedChannelId=e;i.cachedMessageIds=t}return[2]}}))}))()};u.serializeTTITracker=function(e){var t,i=n(496486)(r.Z.logGroups[0].logs).filter((function(e){return e.log.startsWith("Require ")})).map((function(e){return null!==(t=e.delta)&&void 0!==t?t:0})).sum();return{time_load_index_start:this.loadIndex.serializeStart(e),time_load_index_end:this.loadIndex.serializeEnd(e),time_begin_fast_connect_start:this.beginFastConnect.serializeStart(e),time_begin_fast_connect_end:this.beginFastConnect.serializeEnd(e),time_load_imports_start:this.loadImports.serializeStart(e),time_load_imports_end:this.loadImports.serializeEnd(e),time_init_start:this.init.serializeStart(e),time_init_end:this.init.serializeEnd(e),time_load_storage_start:this.loadStorage.serializeStart(e),time_load_storage_end:this.loadStorage.serializeEnd(e),time_parse_storage_start:this.parseStorage.serializeStart(e),
time_parse_storage_end:this.parseStorage.serializeEnd(e),time_load_mini_cache_start:this.loadMiniCache.serializeStart(e),time_load_mini_cache_end:this.loadMiniCache.serializeEnd(e),time_render_app_start:this.renderApp.serialize(e),time_render_app_effect_start:this.renderAppEffect.serialize(e),time_render_messages_end:this.renderMessages.serialize(e),time_render_messages_with_cache_end:this.renderMessagesWithCache.serialize(e),time_render_latest_messages_end:this.renderLatestMessages.serialize(e),time_load_lazy_cache_start:this.loadLazyCache.serializeStart(e),time_load_lazy_cache_end:this.loadLazyCache.serializeEnd(e),time_fetch_lazy_cache_start:this.fetchLazyCache.serializeStart(e),time_fetch_lazy_cache_end:this.fetchLazyCache.serializeEnd(e),time_parse_lazy_cache_start:this.parseLazyCache.serializeStart(e),time_parse_lazy_cache_end:this.parseLazyCache.serializeEnd(e),time_parse_lazy_channels_cache_start:this.parseLazyChannelsCache.serializeStart(e),
time_parse_lazy_channels_cache_end:this.parseLazyChannelsCache.serializeEnd(e),time_deserialize_cache_start:this.deserializeCache.serializeStart(e),time_deserialize_cache_end:this.deserializeCache.serializeEnd(e),time_dispatch_lazy_cache_start:this.dispatchLazyCache.serializeStart(e),time_dispatch_lazy_cache_end:this.dispatchLazyCache.serializeEnd(e),time_parse_ready_start:this.parseReady.serializeStart(e),time_parse_ready_end:this.parseReady.serializeEnd(e),time_ready_start:this.ready.serializeStart(e),time_ready_end:this.ready.serializeEnd(e),time_hydrate_ready_start:this.hydrateReady.serializeStart(e),time_hydrate_ready_end:this.hydrateReady.serializeEnd(e),time_dispatch_ready_start:this.dispatchReady.serializeStart(e),time_dispatch_ready_end:this.dispatchReady.serializeEnd(e),time_parse_ready_supplemental_start:this.parseReadySupplemental.serializeStart(e),time_parse_ready_supplemental_end:this.parseReadySupplemental.serializeEnd(e),
time_ready_supplemental_start:this.readySupplemental.serializeStart(e),time_ready_supplemental_end:this.readySupplemental.serializeEnd(e),time_hydrate_ready_supplemental_start:this.hydrateReadySupplemental.serializeStart(e),time_hydrate_ready_supplemental_end:this.hydrateReadySupplemental.serializeEnd(e),time_dispatch_ready_supplemental_start:this.dispatchReadySupplemental.serializeStart(e),time_dispatch_ready_supplemental_end:this.dispatchReadySupplemental.serializeEnd(e),time_fetch_messages_start:this.fetchMessages.serializeStart(e),time_fetch_messages_end:this.fetchMessages.serializeEnd(e),time_dispatch_messages_start:this.dispatchMessages.serializeStart(e),time_dispatch_messages_end:this.dispatchMessages.serializeEnd(e),identify_total_server_duration_ms:this.readyProperties.identify_total_server_duration_ms,identify_api_duration_ms:this.readyProperties.identify_api_duration_ms,identify_guilds_duration_ms:this.readyProperties.identify_guilds_duration_ms,
ready_compressed_byte_size:this.readyProperties.compressed_byte_size,ready_uncompressed_byte_size:this.readyProperties.uncompressed_byte_size,identify_compressed_byte_size:this.readyProperties.identify_compressed_byte_size,identify_uncompressed_byte_size:this.readyProperties.identify_uncompressed_byte_size,ready_compression_algorithm:this.readyProperties.compression_algorithm,ready_packing_algorithm:this.readyProperties.packing_algorithm,ready_unpack_duration_ms:this.readyProperties.unpack_duration_ms,is_reconnect:this.readyProperties.is_reconnect,is_fast_connect:this.readyProperties.is_fast_connect,did_force_clear_guild_hashes:this.readyProperties.did_force_clear_guild_hashes,had_cache_at_startup:this.readyProperties.had_cache_at_startup,used_cache_at_startup:this.readyProperties.used_cache_at_startup,num_guilds:this.readyProperties.num_guilds,num_changed_guild_channels:this.readyProperties.num_guild_channels,ready_presences_size:this.readyProperties.presences_size,
ready_users_size:this.readyProperties.users_size,ready_read_states_size:this.readyProperties.read_states_size,ready_private_channels_size:this.readyProperties.private_channels_size,ready_user_guild_settings_size:this.readyProperties.user_guild_settings_size,ready_relationships_size:this.readyProperties.relationships_size,ready_experiments_size:this.readyProperties.experiments_size,ready_user_settings_size:this.readyProperties.user_settings_size,ready_remaining_data_size:this.readyProperties.remaining_data_size,ready_guild_channels_size:this.readyProperties.guild_channels_size,ready_guild_members_size:this.readyProperties.guild_members_size,ready_guild_presences_size:this.readyProperties.guild_presences_size,ready_guild_roles_size:this.readyProperties.guild_roles_size,ready_guild_emojis_size:this.readyProperties.guild_emojis_size,ready_guild_remaining_data_size:this.readyProperties.guild_remaining_data_size,ready_guild_threads_size:this.readyProperties.guild_threads_size,
ready_guild_stickers_size:this.readyProperties.guild_stickers_size,ready_guild_events_size:this.readyProperties.guild_events_size,ready_guild_features_size:this.readyProperties.guild_features_size,ready_size_metrics_duration_ms:this.readyProperties.size_metrics_duration_ms,was_authenticated:this.wasAuthenticated,did_background_app:this.didBackgroundApp,interstitial:this.interstitial,message_cache_missing_reason:this.messageCacheMissingReason,message_cache_age_seconds:this.messageCacheAgeSeconds,message_cache_missing_count:this.messageCacheMissingCount,duration_major_js_imports:this.loadImports.end-this.loadIndex.start+i}};return i}((function e(){a(this,e);this.loadIndex=new E("","Load index.tsx");this.beginFastConnect=new E("","Begin fast_connect");this.loadImports=new E("","Load Imports");this.init=new E("","Initial Initialization");this.loadStorage=new E("","Load Storage");this.parseStorage=new E("","Parse Storage");this.loadMiniCache=new E("","Load Mini Cache")
;this.renderApp=new y("","First React Render");this.renderAppEffect=new y("","First React Render useEffect");this.renderMessages=new y("","React Render Messages",!0);this.renderMessagesWithCache=new y("","React Render Cached Messages",!0);this.renderLatestMessages=new y("","React Render Latest Messages");this.loadLazyCache=new E("","Load Lazy Cache");this.fetchLazyCache=new E("","Fetch Lazy Cache");this.parseLazyCache=new E("","Parse Lazy Cache");this.parseLazyChannelsCache=new E("","Parse Lazy Channels Cache");this.deserializeCache=new E("","Deserialize Cache");this.dispatchLazyCache=new E("","Dispatch Lazy Cache");this.parseReady=new E("","Parse READY");this.ready=new E("","READY");this.hydrateReady=new E("","Hydrate READY");this.dispatchReady=new E("","Dispatch READY");this.parseReadySupplemental=new E("","Parse READY Supplemental");this.readySupplemental=new E("","READY Supplemental")
;this.hydrateReadySupplemental=new E("","Hydrate READY Supplemental");this.dispatchReadySupplemental=new E("","Dispatch READY Supplemental");this.fetchMessages=new E("","Fetch messages");this.dispatchMessages=new E("","Dispatch messages")}));const O=new v},72529:(e,t,n)=>{"use strict";n.d(t,{r:()=>u,z:()=>c});var r=n(937457),i=n(149556),o=n(405959),a=n(228031);function u(e,t){var n=t===i.Yn.STREAM?r.h.STREAM:r.h.USER;return Math.abs((0,o.P)(n)-(0,o.P)(e))<1?n:e}function c(e){switch(e){case i.Yn.DEFAULT:return a.u0.USER;case i.Yn.STREAM:return a.u0.STREAM;default:return}}},620369:(e,t,n)=>{"use strict";n.d(t,{P:()=>u});n(667294),n(791462);var r=n(537127),i=(n(859023),n(590483)),o=n(910016);function a(e,t){var n=(0,o.Gx)(e,t.id);return(0,o.rD)(n)&&!i.ZP.canUseCustomBackgrounds(t)?null:"number"!=typeof n||(0,o.sd)(n)?n:null}function u(e){var t;return a(null===(t=r.Z.settings.voiceAndVideo)||void 0===t?void 0:t.videoBackgroundFilterDesktop,e)}},404534:(e,t,n)=>{"use strict";n.d(t,{
RI:()=>D,KH:()=>N,Nm:()=>L,XV:()=>S,Up:()=>P,GS:()=>w,Ff:()=>T});var r=n(675860),i=n(173436),o=n(180918),a=n(934714),u=n(859023),c=n(620369),s=n(910016),l=n(959797);function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var _,h,E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){
var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}!function(e){e.ASSET_SIZE="BINARY_TYPE_MAX_SIZE"}(_||(_={}));!function(e){e.ASSET="asset"}(h||(h={}));const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=y(n);function n(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i,o,a=(i=t.call(this,e,r,l.Z.Messages.VIDEO_BACKGROUND_ERROR_UPLOAD)).getFieldErrors(h.ASSET);null!=a&&(null===(o=a[0])||void 0===o?void 0:o.code)===_.ASSET_SIZE&&(i.message=l.Z.Messages.VIDEO_BACKGROUND_ERROR_UPLOAD_FILE_SIZE);return i}return n}(r.Z.V8APIError);var O=n(461061);function I(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}
function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){I(o,r,i,a,u,"next",e)}function u(e){I(o,r,i,a,u,"throw",e)}a(void 0)}))}}var m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}
if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function S(){return g.apply(this,arguments)}function g(){return(g=b((function(){var e;return m(this,(function(t){switch(t.label){case 0:return[4,r.Z.get(O.ANM.VIDEO_FILTER_ASSETS)];case 1:e=t.sent();i.Z.dispatch({type:"VIDEO_FILTER_ASSETS_FETCH_SUCCESS",assets:e.body});return[2,e]}}))}))).apply(this,arguments)}function T(e,t,n){return A.apply(this,arguments)}function A(){return(A=b((function(e,t,n){var o,a;return m(this,(function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);return[4,r.Z.post({url:O.ANM.VIDEO_FILTER_ASSETS,body:{type:t,asset:e,last_used:null==n?void 0:n.toISOString()}})];case 1:o=u.sent();i.Z.dispatch({type:"VIDEO_FILTER_ASSET_UPLOAD_SUCCESS",videoFilterAsset:o.body});return[2,o.body];case 2:a=u.sent()
;throw new v(a);case 3:return[2]}}))}))).apply(this,arguments)}function N(e){return C.apply(this,arguments)}function C(){return(C=b((function(e){var t;return m(this,(function(n){switch(n.label){case 0:return[4,r.Z.delete(O.ANM.VIDEO_FILTER_ASSET(e.id))];case 1:n.sent();t=(0,c.P)(u.default.getCurrentUser());(0,s.rD)(t)&&t.id===e.id&&P(null);i.Z.dispatch({type:"VIDEO_FILTER_ASSET_DELETE_SUCCESS",videoFilterAsset:e});return[2]}}))}))).apply(this,arguments)}function P(e){return R.apply(this,arguments)}function R(){return(R=b((function(e){var t;return m(this,(function(n){switch(n.label){case 0:return[4,o.hW.updateAsync("voiceAndVideo",(function(t){t.videoBackgroundFilterDesktop=(0,s.i7)(e)}),o.fy.FREQUENT_USER_ACTION)];case 1:n.sent();return(0,s.rD)(e)?[4,r.Z.post(O.ANM.VIDEO_FILTER_ASSET_LAST_USED(e.id))]:[3,3];case 2:t=n.sent();i.Z.dispatch({type:"VIDEO_SAVE_LAST_USED_BACKGROUND_OPTION",backgroundOption:t.body});return[3,4];case 3:i.Z.dispatch({
type:"VIDEO_SAVE_LAST_USED_BACKGROUND_OPTION",backgroundOption:e});n.label=4;case 4:return[2]}}))}))).apply(this,arguments)}function D(e){a.Z.isSupported()&&i.Z.dispatch({type:"MEDIA_ENGINE_APPLY_MEDIA_FILTER_SETTINGS",settings:e})}function w(){a.Z.isSupported()&&i.Z.dispatch({type:"MEDIA_ENGINE_APPLY_MEDIA_FILTER_SETTINGS_START"})}function L(){i.Z.dispatch({type:"MEDIA_ENGINE_APPLY_MEDIA_FILTER_SETTINGS_ERROR"})}},271606:(e,t,n)=>{"use strict";n.d(t,{xV:()=>o,dp:()=>a,X7:()=>u,E1:()=>c,f7:()=>s,HE:()=>l,SJ:()=>f});function r(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function i(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n
}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var o,a;!function(e){e[e.BACKGROUND=0]="BACKGROUND"}(o||(o={}));!function(e){e[e.OPTION_1=0]="OPTION_1";e[e.OPTION_2=1]="OPTION_2";e[e.OPTION_3=2]="OPTION_3";e[e.OPTION_4=3]="OPTION_4";e[e.OPTION_7=7]="OPTION_7";e[e.OPTION_8=8]="OPTION_8";e[e.OPTION_9=9]="OPTION_9";e[e.OPTION_10=10]="OPTION_10";e[e.BIRTHDAY_OPTION_1=11]="BIRTHDAY_OPTION_1"}(a||(a={}));var u=[a.OPTION_7,a.OPTION_8,a.OPTION_9,a.OPTION_10],c=[a.BIRTHDAY_OPTION_1,a.OPTION_7,a.OPTION_8,a.OPTION_9,a.OPTION_10,a.OPTION_1,a.OPTION_2,a.OPTION_3,a.OPTION_4].reduce((function(e,t,n){return i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));i.forEach((function(t){r(e,t,n[t])}))}return e
}({},e),r({},t,n))}),{}),s="blur",l={width:1280,height:720},f=10485760},989822:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(791462),i=n(149556),o=n(173436),a=n(537127),u=n(934714),c=n(379822),s=n(859023),l=n(910016);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return _(e)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){p(e,t,n[t])}))}return e}function E(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function y(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e,t){v=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return v(e,t)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}var b=!1,m=null,S=!1,g={};function T(e){var t,n=s.default.getCurrentUser();if(null==n)return!1;var r=null!=e?e:(0,l.Gx)(null===(t=a.Z.settings.voiceAndVideo)||void 0===t?void 0:t.videoBackgroundFilterDesktop,n.id);return null!=c.Z.getVoiceChannelId()&&u.Z.isVideoEnabled()&&null!=r}function A(){m!==c.Z.getVoiceChannelId()&&(S=!1);T()&&(S=!0);m=c.Z.getVoiceChannelId()}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}})
;t&&v(e,t)}(n,e);var t=I(n);function n(){f(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(a.Z,c.Z,u.Z);this.syncWith([c.Z,u.Z],A)};r.__getLocalVars=function(){return{hasBeenApplied:b,currentVoiceChannelId:m,hasUsedBackgroundInCall:S,videoFilterAssets:g}};!function(e,t,n){t&&d(e.prototype,t);n&&d(e,n)}(n,[{key:"videoFilterAssets",get:function(){return g}},{key:"hasBeenApplied",get:function(){return b}},{key:"hasUsedBackgroundInCall",get:function(){return S}}]);return n}(r.ZP.Store);N.displayName="VideoBackgroundStore";const C=new N(o.Z,{VIDEO_FILTER_ASSETS_FETCH_SUCCESS:function(e){var t=e.assets;g=t.reduce((function(e,t){return E(h({},e),p({},t.id,t))}),{})},VIDEO_FILTER_ASSET_UPLOAD_SUCCESS:function(e){var t=e.videoFilterAsset;g=E(h({},g),p({},t.id,t))},VIDEO_FILTER_ASSET_DELETE_SUCCESS:function(e){var t=e.videoFilterAsset;delete(g=h({},g))[t.id]},VIDEO_SAVE_LAST_USED_BACKGROUND_OPTION:function(e){T(e.backgroundOption)&&(S=!0)},
MEDIA_ENGINE_APPLY_MEDIA_FILTER_SETTINGS:function(e){var t=e.settings;i.TO.CAMERA_BACKGROUND_LIVE in t&&(b=!0)}})},910016:(e,t,n)=>{"use strict";n.d(t,{rD:()=>l,sd:()=>f,TA:()=>p,V$:()=>_,Bh:()=>h,g5:()=>E,$w:()=>y,Nx:()=>v,i7:()=>O,Gx:()=>I});var r=n(23816),i=n(356004),o=n(733285),a=n(932847),u=n(917870),c=n(271606),s=n(461061);function l(e){return null!=e&&"object"==typeof e&&"id"in e&&e.type===c.xV.BACKGROUND}function f(e){return"number"==typeof e&&e in c.dp}function d(e){return f(e)?c.X7.includes(e):!!l(e)&&((0,u.xR)(e.asset)||(0,u.ay)(e.asset))}function p(e){return null!=e?"Video Background":"None"}function _(e){return null==e?"None":l(e)?"Custom":"blur"===e?"Blur":"Preset - ".concat(function(e){switch(e){case c.dp.OPTION_1:return"Cybercity";case c.dp.OPTION_2:return"GreekTube the Movie";case c.dp.OPTION_3:return"Wumpus Vacation";case c.dp.OPTION_4:return"Vaporwave";case c.dp.OPTION_7:return"Capernite Day";case c.dp.OPTION_8:return"Capernite Night";case c.dp.OPTION_9:
return"Hacker Den";case c.dp.OPTION_10:return"Wumpice";case c.dp.BIRTHDAY_OPTION_1:return"7th Birthday"}}(e))}function h(e,t,n){var u=o.Z.getGuildId(),c=o.Z.getChannelId(),l=i.Z.getChannel(c),f=(0,r.kO)(u,c,!0);a.default.track(s.rMx.VIDEO_EFFECT_UPDATED,{location:t,effect_type:p(e),effect_detail:_(e),effect_state:n,channel_id:c,channel_type:null==l?void 0:l.type,guild_id:u,voice_state_count:f.voice_state_count,video_stream_count:f.video_stream_count,media_session_id:o.Z.getMediaSessionId(),rtc_connection_id:o.Z.getRTCConnectionId(),is_animated:d(e)})}function E(e,t,n){a.default.track(s.rMx.VIDEO_BACKGROUND_ADDED,{is_animated:d(e),is_video:t,is_from_tenor:n})}function y(e){a.default.track(s.rMx.VIDEO_BACKGROUND_DELETED,{is_animated:d(e)})}function v(e){return!!f(e)&&e===c.dp.BIRTHDAY_OPTION_1}function O(e){return null==e?{oneofKind:void 0}:l(e)?{oneofKind:"customAsset",customAsset:{id:e.id,assetHash:e.asset}}:"blur"===e?{oneofKind:"blur",blur:{useBlur:!0}}:{oneofKind:"presetOption",
presetOption:e}}function I(e,t){if(null==e||void 0===e.oneofKind)return null;switch(e.oneofKind){case"customAsset":return{type:c.xV.BACKGROUND,id:e.customAsset.id,user_id:t,asset:e.customAsset.assetHash};case"blur":return e.blur.useBlur?"blur":null;case"presetOption":return e.presetOption}}},930149:(e,t,n)=>{"use strict";n.d(t,{wG:()=>T,FU:()=>N,eH:()=>P});var r=n(441143),i=n.n(r),o=n(149556),a=n(859023),u=n(917870),c=n(620369),s=n(404534),l=n(989822),f=n(910016),d=n(352555),p=n(34405),_=n(271606),h=n(461061);function E(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){E(o,r,i,a,u,"next",e)}function u(e){E(o,r,i,a,u,"throw",e)}a(void 0)}))}}var v=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},
"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function O(e){return new Promise((function(t,n){var r=new Image
;r.crossOrigin="anonymous";r.onload=function(){var e=document.createElement("canvas");e.width=_.HE.width;e.height=_.HE.height;var n=e.getContext("2d");i()(null!=n,"Canvas context is missing");var o=r.height/r.width,a=_.HE.height,u=_.HE.height/o,c=(e.width-u)/2,s=(e.height-a)/2;n.drawImage(r,c,s,u,a);var l=n.getImageData(0,0,e.width,e.height);t({data:l.data,width:l.width,height:l.height,pixelFormat:"rgba"})};r.onerror=function(e){return n(e)};r.src=e}))}function I(e){return b.apply(this,arguments)}function b(){return(b=y((function(e){var t,n;return v(this,(function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:return[4,r.sent().blob()];case 2:t=r.sent();n=Uint8ClampedArray.bind;return[4,t.arrayBuffer()];case 3:return[2,new(n.apply(Uint8ClampedArray,[void 0,r.sent()]))]}}))}))).apply(this,arguments)}function m(e,t,n,r,i){(0,s.RI)(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},e,{graph:n,target:t,image:r,
blob:i}))}function S(e,t,n){return g.apply(this,arguments)}function g(){return(g=y((function(e,t,n){var r,i,a,c,l,f,p,h,E;return v(this,(function(y){switch(y.label){case 0:r=!1;if(null==n)return[2,m(e,t,o.zZ.NONE)];if(n===_.f7)return[2,m(e,t,o.zZ.BACKGROUND_BLUR)];if("string"==typeof n||"number"==typeof n){a=(0,d.Z)()[n];r=null!==(c=a.isVideo)&&void 0!==c&&c;i=a.source}else{l=n.asset;r=(0,u.xR)(l)||(0,u.ay)(l);i=(0,u.rI)({userId:n.user_id,assetId:n.id,assetHash:l,size:_.HE.width})}if(null==i)return[2];y.label=1;case 1:y.trys.push([1,8,,9]);return r?[3,3]:[4,O(i)];case 2:p=y.sent();return[3,4];case 3:p=void 0;y.label=4;case 4:f=p;return r?[4,I(i)]:[3,6];case 5:E=y.sent();return[3,7];case 6:E=void 0;y.label=7;case 7:h=E;m(e,t,o.zZ.BACKGROUND_REPLACEMENT,f,h);return[3,9];case 8:y.sent();(0,s.Nm)();return[3,9];case 9:return[2]}}))}))).apply(this,arguments)}function T(e,t){return A.apply(this,arguments)}function A(){return(A=y((function(e,t){var n,r,i;return v(this,(function(a){
switch(a.label){case 0:n=t.track,r=void 0===n||n,i=t.location;return[4,S(o.TO.CAMERA_BACKGROUND_LIVE,{type:o.W$.INPUT_DEVICE},e)];case 1:a.sent();r&&(0,f.Bh)(e,i,"Enabled");return[2]}}))}))).apply(this,arguments)}function N(e,t,n){return C.apply(this,arguments)}function C(){return(C=y((function(e,t,n){var r,i,a;return v(this,(function(u){switch(u.label){case 0:r=n.track,i=void 0===r||r,a=n.location;(0,s.GS)();return[4,S(o.TO.CAMERA_BACKGROUND_PREVIEW,{type:o.W$.STREAM,streamId:t},e)];case 1:u.sent();i&&(0,f.Bh)(e,a,"Preview");return[2]}}))}))).apply(this,arguments)}function P(){var e=a.default.getCurrentUser();if(null!=e){var t=(0,c.P)(e);(0,p.Z)()&&!l.Z.hasBeenApplied&&null!=t&&T(t,{track:!1}).catch(h.dG4)}}},352555:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(271606),i=n(682881),o=n(959797),a=n(341720),u=n.n(a),c=n(992769),s=n.n(c),l=n(512639),f=n.n(l),d=n(98483),p=n.n(d),_=n(842313),h=n.n(_),E=n(27498),y=n.n(E),v=n(909743),O=n.n(v),I=n(544035),b=n.n(I),m=n(601845),S=n.n(m)
;function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}const T=function(){var e;return g(e={},r.dp.OPTION_1,{id:r.dp.OPTION_1,source:p(),name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_1}),g(e,r.dp.OPTION_2,{id:r.dp.OPTION_2,source:y(),name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_2}),g(e,r.dp.OPTION_3,{id:r.dp.OPTION_3,source:O(),name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_3}),g(e,r.dp.OPTION_4,{id:r.dp.OPTION_4,source:b(),name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_4}),g(e,r.dp.OPTION_7,{id:r.dp.OPTION_7,source:s(),name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_7,isVideo:!0,hotspotLocation:i.v.ANIMATED_VIDEO_BG_CAPERNITE_DAY_NEW}),g(e,r.dp.OPTION_8,{id:r.dp.OPTION_8,source:f(),name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_8,isVideo:!0,hotspotLocation:i.v.ANIMATED_VIDEO_BG_CAPERNITE_NIGHT_NEW}),g(e,r.dp.OPTION_9,{id:r.dp.OPTION_9,source:h(),
name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_9,isVideo:!0,hotspotLocation:i.v.ANIMATED_VIDEO_BG_HACKER_DEN_NEW}),g(e,r.dp.OPTION_10,{id:r.dp.OPTION_10,source:S(),name:o.Z.Messages.VIDEO_BACKGROUND_DEFAULT_BACKGROUND_NAME_10,isVideo:!0,hotspotLocation:i.v.ANIMATED_VIDEO_BG_WUMPICE_NEW}),g(e,r.dp.BIRTHDAY_OPTION_1,{id:r.dp.BIRTHDAY_OPTION_1,source:u(),name:o.Z.Messages.VIDEO_BACKGROUND_BIRTHDAY_BACKGROUND_NAME_1,isVideo:!0,hotspotLocation:i.v.ANIMATED_VIDEO_BG_BIRTHDAY_1_NEW}),e}},34405:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(934714),i=n(866452);function o(e){return e.supports(i.AN.MEDIAPIPE)&&Object.values(e.getVideoDevices()).length>0}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Z;return o(e)}},322928:(e,t,n)=>{"use strict";n.d(t,{Og:()=>u,Vy:()=>c});var r=n(791462),i=n(653772),o=(n(859023),n(882687),(0,n(553494).B)({kind:"guild",id:"2022-10_text_in_stage",label:"Text-In-Stage",defaultConfig:{isEnabled:!1},treatments:[{id:1,
label:"Enable Text-In-Stage",config:{isEnabled:!0}}]})),a=n(461061);function u(e){var t=i.Z.getGuild(e);if(null==t)return!1;var n,r=null==t?void 0:t.hasFeature(a.oNc.TEXT_IN_STAGE_ENABLED),u=o.getCurrentConfig({guildId:null!==(n=t.id)&&void 0!==n?n:""}).isEnabled;return r||u}function c(e){var t=(0,r.e7)([i.Z],(function(){var t;return null===(t=i.Z.getGuild(e))||void 0===t?void 0:t.hasFeature(a.oNc.TEXT_IN_STAGE_ENABLED)}),[e]),n=o.useExperiment({guildId:null!=e?e:""},{autoTrackExposure:!0}).isEnabled;return t||n}},425600:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(490640);function i(e){i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return i(e)}function o(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){a=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return a(e,t)}
var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var a=i(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}const s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&a(e,t)}(n,e);var t=c(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).id=e.id;r.subscriptionId=e.subscriptionId
;r.premiumGuildSubscription=e.premiumGuildSubscription;r.canceled=e.canceled;r.cooldownEndsAt=e.cooldownEndsAt;return r}var r=n.prototype;r.isOnCooldown=function(){return null!=this.cooldownEndsAt&&new Date(this.cooldownEndsAt).getTime()>=Date.now()};r.isAvailable=function(){return null==this.premiumGuildSubscription&&!this.isOnCooldown()};n.createFromServer=function(e){return new n({id:e.id,subscriptionId:e.subscription_id,premiumGuildSubscription:null!=e.premium_guild_subscription?{id:e.premium_guild_subscription.id,guildId:e.premium_guild_subscription.guild_id}:null,canceled:e.canceled,cooldownEndsAt:e.cooldown_ends_at})};return n}(r.Z)},548349:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(730381),i=n.n(r),o=n(490640);function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function c(e,t){
t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&l(e,t)}(n,e);var t=d(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).code=e.code||"";r.temporary=e.temporary||!1;r.revoked=e.revoked||!1;r.uses=e.uses||0;r.maxUses=e.maxUses||0;r.maxAge=e.maxAge||0;r.createdAt=e.createdAt||new Date;r.channel=e.channel;r.guild=e.guild;r.inviter=e.inviter||null;r.targetType=e.targetType||null;r.targetUser=e.targetUser||null;r.targetApplication=e.targetApplication||null
;r.type=e.type||null;return r}var r=n.prototype;r.isExpired=function(){var e=this.maxAge;if(e>0){if(i()(this.createdAt).add(e,"seconds").isBefore(Date.now()))return!0}return!1};r.getExpiresAt=function(){if(this.maxAge>0){return i()(this.createdAt).add(this.maxAge,"seconds").toDate()}return 1/0};r.toString=function(){return this.code};n.createFromServer=function(e){var t;return new n(c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){a(e,t,n[t])}))}return e}({},e),{maxUses:e.max_uses,maxAge:e.max_age,createdAt:i()(null!==(t=e.created_at)&&void 0!==t?t:void 0),targetType:e.target_type,targetUser:e.target_user,targetApplication:e.target_application}))};return n}(o.Z)},497802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y})
;var r=n(791462),i=n(173436),o=n(664637),a=n(866452);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return c(e)}function s(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var p=o.tI.PRESET_VIDEO,_=o.LY.RESOLUTION_720,h=o.ws.FPS_30;var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&l(e,t)}(n,e);var t=d(n);function n(){u(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){if(null!=e){var t;p=null!==(t=e.preset)&&void 0!==t?t:o.tI.PRESET_VIDEO;_=e.resolution;h=e.fps}};r.getState=function(){return{preset:p,resolution:_,fps:h}};r.__getLocalVars=function(){return{preset:p,resolution:_,fps:h}};return n}(r.ZP.PersistedStore);E.displayName="ApplicationStreamingSettingsStore";E.persistKey="ApplicationStreamingSettingStore";const y=new E(i.Z,{MEDIA_ENGINE_SET_DESKTOP_SOURCE:function(e){var t=e.resolution,n=e.frameRate,r=e.context
;if(null==t||null==n||r!==a.Yn.STREAM)return!1;_=t;h=n},STREAM_UPDATE_SETTINGS:function(e){var t=e.preset,n=e.resolution,r=e.frameRate,i=!1;if(null!=t){p=t;i=!0}if(null!=n){_=n;i=!0}if(null!=r){h=r;i=!0}return i}})},107248:(e,t,n)=>{"use strict";n.d(t,{Z:()=>V});var r=n(791462),i=n(173436),o=n(832691),a=n(346529),u=n(356004),c=n(444450),s="stable-38";function l(){return{nonce:"",highestLastMessageId:"0",knownGuildVersions:{},readStateVersion:0,userGuildSettingsVersion:-1,userSettingsVersion:-1,version:s,cacheCreationDate:null,privateChannelsVersion:"0",apiCodeVersion:0}}var f,d="ClientStateStore",p=null!==(f=c.Z.get(d))&&void 0!==f?f:l();p.version===s&&null!=p.cacheCreationDate&&p.cacheCreationDate+2592e6>Date.now()||(p=l());var _=p;function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e){E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return E(e)}function y(e,t){
if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function v(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var I=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0
}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}var m,S,g=new o.Z("ClientStateStore"),T=_.nonce,A=_.highestLastMessageId,N=_.knownGuildVersions,C=_.readStateVersion,P=_.userGuildSettingsVersion,R=null!==(m=_.userSettingsVersion)&&void 0!==m?m:-1,D=_.cacheCreationDate,w=_.apiCodeVersion,L=null!==(S=_.privateChannelsVersion)&&void 0!==S?S:"0";function U(e){null!=e&&1===a.Z.compare(e,A)&&(A=e)}function k(e,t){var n;N[e]=Math.max(null!=t?t:0,null!==(n=N[e])&&void 0!==n?n:0)}function M(e){delete N[e]}function Z(e){k(e.guildId,e.role.version)}function j(){A="0";N={};C=0;P=-1;R=-1;L="0";c.Z.remove(d);w=0}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=b(n)
;function n(){h(this,n);return t.apply(this,arguments)}var r=n.prototype;r.persist=function(e){null==D&&(D=Date.now());T=e;t={nonce:e,highestLastMessageId:A,knownGuildVersions:N,readStateVersion:C,userGuildSettingsVersion:P,userSettingsVersion:R,version:s,cacheCreationDate:D,privateChannelsVersion:L,apiCodeVersion:w},c.Z.set(d,t);var t};r.clear=function(){j()};r.getClientState=function(){return{knownGuildVersions:N,highestLastMessageId:A,readStateVersion:C,userGuildSettingsVersion:P,userSettingsVersion:R,privateChannelsVersion:L,apiCodeVersion:w}};r.getSavedNonce=function(){return T};r.__getLocalVars=function(){return{logger:g,savedNonce:T,highestLastMessageId:A,knownGuildVersions:N,readStateVersion:C,userGuildSettingsVersion:P,userSettingsVersion:R,cacheCreationDate:D,apiCodeVersion:w,privateChannelsVersion:L}};return n}(r.ZP.Store);G.displayName="ClientStateStore";const V=new G(i.Z,{CONNECTION_OPEN:function(e){
var t,n,r=e.guilds,i=e.readState,o=e.userGuildSettings,a=e.userSettingsProto,u=e.apiCodeVersion;N={};C=i.version;P=o.version;R=null!==(n=null==a||null===(t=a.versions)||void 0===t?void 0:t.dataVersion)&&void 0!==n?n:-1;w=u;var c=!0,s=!1,l=void 0;try{for(var f,d=r[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var p=f.value;k(p.id,p.version);p.newChannels.forEach((function(e){return U(e.lastMessageId)}));var _=p.channelUpdates;if(null!=_){var h=!0,E=!1,y=void 0;try{for(var v,O=_[Symbol.iterator]();!(h=(v=O.next()).done);h=!0){U(v.value.last_message_id)}}catch(e){E=!0;y=e}finally{try{h||null==O.return||O.return()}finally{if(E)throw y}}}}}catch(e){s=!0;l=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw l}}},CONNECTION_OPEN_SUPPLEMENTAL:function(){var e=u.Z.getMutablePrivateChannels();for(var t in e){1===a.Z.compare(t,L)&&(L=t);var n=e[t].lastMessageId;null!=n&&1===a.Z.compare(n,L)&&(L=n)}},MESSAGE_CREATE:function(e){
var t,n=e.message,r=n.id,i=n.channel_id,o=e.isPushNotification,c=e.optimistic;if(!o&&!c){U(r);(null===(t=u.Z.getChannel(i))||void 0===t?void 0:t.isPrivate())&&1===a.Z.compare(r,L)&&(L=r)}},GUILD_DELETE:function(e){M(e.guild.id)},GUILD_CREATE:function(e){var t=e.guild;if(t.unavailable)M(t.id);else{var n;k(t.id,t.version);t.emojis.forEach((function(e){return k(t.id,e.version)}));t.stickers.forEach((function(e){return k(t.id,e.version)}));t.roles instanceof Array&&t.roles.forEach((function(e){return k(t.id,e.version)}));t.channels.forEach((function(e){return k(t.id,e.version)}));t.channels.forEach((function(e){return U(e.lastMessageId)}));null===(n=t.channelUpdates)||void 0===n||n.forEach((function(e){return U(e.last_message_id)}))}},GUILD_UPDATE:function(e){var t=e.guild;if(t.unavailable)M(t.id);else{k(t.id,t.version);t.emojis.forEach((function(e){return k(t.id,e.version)}));t.stickers.forEach((function(e){return k(t.id,e.version)}));t.roles.forEach((function(e){return k(t.id,e.version)
}))}},GUILD_ROLE_CREATE:Z,GUILD_ROLE_UPDATE:Z,GUILD_ROLE_DELETE:function(e){k(e.guildId,e.version)},GUILD_EMOJIS_UPDATE:function(e){var t=e.guildId;e.emojis.forEach((function(e){return k(t,e.version)}))},GUILD_STICKERS_UPDATE:function(e){var t=e.guildId;e.stickers.forEach((function(e){return k(t,e.version)}))},CHANNEL_CREATE:function(e){var t=e.channel,n=t.guild_id,r=t.version;null!=n&&k(n,r)},CHANNEL_UPDATES:function(e){var t=e.updates,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value.channel,c=u.guild_id,s=u.version;null!=c&&k(c,s)}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},CHANNEL_DELETE:function(e){var t=e.channel;null!=t.guild_id&&k(t.guild_id,t.version)},CLEAR_GUILD_CACHE:j,CLEAR_CACHES:j,LOGOUT:j,LOGIN:j,MESSAGE_ACK:function(e){var t=e.version,n=y(e,["version"]);if(null!=t){t!==C+1&&g.log("Gap detected in read state versions",C,t,n);C=t}else g.log("Received null read states version",n)},
CHANNEL_PINS_ACK:function(e){var t=e.version,n=y(e,["version"]);if(null!=t){t!==C+1&&g.log("Gap detected in read state versions",C,t,n);C=t}else g.log("Received null read states version",n)},USER_GUILD_SETTINGS_FULL_UPDATE:function(e){var t=e.userGuildSettings,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;null!=u.version&&u.version>P&&(P=u.version)}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},USER_SETTINGS_PROTO_UPDATE:function(e){var t=e.settings;if(null!=t.proto.versions){var n;R=null!==(n=t.proto.versions.dataVersion)&&void 0!==n?n:-1}}})},950008:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(791462),i=n(173436),o=n(690217),a=n(332233),u=n(490640);function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return c(e)}function s(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&l(e,t)}(n,e);var t=d(n)
;function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).id=e.id;r.type=e.type;r.name=e.name;r.revoked=e.revoked||!1;r.integrations=e.integrations||[];r.visibility=e.visibility||0;r.friendSync=e.friend_sync||!1;r.showActivity=e.show_activity||!1;r.verified=e.verified||!1;r.accessToken=e.access_token||null;r.twoWayLink=e.two_way_link||!1;r.metadata=e.metadata||null;r.metadataVisibility=e.metadata_visibility||0;return r}n.prototype.toString=function(){return this.name};return n}(u.Z),_=n(989232),h=n(461061);function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function O(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){y(e,t,n[t])}))}return e}function I(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function b(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t){m=Object.setPrototypeOf||function(e,t){e.__proto__=t
;return e};return m(e,t)}var S=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}var T=!0,A=[],N=[],C={},P={},R=function(e){A=e.filter((function(e){return!h.IN2.has(e.type)&&a.Z.isSupported(e.type)}));N=e.filter((function(e){return h.IN2.has(e.type)}));T=!1};var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&m(e,t)}(n,e);var t=g(n);function n(){
E(this,n);return t.apply(this,arguments)}var r=n.prototype;r.isJoining=function(e){return C[e]||!1};r.isFetching=function(){return T};r.getAccounts=function(){return A};r.getLocalAccounts=function(){return N};r.getAccount=function(e,t){return A.find((function(n){return(null==e||n.id===e)&&n.type===t}))};r.getLocalAccount=function(e){return N.find((function(t){return t.type===e}))};r.isSuggestedAccountType=function(e){return P[e]||!1};r.__getLocalVars=function(){return{isFetching:T,nonLocalAccounts:A,localAccounts:N,pendingJoins:C,suggestedConnectionTypes:P,updateAccounts:R}};return n}(r.ZP.Store);D.displayName="ConnectedAccountsStore";const w=new D(i.Z,{CONNECTION_OPEN:function(e){var t=e.connectedAccounts.map((function(e){return new p(e)}));R(t)},USER_CONNECTIONS_UPDATE:function(e){if(e.local&&null!=e.accounts){var t=e.accounts.map((function(e){return new p(I(O({},e),{integrations:e.integrations.map((function(e){return I(O({},e),{guild:new _.Z(e.guild)})}))}))}));R(t)}else o.Z.fetch()
},USER_CONNECTIONS_INTEGRATION_JOINING:function(e){C[e.integrationId]=e.joining},USER_CONNECTION_UPDATE:function(e){var t=e.platformType,n=e.id,r=e.revoked,i=e.accessToken,o=A.find((function(e){return e.id===n&&e.type===t}));if(null==o)return!1;null!=r&&(o.revoked=r);null!=i&&(o.accessToken=i)}})},358434:(e,t,n)=>{"use strict";n.d(t,{Z:()=>V});var r=n(110251),i=n.n(r),o=n(791462),a=n(675860),u=n(173436),c=n(690217),s=n(332233),l=n(137861),f=n(950008),d=n(893321),p=n(461061);function _(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_(o,r,i,a,u,"next",e)}function u(e){_(o,r,i,a,u,"throw",e)}a(void 0)}))}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)
};return y(e)}function v(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var I=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}var m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},
"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},S=function(e){return"https://youtube.com/watch?v=".concat(e)
},g=3e5,T="https://api.twitch.tv/helix",A=/live_user_(.*)-\{width\}/,N=null,C=0,P=null,R=new Set,D={};function w(e){var t;return null===(t=A.exec(e))||void 0===t?void 0:t[1]}function L(e,t,n){return a.Z.get({url:"".concat(T).concat(e),query:t,headers:{"Client-ID":p.d1H,Authorization:"Bearer ".concat(n)}})}function U(e,t){return k.apply(this,arguments)}function k(){return(k=h((function(e,t){var n,r,i,o,a;return m(this,(function(u){switch(u.label){case 0:return null!=(n=D[e])?[2,n]:[4,L("/games",{id:e},t)];case 1:r=u.sent(),i=r.body,o=i.data;a=o[0].name;D[e]=a;return[2,a]}}))}))).apply(this,arguments)}var M=function(){function e(){E(this,e);this._started=!1}var t=e.prototype;t.start=function(){if(!this._started){this._started=!0;f.Z.isFetching()?c.Z.fetch():this._check()}};t.stop=function(){this._started=!1;P=null;C=0;null!=this._nextCheck&&clearTimeout(this._nextCheck);u.Z.dispatch({type:"STREAMING_UPDATE",stream:null})};t._checkTwitch=function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return h((function(){var r,i,o,a,u,f,d,_,h,E,y,v,O;return m(this,(function(I){switch(I.label){case 0:if(e.revoked)return[2,null];if(null==(t=null!=t?t:e.accessToken))return[2,null];I.label=1;case 1:I.trys.push([1,4,,5]);return[4,L("/streams",{user_id:e.id,first:1},t)];case 2:i=I.sent(),o=i.body.data;if(null==(a=o[0])||"live"!==a.type)throw new Error("no stream");u=a.thumbnail_url,f=a.game_id,d=a.title;h={large_image:null!=u&&null!==(_=(0,l.f)(p.ABu.TWITCH,u))&&void 0!==_?_:void 0};return[4,U(f,t)];case 3:E=I.sent();y=s.Z.get(p.ABu.TWITCH);O=null!==(v=w(u))&&void 0!==v?v:e.name;return[2,{url:null===(r=y.getPlatformUserUrl)||void 0===r?void 0:r.call(y,{id:e.id,name:O}),name:y.name,assets:h,details:d,state:E}];case 4:return 401===I.sent().status&&null==t?[2,c.Z.refreshAccessToken(e.type,e.id).then((function(t){return n._checkTwitch(e,t)})).catch((function(){return null}))]:[2,null];case 5:return[2]}}))}))()}
;t._checkYouTube=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return h((function(){var r,i,o,u,f,d,_,h,E,y;return m(this,(function(v){switch(v.label){case 0:P=null;if(e.revoked||R.has(e.id))return[2,null];v.label=1;case 1:v.trys.push([1,3,,4]);return[4,a.Z.get({url:"https://www.googleapis.com/youtube/v3/liveBroadcasts",query:{part:"id,snippet",broadcastStatus:"active",broadcastType:"all"},headers:{Authorization:"Bearer ".concat(null!=t?t:e.accessToken)},oldFormErrors:!0})];case 2:r=v.sent();if((i=r.body.items).length<1)throw new Error("no stream");o=i[0],u=o.id,f=o.snippet,d=f.title,_=f.thumbnails;E={large_image:null!==(h=(0,l.f)(p.ABu.YOUTUBE,_.high.url))&&void 0!==h?h:void 0};return[2,P={url:S(u),name:s.Z.get(p.ABu.YOUTUBE).name,details:d,assets:E}];case 3:if(401===(y=v.sent()).status&&null==t)return[2,c.Z.refreshAccessToken(e.type,e.id).then((function(t){return n._checkYouTube(e,t)})).catch((function(){return null}))]
;403===y.status&&R.add(e.id);return[2,null];case 4:return[2]}}))}))()};t._check=function(){var e=this;if(this._started){var t=f.Z.getAccounts();if(null!=t){null!=this._nextCheck&&clearTimeout(this._nextCheck);var n=[p.ABu.TWITCH],r=Date.now();if(C<=r){n.push(p.ABu.YOUTUBE);C=r+g}var i=t.filter((function(e){return n.includes(e.type)})).map((function(t){return t.type===p.ABu.TWITCH?e._checkTwitch(t):e._checkYouTube(t)}));Promise.allSettled(i).then((function(t){if(e._started){var n,r=null===(n=t.find((function(e){return"fulfilled"===e.status&&null!=e.value})))||void 0===n?void 0:n.value;null==r&&null!=P&&(r=P);u.Z.dispatch({type:"STREAMING_UPDATE",stream:r})}e._scheduleCheck()}))}}};t._scheduleCheck=function(){var e=this;this._started&&(this._nextCheck=setTimeout((function(){return e._check()}),6e4))};return e}(),Z=new M;function j(){d.Z.enabled?Z.start():Z.stop()}var G=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=b(n);function n(){E(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){j();this.waitFor(f.Z);this.syncWith([d.Z],j)};r.getStream=function(){return N};r.__getLocalVars=function(){return{POLL_INTERVAL:6e4,YOUTUBE_VIDEO_URL:S,YOUTUBE_POLL_INTERVAL:g,TWITCH_API_ENDPOINT:T,TWITCH_USERNAME_THUMBNAIL_REGEX:A,stream:N,youtubeNextCheck:C,youtubeCachedResponse:P,youtubeForbiddenLiveChannels:R,twitchGameCache:D,poller:Z}};return n}(o.ZP.Store);G.displayName="ExternalStreamingStore";const V=new G(u.Z,{STREAMING_UPDATE:function(e){if(i()(e.stream,N))return!1;var t;N=null!==(t=e.stream)&&void 0!==t?t:null},USER_CONNECTIONS_UPDATE:function(){return Z._check()}})},172762:(e,t,n)=>{"use strict";n.d(t,{Z:()=>en});var r=n(496486),i=n.n(r),o=(n(459369),
n(791462)),a=n(173436),u=n(737325),c=n(354290),s=n(174034),l=n(478695),f=n(891153),d=n(717187),p=n.n(d),_=n(441143),h=n.n(_),E=n(999591),y=n(681178),v=n(458248),O=(n(925334),n(832691)),I=n(868299),b=n(107248),m=n(528090),S=n(535247),g=n(859023),T=n(932847),A=n(453587),N=n(937026);var C=n(314154);function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e){D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return D(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&U(e,t)}function L(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?P(e):t}function U(e,t){U=Object.setPrototypeOf||function(e,t){
e.__proto__=t;return e};return U(e,t)}var k=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}var Z={}.NativeModules,j=[],G=function(){function e(t){R(this,e);this._onDataReady=null;this._gatewayEncoding=t}var t=e.prototype;t.bindWebSocket=function(e){};t.feed=function(e){};t.dataReady=function(e){this._onDataReady=e};e.canUse=function(){return!1};return e}();j.push(function(e){w(r,e);var t=M(r);function r(e){R(this,r);var i;(i=t.call(this,e))._pako=n(999591);var o=i._pako;(i._inflate=new o.Inflate({chunkSize:65536,
to:i._gatewayEncoding.wantsString()?"string":""})).onEnd=i.handleFlushEnd.bind(P(i));return i}var i=r.prototype;i.getAlgorithm=function(){return"zlib-stream"};i.usesLegacyCompression=function(){return!1};i.feed=function(e){var t=this._pako,n=this._inflate;if(null==n)throw new Error("Trying to feed to closed compression adapter");if(null===this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");if(!(e instanceof ArrayBuffer))throw new Error("Expected array buffer, but got "+(void 0===e?"undefined":k(e)));var r=new DataView(e),i=r.byteLength>=4&&65535===r.getUint32(r.byteLength-4,!1);n.push(e,!!i&&t.Z_SYNC_FLUSH)};i.close=function(){if(null!=this._inflate){this._inflate.onEnd=null;this._inflate.chunks=[]}this._inflate=null};i.handleFlushEnd=function(e){var t=this._pako,n=this._inflate;if(null!=n){if(e!==t.Z_OK)throw new Error("zlib error, ".concat(e,", ").concat(n.strm.msg));var r,i=n.chunks,o=i.length
;if(this._gatewayEncoding.wantsString())r=o>1?i.join(""):i[0];else if(o>1){for(var a=0,u=0;u<o;u++)a+=i[u].length;for(var c=new Uint8Array(a),s=0,l=0;l<o;l++){var f=i[l];c.set(f,s);s+=f.length}r=c}else r=i[0];i.length=0;null!=this._onDataReady&&this._onDataReady(r)}else new O.Z("GatewayCompressionHandler").error("flush end happened on closed compression adapter")};r.canUse=function(){return void 0!==window.Uint8Array};return r}(G));j.push(function(e){w(r,e);var t=M(r);function r(){R(this,r);var e;(e=t.apply(this,arguments))._pako=n(999591);return e}var i=r.prototype;i.getAlgorithm=function(){return null};i.usesLegacyCompression=function(){return!0};i.feed=function(e){var t=this._pako;e instanceof ArrayBuffer&&this._gatewayEncoding.wantsString()&&(e=t.inflate(e,{to:"string"}));if(null==this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");this._onDataReady(e)};i.close=function(){};r.canUse=function(){return!0};return r}(G));j.push(function(e){
w(n,e);var t=M(n);function n(e){R(this,n);var r;(r=t.call(this,e))._socketId=null;return r}var r=n.prototype;r.bindWebSocket=function(e){this.close();this._socketId=e._socketId;Z.DCDCompressionManager.enableZlibStreamSupport(this._socketId)};r.getAlgorithm=function(){return"zlib-stream"};r.usesLegacyCompression=function(){return!1};r.feed=function(e){if(null==this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");null!==e&&this._onDataReady(e)};r.close=function(){var e=this._socketId;this._socketId=null;null!==e&&Z.DCDCompressionManager.disableZlibStreamSupport(e)};n.canUse=function(){return!1};return n}(G));var V=function(e){w(n,e);var t=M(n);function n(){R(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getAlgorithm=function(){return null};r.usesLegacyCompression=function(){return!1};r.feed=function(e){if(null==this._onDataReady)throw new Error("Cannot feed unless a data ready callback is registered.");this._onDataReady(e)}
;r.close=function(){};n.canUse=function(){return!0};return n}(G);j.push(V);var B=i().find(j,(function(e){return e.canUse()}));C.s.isDiscordGatewayPlaintextSet()&&(B=V);const x=B;var F=n(742269),H=n(588641);var Y=function(){if(F.FB){var e;try{e=H.default.requireModule("discord_erlpack")}catch(t){try{e=H.default.requireModule("erlpack")}catch(e){}}if(null!=e)return function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n=t.prototype;n.pack=function(t){return e.pack(t).buffer};n.unpack=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));try{return e.unpack(t)}catch(e){new O.Z("GatewayEncodingErlpackEncoding").error("Error unpacking",{erlpackUnpackError:e,erlpackDataPreview:null!=t?Array.from(t.slice(0,32)):null,erlpackDataLength:null!=t?t.length:null});throw e}};n.getName=function(){return"etf"};n.wantsString=function(){return!1};t.canUse=function(){return null!=e};return t}()}}(),z=function(){function e(){
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t=e.prototype;t.pack=function(e){return JSON.stringify(e)};t.unpack=function(e){if("string"!=typeof e)throw new Error("Expected a string to be passed to JSONEncoding.unpack");return JSON.parse(e)};t.getName=function(){return"json"};t.wantsString=function(){return!0};return e}(),K=void 0!==Y?Y:z;C.s.isDiscordGatewayPlaintextSet()&&(K=z);const q=K;var W=n(461061);function Q(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function J(e){J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return J(e)}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){Q(e,t,n[t])}))}return e}function X(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function ee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function te(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e,t){ne=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return ne(e,t)}var re=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var i=J(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return te(this,n)}}var oe=new O.Z("GatewaySocket"),ae=new q;function ue(e){var t,n,r,i=e.gatewayURL,o=e.newCallback,a=e.onOpen,u=e.onMessage,c=e.onError,s=e.onClose,l=window._ws,f=!1,d=!1,p=null;window._ws=null;if(null!=l){t=l.ws;if(l.state.gateway!==i){
oe.log("[FAST CONNECT] gatewayURL mismatch: ".concat(l.state.gateway," !== ").concat(i));t.close(1e3);t=null}else{oe.log("[FAST CONNECT] successfully took over websocket, state:",l.state);f=l.state.open;d=l.state.identify;p=l.state.messages}}null==t&&((t=(n=i,(0,F.Dt)()?new WebSocket(n,r,{headers:{Origin:window.GLOBAL_ENV.WEBAPP_ENDPOINT.replace("//","")}}):new WebSocket(n,r))).binaryType="arraybuffer");o(t);f&&a(d);null!=p&&p.forEach(u);t.onopen=function(){return a(d)};t.onmessage=u;t.onclose=s;t.onerror=c}function ce(){}var se,le;!function(e){e[e.DISPATCH=0]="DISPATCH";e[e.HEARTBEAT=1]="HEARTBEAT";e[e.IDENTIFY=2]="IDENTIFY";e[e.PRESENCE_UPDATE=3]="PRESENCE_UPDATE";e[e.VOICE_STATE_UPDATE=4]="VOICE_STATE_UPDATE";e[e.VOICE_SERVER_PING=5]="VOICE_SERVER_PING";e[e.RESUME=6]="RESUME";e[e.RECONNECT=7]="RECONNECT";e[e.REQUEST_GUILD_MEMBERS=8]="REQUEST_GUILD_MEMBERS";e[e.INVALID_SESSION=9]="INVALID_SESSION";e[e.HELLO=10]="HELLO";e[e.HEARTBEAT_ACK=11]="HEARTBEAT_ACK"
;e[e.CALL_CONNECT=13]="CALL_CONNECT";e[e.GUILD_SUBSCRIPTIONS=14]="GUILD_SUBSCRIPTIONS";e[e.LOBBY_CONNECT=15]="LOBBY_CONNECT";e[e.LOBBY_DISCONNECT=16]="LOBBY_DISCONNECT";e[e.LOBBY_VOICE_STATES_UPDATE=17]="LOBBY_VOICE_STATES_UPDATE";e[e.STREAM_CREATE=18]="STREAM_CREATE";e[e.STREAM_DELETE=19]="STREAM_DELETE";e[e.STREAM_WATCH=20]="STREAM_WATCH";e[e.STREAM_PING=21]="STREAM_PING";e[e.STREAM_SET_PAUSED=22]="STREAM_SET_PAUSED";e[e.REQUEST_GUILD_APPLICATION_COMMANDS=24]="REQUEST_GUILD_APPLICATION_COMMANDS";e[e.EMBEDDED_ACTIVITY_LAUNCH=25]="EMBEDDED_ACTIVITY_LAUNCH";e[e.EMBEDDED_ACTIVITY_CLOSE=26]="EMBEDDED_ACTIVITY_CLOSE";e[e.EMBEDDED_ACTIVITY_UPDATE=27]="EMBEDDED_ACTIVITY_UPDATE";e[e.REQUEST_FORUM_UNREADS=28]="REQUEST_FORUM_UNREADS";e[e.REMOTE_COMMAND=29]="REMOTE_COMMAND";e[e.GET_DELETED_ENTITY_IDS_NOT_MATCHING_HASH=30]="GET_DELETED_ENTITY_IDS_NOT_MATCHING_HASH"}(se||(se={}));!function(e){e.CLOSED="CLOSED";e.WILL_RECONNECT="WILL_RECONNECT";e.CONNECTING="CONNECTING";e.IDENTIFYING="IDENTIFYING"
;e.RESUMING="RESUMING";e.SESSION_ESTABLISHED="SESSION_ESTABLISHED"}(le||(le={}));var fe=4004;function de(e,t){var n=0;e.dataReady((function(e){try{return t(e,n)}finally{n=0}}));return function(t){var r=t.data;n+=pe(r);e.feed(r)}}function pe(e){return null==e?0:"string"==typeof e?e.length:e.byteLength}function _e(e){return{connectTime:null!=e?e:0,numEvents:0,largestWaitTime:0,dispatchTime:0,totalWaitTime:0,initialWaitTime:0,startTime:performance.now(),lastUpdateTime:performance.now()}}var he=window.GLOBAL_ENV.GATEWAY_ENDPOINT,Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&ne(e,t)}(n,e);var t=ie(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).dispatchExceptionBackoff=new y.Z(1e3,6e4);r.dispatchSuccessTimer=0
;r.resumeAnalytics=_e();r.didForceClearGuildHashes=!1;r.identifyUncompressedByteSize=0;r.identifyCompressedByteSize=0;r.isCacheLoaded=!1;r.queuedDispatches=[];r.analytics={};r.resumeUrl=null;r.send=function(e,t,n){0;m.default.isLoggingGatewayEvents&&oe.verbose("~>",e,t);var i=ae.pack({op:e,d:t});if(!n||r.isSessionEstablished())try{null!=r.webSocket?r.webSocket.send(i):oe.warn("Attempted to send without a websocket that exists. Opcode: ".concat(e))}catch(e){}else oe.warn("Attempted to send while not being in a connected state opcode: ".concat(e))};r.gatewayBackoff=new y.Z(1e3,6e4);r.handleIdentify=e;r.connectionState=le.CLOSED;r.webSocket=null;r.seq=0;r.sessionId=null;r.token=null;r.initialHeartbeatTimeout=null;r.expeditedHeartbeatTimeout=null;r.lastHeartbeatAckTime=null;r.helloTimeout=null;r.heartbeatInterval=null;r.heartbeater=null;r.heartbeatAck=!0;r.connectionStartTime=0;r.identifyStartTime=0;r.nextReconnectIsImmediate=!1;r.compressionHandler=new x(ae);r.hasConnectedOnce=!1
;r.isFastConnect=!1;return r}var r=n.prototype;r.hasQueuedDispatches=function(){return this.queuedDispatches.length>0};r.processFirstQueuedDispatch=function(){if(!this.hasQueuedDispatches())return!1;var e=this.queuedDispatches.shift(),t=e.data,n=e.type,r=e.compressionAnalytics;this._handleDispatchWithoutQueueing(t,n,r);return!0};r.processDispatchQueue=function(){this.isCacheLoaded=!0;if(this.hasQueuedDispatches()){var e=!0,t=!1,n=void 0;try{for(var r,i=this.queuedDispatches[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,a=o.data,u=o.type,c=o.compressionAnalytics;this._handleDispatchWithoutQueueing(a,u,c)}}catch(e){t=!0;n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.queuedDispatches.length=0}};r.addAnalytics=function(e){this.analytics=$({},this.analytics,e)};r.setResumeUrl=function(e){null!=e&&e.endsWith("/")&&(e=e.substring(0,e.length-1));null!==e&&oe.info("Updating resume url to ".concat(e));this.resumeUrl=e};r._connect=function(){var e=this
;if(this.willReconnect()){this.connectionState=le.CONNECTING;this.nextReconnectIsImmediate=!1;var t=this.compressionHandler.getAlgorithm(),n=ae.getName(),r=this._getGatewayUrl(),i=window.GLOBAL_ENV.API_VERSION;v.Z.mark("","Socket._connect");oe.info("[CONNECT] ".concat(r,", ")+"encoding: ".concat(n,", ")+"version: ".concat(i,", ")+"compression: ".concat(null!=t?t:"none"));if(null!==this.webSocket){oe.error("_connect called with already existing websocket");this._cleanup((function(e){return e.close(4e3)}))}this.connectionStartTime=Date.now();this.helloTimeout=setTimeout((function(){var t=Date.now()-e.connectionStartTime;e._handleClose(!1,0,"The connection timed out after ".concat(t," ms - did not receive OP_HELLO in time."));e.setResumeUrl(null)}),2e4);var o=new URL(r);o.searchParams.append("encoding",n);o.searchParams.append("v",i.toString());null!=t&&o.searchParams.append("compress",t);ue({gatewayURL:o.toString(),newCallback:function(t){e.webSocket=t
;e.compressionHandler.bindWebSocket(t)},onOpen:function(t){v.Z.mark("","GatewaySocket.onOpen ".concat(t));var n=Date.now()-e.connectionStartTime;oe.info("[CONNECTED] ".concat(o.toString()," in ").concat(n," ms"));e.isFastConnect=t; if (t !== undefined) e._doResumeOrIdentify();},onMessage:de(this.compressionHandler,(function(t,n){var r=Date.now(),i=ae.unpack(t),o=i.op,a=i.s,u=i.t,c=i.d;o!==se.DISPATCH&&v.Z.mark("","GatewaySocket.onMessage ".concat(o," ").concat(se[o]));var s=Date.now()-r;"READY"===u?I.Z.parseReady.set(r,s):"READY_SUPPLEMENTAL"===u?I.Z.parseReadySupplemental.set(r,s):s>10&&v.Z.mark("","Parse "+u,s);null!=a&&(e.seq=a);switch(o){case se.HELLO:0;e._clearHelloTimeout();e._handleHello(c);break;case se.RECONNECT:0;e._handleReconnect();break;case se.INVALID_SESSION:0;e._handleInvalidSession(c);break;case se.HEARTBEAT:e._sendHeartbeat();break;case se.HEARTBEAT_ACK:e._handleHeartbeatAck(c);break;case se.DISPATCH:0;e._handleDispatch(c,u,"READY"===u?{
compressed_byte_size:n,uncompressed_byte_size:pe(t),compression_algorithm:e.compressionHandler.getAlgorithm(),packing_algorithm:ae.getName(),unpack_duration_ms:s}:null);break;default:oe.info("Unhandled op ".concat(o))}})),onError:function(){e.setResumeUrl(null);A.Z.flushDNSCache();e._handleClose(!1,0,"An error with the websocket occurred")},onClose:function(t){var n=t.wasClean,r=t.code,i=t.reason;return e._handleClose(n,r,i)}})}};r._handleHello=function(e){var t=this.heartbeatInterval=e.heartbeat_interval,n=Date.now()-this.connectionStartTime;oe.info("[HELLO] via ".concat(this._getConnectionPath(e),", ")+"heartbeat interval: ".concat(t,", ")+"took ".concat(n," ms"));this._startHeartbeater()};r._handleReconnect=function(){oe.info("[RECONNECT] gateway requested I reconnect.");this._cleanup((function(e){return e.close(4e3)}));this.connectionState=le.WILL_RECONNECT;this._connect()};r._handleInvalidSession=function(e){oe.info("[INVALID_SESSION]".concat(e?" can resume)":""))
;e?this._doResumeOrIdentify():this._doIdentify()};r._handleDispatch=function(e,t,n){var r=performance.now();if(this.connectionState===le.RESUMING){var i=r-this.resumeAnalytics.lastUpdateTime;0===this.resumeAnalytics.numEvents?this.resumeAnalytics.initialWaitTime=i:i>this.resumeAnalytics.largestWaitTime&&(this.resumeAnalytics.largestWaitTime=i);this.resumeAnalytics.totalWaitTime+=i;this.resumeAnalytics.lastUpdateTime=r;this.resumeAnalytics.numEvents+=1;o.ZP.Emitter.pause(150)}this.isCacheLoaded?this._handleDispatchWithoutQueueing(e,t,n):this.queuedDispatches.push({data:e,type:t,compressionAnalytics:n});this.connectionState===le.RESUMING&&(this.resumeAnalytics.dispatchTime+=performance.now()-r)};r._handleDispatchWithoutQueueing=function(e,t,n){if("READY"===t)return this._handleReady(e,n);if("READY_SUPPLEMENTAL"===t){o.ZP.Emitter.resume();var r=Date.now()-this.connectionStartTime;oe.info("[READY_SUPPLEMENTAL] took ".concat(r,"ms"));this.connectionState=le.SESSION_ESTABLISHED
;this.gatewayBackoff.succeed()}else if("RESUMED"===t){o.ZP.Emitter.resume();var i=Date.now()-this.connectionStartTime;oe.info("[RESUMED] took ".concat(i,"ms, via ").concat(this._getConnectionPath(e),", ")+"replayed ".concat(this.resumeAnalytics.numEvents," events, new seq: ").concat(this.seq));!function(e){var t;if(!(null===(t=g.default.getCurrentUser())||void 0===t?void 0:t.isStaff())&&Math.random()<.5)return;T.default.track(W.rMx.CONNECTION_RESUMED,{connect_time_ms:e.connectTime,resume_time_ms:Math.floor(performance.now()-e.startTime),num_events:e.numEvents,largest_wait_time_ms:Math.floor(e.largestWaitTime),initial_wait_time_ms:Math.floor(e.initialWaitTime),total_wait_time_ms:Math.floor(e.totalWaitTime),total_dispatch_time_ms:Math.floor(e.dispatchTime)},{logEventProperties:!0})}(this.resumeAnalytics);this.resumeAnalytics=_e();this.connectionState=le.SESSION_ESTABLISHED;this.gatewayBackoff.succeed()}return this._handleGenericDispatch(e,t)};r._getGatewayUrl=function(){
return null!=this.resumeUrl?this.resumeUrl:he};r._handleReady=function(e,t){var n=Date.now();o.ZP.Emitter.resume();var r=Date.now()-this.connectionStartTime,i=e.session_id;this.sessionId=i;var a=this._getConnectionPath(e);v.Z.setServerTrace(a);oe.info("[READY] took ".concat(r,"ms, as ").concat(i," via ").concat(a));this.connectionState=le.SESSION_ESTABLISHED;this.gatewayBackoff.succeed();var u=function(e){0;var t,n,r=Date.now(),i=e.guilds,o=e.merged_presences,a=e.merged_members,u=e.read_state,c=e.private_channels,s=e.user_guild_settings,l=e.user_settings,f=e.user_settings_proto,d=e.experiments,p=e.guild_experiments,_=e.relationships,h=e.users,E=ee(e,["guilds","merged_presences","merged_members","read_state","private_channels","user_guild_settings","user_settings","user_settings_proto","experiments","guild_experiments","relationships","users"]),y=[],v=[],O=[],I=[],b=[],m=[],S=[],g=[];i.forEach((function(e){if(!e.unavailable){
var t,n=null!==(t=e.properties)&&void 0!==t?t:{},r=n.features,i=ee(n,["features"]),o=e.threads,a=e.guild_scheduled_events,u=ee(e,["threads","guild_scheduled_events"]);y.push("partial"===e.data_mode?e.partial_updates.channels:e.channels);v.push("partial"===e.data_mode?e.partial_updates.roles:e.roles);O.push("partial"===e.data_mode?e.partial_updates.emojis:e.emojis);I.push(o);b.push("partial"===e.data_mode?e.partial_updates.stickers:e.stickers);m.push(r);S.push(a);g.push(u,i)}}));return{presences_size:JSON.stringify(null!==(t=null==o?void 0:o.friends)&&void 0!==t?t:[]).length,users_size:JSON.stringify(h).length,read_states_size:JSON.stringify(u).length,private_channels_size:JSON.stringify(c).length,user_settings_size:JSON.stringify(null!=l?l:"").length+(null!=f?f:"").length,experiments_size:JSON.stringify(null!=d?d:[]).length+JSON.stringify(null!=p?p:[]).length,user_guild_settings_size:JSON.stringify(s).length,relationships_size:JSON.stringify(_).length,
remaining_data_size:JSON.stringify(null!=E?E:{}).length,guild_channels_size:JSON.stringify(y).length,guild_members_size:JSON.stringify(null!=a?a:[]).length,guild_presences_size:JSON.stringify(null!==(n=null==o?void 0:o.guilds)&&void 0!==n?n:[]).length,guild_roles_size:JSON.stringify(v).length,guild_emojis_size:JSON.stringify(O).length,guild_threads_size:JSON.stringify(I).length,guild_stickers_size:JSON.stringify(b).length,guild_events_size:JSON.stringify(S).length,guild_features_size:JSON.stringify(m).length,guild_remaining_data_size:JSON.stringify(g).length,size_metrics_duration_ms:Date.now()-r}}(e);this._handleGenericDispatch(e,"READY");var c,s,l,f=function(e){var t=e._trace,n={};try{var r=JSON.parse(t);null!=r[0]&&""!==r[0]&&r[0].startsWith("gateway-")&&(n.identify_total_server_duration_ms=Math.floor(r[1].micros/1e3));ve(r,(function(e,t){"start_session"===e?n.identify_api_duration_ms=Math.floor(t/1e3):"guilds_connect"===e&&(n.identify_guilds_duration_ms=Math.floor(t/1e3))}))
}catch(e){}return n}(e);v.Z.addDetail("payload_size(kb)",Math.round(t.uncompressed_byte_size/1024));v.Z.addDetail("server_time(ms)",null!==(c=f.identify_total_server_duration_ms)&&void 0!==c?c:0);var d=X($({},t,f,function(e){var t=e.guilds,n=0,r=0;t.forEach((function(e){if(!e.unavailable){var t="partial"===e.data_mode?e.partial_updates.channels:e.channels;null!=t&&null!=t.forEach&&t.forEach((function(e){r++;e.type===W.d4z.GUILD_CATEGORY&&n++}))}}));return{num_guilds:t.length,num_guild_channels:r,num_guild_category_channels:n}}(e),u),{duration_ms_since_identify_start:n-this.identifyStartTime,duration_ms_since_connection_start:n-this.connectionStartTime,duration_ms_since_emit_start:Date.now()-n,is_reconnect:this.hasConnectedOnce,is_fast_connect:this.isFastConnect,did_force_clear_guild_hashes:this.didForceClearGuildHashes,identify_uncompressed_byte_size:this.identifyUncompressedByteSize,identify_compressed_byte_size:this.identifyCompressedByteSize,
had_cache_at_startup:null!==(s=this.analytics.hadCacheAtStartup)&&void 0!==s&&s,used_cache_at_startup:null!==(l=this.analytics.usedCacheAtStartup)&&void 0!==l&&l});I.Z.attachReadyPayloadProperties(d);T.default.track(W.rMx.READY_PAYLOAD_RECEIVED,d,{logEventProperties:!0});this.didForceClearGuildHashes=!1;this.hasConnectedOnce=!0;this.setResumeUrl(e.resume_gateway_url)};r._handleGenericDispatch=function(e,t){m.default.isLoggingGatewayEvents&&oe.verbose("<~",t,e);try{this.emit("dispatch",t,e)}catch(e){this.resetSocketOnError(e)}};r._handleHeartbeatAck=function(e){this.lastHeartbeatAckTime=Date.now();this.heartbeatAck=!0;if(null!==this.expeditedHeartbeatTimeout){clearTimeout(this.expeditedHeartbeatTimeout);this.expeditedHeartbeatTimeout=null;oe.info("Expedited heartbeat succeeded")}};r._handleHeartbeatTimeout=function(){var e=this;this._cleanup((function(e){return e.close(4e3)}));this.connectionState=le.WILL_RECONNECT;var t=this.gatewayBackoff.fail((function(){return e._connect()}))
;oe.warn("[ACK TIMEOUT] reconnecting in ".concat((t/1e3).toFixed(2)," seconds."))};r._handleClose=function(e,t,n){var r=this;e=e||!1;this._cleanup();this.emit("close",{code:t,reason:n});if(t===fe){this.connectionState=le.CLOSED;oe.warn("[WS CLOSED] because of authentication failure, marking as closed.");return this._reset(e,t,n)}this.connectionState=le.WILL_RECONNECT;if(this.nextReconnectIsImmediate){oe.warn("[WS CLOSED] (".concat(e.toString(),", ").concat(t,", ").concat(n,") retrying immediately."));this._connect()}else{var i=this.gatewayBackoff.fail((function(){return r._connect()}));oe.warn("[WS CLOSED] (".concat(e.toString(),", ").concat(t,", ").concat(n,") retrying in ").concat((i/1e3).toFixed(2)," seconds."));this.gatewayBackoff.fails>4&&this._reset(e,t,n)}};r._reset=function(e,t,n){this.sessionId=null;this.seq=0;oe.warn("[RESET] (".concat(e.toString(),", ").concat(t,", ").concat(n,")"));this.emit("disconnect",{wasClean:e,code:t,reason:n})};r._startHeartbeater=function(){
var e=this,t=this.heartbeatInterval;h()(null!=t,"GatewaySocket: Heartbeat interval should never null here.");null!==this.initialHeartbeatTimeout&&clearTimeout(this.initialHeartbeatTimeout);if(null!==this.heartbeater){clearInterval(this.heartbeater);this.heartbeater=null}var n=function(){if(e.heartbeatAck){e.heartbeatAck=!1;e._sendHeartbeat()}else null===e.expeditedHeartbeatTimeout&&e._handleHeartbeatTimeout()};this.initialHeartbeatTimeout=setTimeout((function(){e.initialHeartbeatTimeout=null;e.heartbeatAck=!0;e.heartbeater=setInterval(n,t);n()}),Math.floor(Math.random()*t))};r._stopHeartbeater=function(){if(null!==this.heartbeater){clearInterval(this.heartbeater);this.heartbeater=null}if(null!==this.initialHeartbeatTimeout){clearTimeout(this.initialHeartbeatTimeout);this.initialHeartbeatTimeout=null}if(null!==this.expeditedHeartbeatTimeout){clearTimeout(this.expeditedHeartbeatTimeout);this.expeditedHeartbeatTimeout=null}};r._clearHelloTimeout=function(){if(null!=this.helloTimeout){
clearTimeout(this.helloTimeout);this.helloTimeout=null}};r._cleanup=function(e){o.ZP.Emitter.resume();this._stopHeartbeater();this._clearHelloTimeout();var t=this.webSocket;this.webSocket=null;if(null!=t){t.onopen=ce;t.onmessage=ce;t.onerror=ce;t.onclose=ce;null==e||e(t)}this.gatewayBackoff.cancel();this.compressionHandler.close();this.compressionHandler=new x(ae)};r._getConnectionPath=function(e){try{var t,n=null==(r=null===(t=e._trace)||void 0===t?void 0:t[0])?null:ye(JSON.parse(r),"");if(null!=n)return n}catch(e){}var r;return null!=e._trace?e._trace.join(" -> "):"???"};r._doResume=function(){this.connectionState=le.RESUMING;this.resumeAnalytics=_e(Date.now()-this.connectionStartTime);var e;oe.info("[RESUME] resuming session ".concat(null!==(e=this.sessionId)&&void 0!==e?e:"",", seq: ").concat(this.seq));this.send(se.RESUME,{token:this.token,session_id:this.sessionId,seq:this.seq},!1)};r._doIdentify=function(){this.seq=0;this.sessionId=null;var e=this.handleIdentify();if(null!==e){
this.connectionState=le.IDENTIFYING;this.identifyStartTime=Date.now();var t=e.token,n=e.properties,r=void 0===n?{}:n,i=e.presence;this.token=t;oe.info("[IDENTIFY]");var o,a={token:t,capabilities:4093,properties:r,presence:i,compress:this.compressionHandler.usesLegacyCompression(),client_state:(o=b.Z.getClientState(),{guild_versions:o.knownGuildVersions,highest_last_message_id:o.highestLastMessageId,read_state_version:o.readStateVersion,user_guild_settings_version:o.userGuildSettingsVersion,user_settings_version:o.userSettingsVersion,private_channels_version:o.privateChannelsVersion,api_code_version:o.apiCodeVersion})},u=JSON.stringify(a);this.identifyUncompressedByteSize=u.length;this.identifyCompressedByteSize=E.deflate(u).length;this.send(se.IDENTIFY,a,!1)}else this._handleClose(!0,fe,"No connection info provided")};r._doFastConnectIdentify=function(){this.seq=0;this.sessionId=null;var e=this.handleIdentify();if(null!==e){var t=e.token;this.token=t;this.connectionState=le.IDENTIFYING
;this.identifyStartTime=Date.now();oe.info("[IDENTIFY, fast-connect]");this._updateLastHeartbeatAckTime()}else this._handleClose(!0,fe,"No connection info provided")};r._doResumeOrIdentify=function(){var e=Date.now();null!==this.sessionId&&(null==this.lastHeartbeatAckTime||e-this.lastHeartbeatAckTime<=18e4)?this._doResume():this._doIdentify();this._updateLastHeartbeatAckTime()};r._updateLastHeartbeatAckTime=function(){this.lastHeartbeatAckTime=Date.now()};r._sendHeartbeat=function(){this.send(se.HEARTBEAT,this.seq,!1)};r.getLogger=function(){return oe};r.willReconnect=function(){return this.connectionState===le.WILL_RECONNECT};r.isClosed=function(){return this.connectionState===le.CLOSED};r.isSessionEstablished=function(){return this.connectionState===le.SESSION_ESTABLISHED||this.connectionState===le.RESUMING};r.isConnected=function(){return this.connectionState===le.IDENTIFYING||this.connectionState===le.RESUMING||this.connectionState===le.SESSION_ESTABLISHED};r.connect=function(){
var e=this;if(!this.isClosed()){oe.error("Cannot start a new connection, connection state is not closed");return!1}this.connectionState=le.WILL_RECONNECT;setImmediate((function(){return e._connect()}));return!0};r.resetSocketOnError=function(e){var t=this;oe.error(e);(!e.message||e.message.indexOf("Guild data was missing from store")<0)&&N.Z.captureException(e);this._cleanup((function(e){return e.close()}));this._reset(!0,1e3,"Resetting socket due to error.");this.connectionState=le.WILL_RECONNECT;this.dispatchExceptionBackoff.cancel();this.dispatchExceptionBackoff.fail((function(){return t._connect()}));this.didForceClearGuildHashes=!0;a.Z.dispatch({type:"CLEAR_GUILD_CACHE"});clearTimeout(this.dispatchSuccessTimer);this.dispatchSuccessTimer=setTimeout((function(){return t.dispatchExceptionBackoff.succeed()}),12e4)};r.close=function(){var e=this;if(this.isClosed())oe.info("close() called, but socket is already closed.");else{
oe.info("Closing connection, current state is ".concat(this.connectionState));this._cleanup((function(e){return e.close()}));this.connectionState=le.CLOSED;setImmediate((function(){e._reset(!0,1e3,"Disconnect requested by user")}))}};r.expeditedHeartbeat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;if(!this.isClosed())if(this.isConnected()){oe.info("Performing an expedited heartbeat ".concat(null!=t&&""!==t?"reason: "+t:""));this.heartbeatAck=!1;this._sendHeartbeat();null!==this.expeditedHeartbeatTimeout&&clearTimeout(this.expeditedHeartbeatTimeout);this.expeditedHeartbeatTimeout=setTimeout((function(){r.expeditedHeartbeatTimeout=null;!1===r.heartbeatAck&&r._handleHeartbeatTimeout()}),e)
}else n?this.resetBackoff(t):oe.info("Expedited heartbeat requested, but, connection state is ".concat(this.connectionState," and reconnectImmediately was not requested ").concat(null!=t&&""!==t?"reason: "+t:""))};r.resetBackoff=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";oe.info("Connection has reset backoff".concat(null!=e&&""!==e?" for reason: "+e:""));this.gatewayBackoff.succeed();this.nextReconnectIsImmediate=!0;this._connect()};r.presenceUpdate=function(e,t,n,r){this.send(se.PRESENCE_UPDATE,{status:e,since:t,activities:n,afk:r})};r.voiceStateUpdate=function(e){var t=e.guildId,n=void 0===t?null:t,r=e.channelId,i=void 0===r?null:r,o=e.selfMute,a=void 0!==o&&o,u=e.selfDeaf,c=void 0!==u&&u,s=e.selfVideo,l=void 0!==s&&s,f=e.preferredRegion,d=void 0===f?null:f,p=e.videoStreamParameters,_=void 0===p?null:p,h={guild_id:n,channel_id:i,self_mute:a,self_deaf:c,self_video:l};null!=i&&S.Z.shouldIncludePreferredRegion()&&(h.preferred_region=d)
;null!=_&&(h.tracks=null==_?void 0:_.map((function(e){return{type:e.type,rid:e.rid,quality:e.quality}})));this.send(se.VOICE_STATE_UPDATE,h)};r.voiceServerPing=function(){this.send(se.VOICE_SERVER_PING,null)};r.embeddedActivityClose=function(e,t,n){this.send(se.EMBEDDED_ACTIVITY_CLOSE,{guild_id:e,channel_id:t,application_id:n})};r.requestGuildMembers=function(e,t){var n=t.query,r=t.limit,i=t.userIds,o=t.presences;this.send(se.REQUEST_GUILD_MEMBERS,{guild_id:e,query:n,limit:r,user_ids:i,presences:o})};r.updateGuildSubscriptions=function(e,t){this.send(se.GUILD_SUBSCRIPTIONS,$({guild_id:e},t))};r.callConnect=function(e){this.send(se.CALL_CONNECT,{channel_id:e})};r.lobbyConnect=function(e,t){this.send(se.LOBBY_CONNECT,{lobby_id:e,lobby_secret:t})};r.lobbyDisconnect=function(e){this.send(se.LOBBY_DISCONNECT,{lobby_id:e})};r.lobbyVoiceStatesUpdate=function(e){this.send(se.LOBBY_VOICE_STATES_UPDATE,e.map((function(e){return{lobby_id:e.lobbyId,self_mute:e.selfMute,self_deaf:e.selfDeaf}})))}
;r.streamCreate=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.send(se.STREAM_CREATE,{type:e,guild_id:t,channel_id:n,preferred_region:r})};r.streamWatch=function(e){this.send(se.STREAM_WATCH,{stream_key:e})};r.streamPing=function(e){this.send(se.STREAM_PING,{stream_key:e})};r.streamDelete=function(e){this.send(se.STREAM_DELETE,{stream_key:e})};r.streamSetPaused=function(e,t){this.send(se.STREAM_SET_PAUSED,{stream_key:e,paused:t})};r.requestForumUnreads=function(e,t,n){this.send(se.REQUEST_FORUM_UNREADS,{guild_id:e,channel_id:t,threads:n.map((function(e){return{thread_id:e.threadId,ack_message_id:e.ackMessageId}}))})};r.getDeletedEntityIdsNotMatchingHash=function(e,t,n,r,i){this.send(se.GET_DELETED_ENTITY_IDS_NOT_MATCHING_HASH,{guild_id:e,channel_ids_hash:t,role_ids_hash:n,emoji_ids_hash:r,sticker_ids_hash:i})};r.remoteCommand=function(e,t){this.send(se.REMOTE_COMMAND,{target_session_id:e,payload:t})};return n}(p());function ye(e,t){
if(null==e)return"";for(var n="",r=0;r<e.length;r+=2){n+="\n".concat(t).concat(e[r],": ").concat(e[r+1].micros/1e3);n+=ye(e[r+1].calls,t+"|  ")}return n}function ve(e,t){if(null!=e&&e.length>0)for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t(r,i.micros);ve(i.calls,t)}}var Oe=n(110251),Ie=n.n(Oe);function be(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){be(e,t,n[t])}))}return e}var Se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.dirty=!1;this.state=this.getInitialState()}var t=e.prototype;t.shouldCommit=function(){return!0}
;t.setState=function(e){this.state=me({},this.state,e)};t.getState=function(){return this.state};t.reset=function(){this.dirty=!1;this.state=this.getInitialState()};t.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getNextState(me({},this.state,e));if(t)this.dirty=!Ie()(n,this.getInitialState());else{var r=!0,i=!1,o=void 0;try{for(var a,u=Object.keys(n)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;this.dirty=this.dirty||!Ie()(this.state[c],n[c])}}catch(e){i=!0;o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}this.state=n;if(this.dirty&&this.shouldCommit()){this.dirty=!1;this.didCommit(this.state);return!0}return!1};t.forceUpdate=function(){this.dirty=!1;this.didCommit(this.state)};return e}();function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e){return function(e){
if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t,n){var r,i=[],o=function(){for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];var s=Date.now();if(null!=r){clearTimeout(r);r=null}for(;i.length>0&&i[0]<=s;)i.shift();if(i.length<e){i.push(s+t);n.apply(void 0,Te(u))}else r=setTimeout((function(){return o.apply(void 0,Te(u))}),i[0]-s)};return o}
var Ne=n(997163),Ce=n(575698),Pe=n(368351),Re=n(53551),De=n(425600),we=n(58857),Le=n(449555),Ue=n(998268),ke=n(876679),Me=n(356004),Ze=n(392115),je=n(653772),Ge=n(718375),Ve=n(689928);function Be(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Be(e,t,n[t])}))}return e}function Fe(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n
}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function He(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}var Ye={};function ze(e){var t=e.users,n=e.relationships,r=e.private_channels,o=e.merged_members,a=e.guilds,u=He(e,["users","relationships","private_channels","merged_members","guilds"]);!function(){qe={};var e=Object.values(je.Z.getGuilds()),t=Ze.Z.getGuilds(),n=ke.Z.getAllGuildStickers(),r=Ge.ZP.getReadStatesByChannel(),i=!0,o=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s,l,f,d=u.value;qe[d.id]={properties:Ve.tK(d),roles:d.roles,
emojis:null!==(l=null===(s=t[d.id])||void 0===s?void 0:s.rawEmojis)&&void 0!==l?l:[],stickers:null!==(f=n.get(d.id))&&void 0!==f?f:[],channels:Qe(d.id),readStates:r}}}catch(e){o=!0;a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}();var c=Ke(Ye=i().keyBy(t,(function(e){return e.id})),n);null==r||r.forEach((function(e){var t=e.recipient_ids;null!=t&&(e.recipients=t.map((function(e){h()(null!=Ye[e],"Missing user in compressed ready payload");return Ye[e]})));delete e.recipient_ids}));var s=null==a?void 0:a.map((function(e,t){if(!0===e.unavailable)return e;e.members=Ke(Ye,null==o?void 0:o[t]);return function(e){var t,n,r,i,o,a=We(e.id);if("partial"!==e.data_mode){var u,c;return{id:e.id,dataMode:e.data_mode,application_command_counts:e.application_command_counts,emojis:e.emojis,guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,member_count:e.member_count,members:e.members,premium_subscription_count:e.premium_subscription_count,
properties:e.properties,roles:e.roles,stage_instances:e.stage_instances,stickers:e.stickers,threads:null!==(c=null===(u=e.threads)||void 0===u?void 0:u.map((function(t){return(0,Re.q_)(t,e.id)})))&&void 0!==c?c:[],newChannels:e.channels.map((function(t){t.guild_id=e.id;return(0,Re.q_)(t,e.id)})),deletedChannelIds:[],version:e.version}}if(null==a)throw Error("Guild data was missing from store, but hash was still available.");return{id:e.id,dataMode:e.data_mode,application_command_counts:e.application_command_counts,newChannels:(null!==(n=e.partial_updates.channels)&&void 0!==n?n:[]).map((function(t){return(0,Re.q_)(t,e.id)})),deletedChannelIds:null!==(r=e.partial_updates.deleted_channel_ids)&&void 0!==r?r:[],channelUpdates:e.channel_updates,emojis:$e(a.emojis,e.partial_updates.emojis,e.partial_updates.deleted_emoji_ids),guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,member_count:e.member_count,members:e.members,
premium_subscription_count:e.premium_subscription_count,properties:null!==(i=e.properties)&&void 0!==i?i:a.properties,roles:Xe(e.id,a.roles,e.partial_updates.roles,e.partial_updates.deleted_role_ids),stage_instances:e.stage_instances,stickers:$e(a.stickers,e.partial_updates.stickers,e.partial_updates.deleted_sticker_ids),unableToSyncDeletes:e.unable_to_sync_deletes,threads:null!==(o=null===(t=e.threads)||void 0===t?void 0:t.map((function(t){return(0,Re.q_)(t,e.id)})))&&void 0!==o?o:[],version:e.version}}(e)}));return Fe(xe({},u),{users:t,presences:[],relationships:c,guilds:null!=s?s:[],private_channels:null!=r?r:[]})}function Ke(e,t){var n=[];null==t||t.forEach((function(t){if(null!=t){var r=t.user_id;if(null!=r){h()(null!=e[r],"Missing user[".concat(r,"] in compressed ready payload"));t.user=e[r]}delete t.user_id;n.push(t)}}));return n}var qe={};function We(e){var t=qe[e];delete qe[e];return t}function Qe(e){var t=Me.Z.getCachedChannelJsonForGuild(e);return null!=t?{state:"json",
cachedGuildChannelsJson:t}:{state:"restored",channels:Me.Z.getMutableGuildChannelsForGuild(e)}}function Je(e,t){if("partial"!==t.data_mode)return t.channels.map((function(e){return(0,Re.q_)(e,t.id)}));var n,r;if("json"===e.channels.state){var i=JSON.parse(e.channels.cachedGuildChannelsJson);(0,Ue.Z)(i);n=i.map(Re._H)}else n=Object.values(e.channels.channels);var o,a=new Set(null!==(r=t.partial_updates.deleted_channel_ids)&&void 0!==r?r:[]);return n.filter((function(e){return!a.has(e.id)})).concat((null!==(o=t.partial_updates.channels)&&void 0!==o?o:[]).map((function(e){return(0,Re.q_)(e)})))}function $e(e,t,n){t=null!=t?t:[];var r=new Set((null!=n?n:[]).concat(t.map((function(e){return e.id}))));return e.filter((function(e){return!r.has(e.id)})).concat(t)}function Xe(e,t,n,r){var i=!1;if(null!=r){var o=!0,a=!1,u=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){delete t[c.value];i=!0}}catch(e){a=!0;u=e}finally{try{o||null==s.return||s.return()}finally{
if(a)throw u}}}if(null!=n&&n.length>0){var l=!0,f=!1,d=void 0;try{for(var p,_=n[Symbol.iterator]();!(l=(p=_.next()).done);l=!0){var h=p.value;t[h.id]=Ve.CL(h)}}catch(e){f=!0;d=e}finally{try{l||null==_.return||_.return()}finally{if(f)throw d}}i=!0}return i?Ve.iw(e,Object.values(t)):t}var et=n(631134),tt=n(464623),nt=n(212218),rt=n(212033),it=n(403872),ot=n(934714),at=n(379822),ut=n(979662),ct=n(74922),st=n(882687),lt=n(916957);function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function ht(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n;return e}function Et(e,t,n){Et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}};return Et(e,t,n||e)}function yt(e){yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return yt(e)}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&mt(e,t)}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){ht(e,t,n[t])}))}return e}function It(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function bt(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?dt(e):t}function mt(e,t){mt=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return mt(e,t)}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}
}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gt=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=yt(e);if(t){var i=yt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments)
;return bt(this,n)}}var At=new O.Z("ConnectionStore");function Nt(e,t,n){var r=n.roles,o=n.nick,a=n.avatar,u=n.flags,c=n.premium_since,s=n.pending,l=n.joined_at,f=n.communication_disabled_until,d=nt.ZP.getMember(e,t.id);null!=d&&d.nick===o&&d.avatar===a&&i().isEqual(d.roles,r)&&d.premiumSince===c&&d.isPending===s&&d.joinedAt===l&&d.communicationDisabledUntil===f&&d.flags===u||Vt({type:"GUILD_MEMBER_ADD",guildId:e,user:t,roles:r,nick:o,avatar:a,premiumSince:c,isPending:s,joinedAt:l,communicationDisabledUntil:f,flags:u})}function Ct(e){var t=e.member,n=e.mentions,r=e.author,i=e.guild_id;null!=t&&Nt(i,r,t);null!=n&&n.forEach((function(e){if(null!=e.member){var t=e.member;delete e.member;Nt(i,e,t)}}))}var Pt=function(e){vt(n,e);var t=Tt(n);function n(){pt(this,n);var e;(e=t.apply(this,arguments)).switchingAccounts=!1;e.didCommit=Ae(5,2e4,e.emitPresenceUpdate.bind(dt(e)));return e}var r=n.prototype;r.getInitialState=function(){return ut.Z.getLocalPresence()};r.getNextState=function(){
return ut.Z.getLocalPresence()};r.shouldCommit=function(){return Zt.isSessionEstablished()};r.emitPresenceUpdate=function(e){var t=e.status,n=e.since,r=e.activities,i=e.afk;Zt.presenceUpdate(t,n,r,i)};r.handleConnectionOpen=function(){var e=!this.switchingAccounts;this.update({},e);this.switchingAccounts=!1};r.handleAccountSwitch=function(){this.switchingAccounts=!0;this.reset();this.emitPresenceUpdate(this.getState())};return n}(Se),Rt=function(e){vt(n,e);var t=Tt(n);function n(){pt(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getInitialState=function(){return{guildId:null,channelId:null,selfMute:ot.Z.isSelfMute(),selfDeaf:ot.Z.isSelfDeaf(),selfVideo:ot.Z.isVideoEnabled(),preferredRegion:null,videoStreamParameters:null}};r.getNextState=function(e){return{guildId:e.guildId,channelId:e.channelId,selfMute:ot.Z.isSelfMute(),selfDeaf:ot.Z.isSelfDeaf(),selfVideo:ot.Z.isVideoEnabled(),preferredRegion:S.Z.getPreferredRegion(),videoStreamParameters:ot.Z.getVideoStreamParameters()
}};r.shouldCommit=function(){return Zt.isSessionEstablished()};r.didCommit=function(e){var t,n=e.guildId,r=e.channelId,i=e.selfMute,o=e.selfDeaf,a=e.selfVideo,u=e.preferredRegion,c=e.videoStreamParameters;a&&(null===(t=Me.Z.getChannel(r))||void 0===t?void 0:t.type)===W.d4z.GUILD_STAGE_VOICE?Zt.voiceStateUpdate({guildId:n,channelId:r,selfMute:i,selfDeaf:o,selfVideo:a,preferredRegion:u,videoStreamParameters:c}):Zt.voiceStateUpdate({guildId:n,channelId:r,selfMute:i,selfDeaf:o,selfVideo:a,preferredRegion:u})};!function(e,t,n){t&&_t(e.prototype,t);n&&_t(e,n)}(n,[{key:"guildId",get:function(){return this.getState().guildId}},{key:"channelId",get:function(){return this.getState().channelId}}]);return n}(Se),Dt=function(e){vt(n,e);var t=Tt(n);function n(){pt(this,n);var e;(e=t.apply(this,arguments))._hadLobbyVoiceStates=!1;return e}var r=n.prototype;r.getInitialState=function(){return this.getNextState()};r.getNextState=function(){var e=it.Z.getLobbiesWithVoice()
;e.length>0&&(this._hadLobbyVoiceStates=!0);return{lobbies:e.map((function(e){return{lobbyId:e.id,selfMute:ot.Z.isSelfMute(e.application_id),selfDeaf:ot.Z.isSelfDeaf(e.application_id)}}))}};r.shouldCommit=function(){return this._hadLobbyVoiceStates&&Zt.isSessionEstablished()};r.didCommit=function(e){var t=e.lobbies;Zt.lobbyVoiceStatesUpdate(t)};r.forceUpdate=function(){this._hadLobbyVoiceStates&&Et(yt(n.prototype),"forceUpdate",this).call(this)};return n}(Se),wt=0,Lt=null,Ut=new Pt,kt=new Rt,Mt=new Dt,Zt=new Ee((function(){var e=et.default.getToken();At.log("handleIdentify called",{hasToken:null!=e});return null==e?null:{token:e,properties:T.default.getSuperProperties(),presence:Ut.getState()}}));0;(0,F.nI)()&&f.Z.remotePowerMonitor.on("resume",(function(){Zt.expeditedHeartbeat(5e3,"power monitor resumed")}));we.Z.addOfflineCallback((function(){Zt.expeditedHeartbeat(15e3,"network detected offline.",!1)}));we.Z.addOnlineCallback((function(){
Zt.expeditedHeartbeat(5e3,"network detected online.")}));Zt.on("disconnect",(function(e){Vt({type:"CONNECTION_CLOSED",code:e.code,reason:e.reason})}));Zt.on("close",(function(e){Vt({type:"CONNECTION_INTERRUPTED",code:e.code,reason:e.reason})}));function jt(e){return e.map((function(e){return{sessionId:e.session_id,lastModified:e.last_modified,status:e.status,activities:e.activities,active:!!e.active,clientInfo:e.client_info}}))}function Gt(){Zt.isSessionEstablished()&&it.Z.getPendingLobbies().forEach((function(e){Zt.lobbyConnect(e.id,e.secret)}))}function Vt(e){a.Z.dispatch(e).catch((function(e){return Zt.resetSocketOnError(e)}))}var Bt=function(){function e(t,n){var r=this;pt(this,e);this._timer=null;this._initialization=null;this.action=null;this.shouldFlush=n;this.add=function(e){clearTimeout(r._timer);null==r._initialization&&(r._initialization=Date.now());r.action=t(r.action,e);Date.now()-r._initialization>300?r.flush():r._timer=setTimeout((function(){return r.flush()}),100)}
;e.registerActionDebouncer(this)}var t=e.prototype;t.flush=function(){var e=this.action;this.reset();null!=e&&Vt(e)};t.reset=function(){this._initialization=null;clearTimeout(this._timer);this._timer=null;this.action=null};e.registerActionDebouncer=function(t){e.debouncers.push(t)};e.flushDebouncers=function(t,n){var r=!0,i=!1,o=void 0;try{for(var a,u=e.debouncers[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;null!=c.action&&(null==t||c.shouldFlush(t,n))&&c.flush()}}catch(e){i=!0;o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}};return e}();Bt.debouncers=[];var xt=new Bt((function(e,t){(e=null==e?{type:"CHANNEL_UPDATES",updates:[]}:e).updates.push({channel:(0,Re.q_)(t)});return e}),(function(e){return"CHANNEL_UPDATE"!==e})),Ft=new Bt((function(e,t){(e=null==e?{type:"PRESENCE_UPDATES",updates:[]}:e).updates.push(t);return e}),(function(e){return"PRESENCE_UPDATE"!==e}));function Ht(e,t,n,r,i){Ft.add({guildId:e,user:t,status:n,clientStatus:i,
activities:r})}var Yt=[],zt=null,Kt=33;Zt.on("dispatch",(function(e,t){Yt.push([e,t]);null==zt&&(zt=setTimeout((function(){zt=null;var e=Date.now(),t=Yt.slice();Yt.length=0;try{o.ZP.Emitter.batched((function(){t.forEach((function(e){var t=St(e,2);!function(e,t){Bt.flushDebouncers(e,t);switch(e){case"READY_SUPPLEMENTAL":I.Z.readySupplemental.measure((function(){o.ZP.Emitter.batched((function(){t=I.Z.hydrateReadySupplemental.measure((function(){return function(e){var t=e.guilds,n=e.merged_members,r=e.merged_presences,i=He(e,["guilds","merged_members","merged_presences"]),o=Ke(Ye,null==r?void 0:r.friends),a=null==t?void 0:t.map((function(e,t){var i=Ke(Ye,null==r?void 0:r.guilds[t]),o=Ke(Ye,null==n?void 0:n[t]);return Fe(xe({},e),{unavailable:void 0===e.voice_states,presences:i,members:o})}));Ye={};return Fe(xe({},i),{presences:o,guilds:null!=a?a:[]})}(t)}));var e=function(e){return e.map((function(e){return{user:e.user,status:e.status,clientStatus:e.client_status,activities:e.activities}
}))},n=t.guilds.filter((function(e){return!0!==e.unavailable}));n.forEach((function(t){t.presences=e(t.presences||[])}));var r,i=t.presences?e(t.presences):[],o=(null!==(r=t.lazy_private_channels)&&void 0!==r?r:[]).map((function(e){return(0,Re.q_)(e)}));I.Z.dispatchReadySupplemental.measure((function(){Vt({type:"CONNECTION_OPEN_SUPPLEMENTAL",guilds:n,presences:i,lazyPrivateChannels:o})}));var a=[];n.forEach((function(e){e.voice_states.forEach((function(t){var n;a.push({userId:t.user_id,guildId:e.id,sessionId:t.session_id,channelId:t.channel_id,mute:t.mute,deaf:t.deaf,selfMute:t.self_mute,selfDeaf:t.self_deaf,selfVideo:t.self_video||!1,suppress:t.suppress,selfStream:t.self_stream||!1,requestToSpeakTimestamp:null!==(n=t.request_to_speak_timestamp)&&void 0!==n?n:null})}))}));Vt({type:"VOICE_STATE_UPDATES",voiceStates:a,initial:!0});kt.update();Mt.update({},!0)}))}));setTimeout((function(){return Vt({type:"POST_CONNECTION_OPEN"})}),2e3);break;case"READY":if(t.user.bot){Vt({type:"LOGOUT"})
;return}I.Z.ready.measure((function(){o.ZP.Emitter.batched((function(){var e=(t=I.Z.hydrateReady.measure((function(){return ze(t)}))).private_channels.map((function(e){return(0,Re.q_)(e)})),n=t.guilds.filter((function(e){return e.unavailable})).map((function(e){return e.id})),r=t.guilds.filter((function(e){return!0!==e.unavailable}));r.forEach((function(e){e.presences=[]}));var i=null==t.user_settings_proto?void 0:(0,Pe.ac)(t.user_settings_proto);0;I.Z.dispatchReady.measure((function(){var o;Vt({type:"CONNECTION_OPEN",sessionId:t.session_id,authSessionIdHash:t.auth_session_id_hash,user:t.user,users:t.users,guilds:r,initialPrivateChannels:e,unavailableGuilds:n,readState:t.read_state,userGuildSettings:t.user_guild_settings,tutorial:t.tutorial,relationships:t.relationships,friendSuggestionCount:t.friend_suggestion_count,presences:t.presences,analyticsToken:t.analytics_token,experiments:t.experiments,connectedAccounts:t.connected_accounts,guildExperiments:t.guild_experiments,
requiredAction:t.required_action,consents:t.consents,sessions:jt(t.sessions||[]),pendingPayments:t.pending_payments,countryCode:null!==(o=t.country_code)&&void 0!==o?o:void 0,guildJoinRequests:t.guild_join_requests||[],userSettingsProto:i,apiCodeVersion:t.api_code_version})}));null!=t.auth_token&&Vt({type:"UPDATE_TOKEN",token:t.auth_token,userId:t.user.id});Ut.update();kt.update();Mt.update();Gt()}))}));break;case"RESUMED":Ut.forceUpdate();kt.forceUpdate();Mt.forceUpdate();Gt();Vt({type:"CONNECTION_RESUMED"});break;case"TYPING_START":null!=t.member&&Nt(t.guild_id,t.member.user,t.member);Vt({type:"TYPING_START",channelId:t.channel_id,userId:t.user_id});break;case"ACTIVITY_START":Vt({type:"ACTIVITY_START",userId:t.user_id,activity:t.activity});break;case"ACTIVITY_USER_ACTION":Vt({type:"ACTIVITY_USER_ACTION",actionType:t.action_type,user:t.user,applicationId:t.application_id,channelId:t.channel_id,messageId:t.message_id});break;case"MESSAGE_CREATE":Ct(t);null!=t.author&&Vt({
type:"MESSAGE_CREATE",channelId:t.channel_id,message:t,optimistic:!1,isPushNotification:!1});break;case"MESSAGE_UPDATE":Ct(t);Vt({type:"MESSAGE_UPDATE",message:t});break;case"MESSAGE_DELETE":Vt({type:"MESSAGE_DELETE",id:t.id,channelId:t.channel_id});break;case"MESSAGE_DELETE_BULK":Vt({type:"MESSAGE_DELETE_BULK",ids:t.ids,channelId:t.channel_id});break;case"MESSAGE_ACK":Vt({type:"MESSAGE_ACK",channelId:t.channel_id,messageId:t.message_id,manual:t.manual,newMentionCount:t.mention_count,version:t.version});break;case"GUILD_FEATURE_ACK":Vt({type:"GUILD_FEATURE_ACK",id:t.resource_id,ackType:t.ack_type,ackedId:t.entity_id});break;case"USER_NON_CHANNEL_ACK":Vt({type:"USER_NON_CHANNEL_ACK",ackType:t.ack_type,ackedId:t.entity_id});break;case"CHANNEL_PINS_ACK":Vt({type:"CHANNEL_PINS_ACK",channelId:t.channel_id,timestamp:t.timestamp,version:t.version});break;case"CHANNEL_PINS_UPDATE":Vt({type:"CHANNEL_PINS_UPDATE",channelId:t.channel_id,lastPinTimestamp:t.last_pin_timestamp});break
;case"CHANNEL_CREATE":case"CHANNEL_DELETE":Vt({type:e,channel:(0,Re.q_)(t)});break;case"CHANNEL_UPDATE":xt.add(t);break;case"THREAD_CREATE":case"THREAD_UPDATE":case"THREAD_DELETE":var n=t.newly_created,r=It(t,["newly_created"]);Vt({type:e,isNewlyCreated:n,channel:(0,Re.q_)(r)});break;case"THREAD_LIST_SYNC":Vt({type:"THREAD_LIST_SYNC",guildId:t.guild_id,threads:t.threads.map((function(e){var t=Me.Z.getChannel(e.parent_id);if(null!=t){e.nsfw=t.nsfw;e.parentChannelThreadType=t.type}return(0,Re.q_)(e)})),mostRecentMessages:t.most_recent_messages,members:t.members?i().map(t.members,Ce.Z):void 0,channelIds:t.channel_ids});break;case"THREAD_MEMBER_UPDATE":Vt({type:"THREAD_MEMBER_UPDATE",id:t.id,guildId:t.guild_id,userId:t.user_id,flags:t.flags,muted:t.muted,muteConfig:t.mute_config,joinTimestamp:t.join_timestamp});break;case"THREAD_MEMBERS_UPDATE":var a;Vt({type:"THREAD_MEMBERS_UPDATE",id:t.id,guildId:t.guild_id,memberCount:t.member_count,
addedMembers:null===(a=t.added_members)||void 0===a?void 0:a.map((function(e){return{id:e.id,guildId:t.guild_id,userId:e.user_id,flags:e.flags,joinTimestamp:e.join_timestamp}})),removedMemberIds:t.removed_member_ids,memberIdsPreview:t.member_ids_preview});break;case"FORUM_UNREADS":if(t.permission_denied)break;Vt({type:"FORUM_UNREADS",channelId:t.channel_id,threads:t.threads.map((function(e){return{threadId:e.thread_id,missing:e.missing,count:e.count}}))});break;case"CHANNEL_RECIPIENT_ADD":case"CHANNEL_RECIPIENT_REMOVE":Vt({type:e,channelId:t.channel_id,user:t.user,nick:t.nick});break;case"GUILD_CREATE":if(t.unavailable)Vt({type:"GUILD_UNAVAILABLE",guildId:t.id});else{var f,d=function(e){var t,n,r,i=We(e.id);if("partial"!==e.data_mode){var o,a;return{id:e.id,application_command_counts:e.application_command_counts,emojis:e.emojis,guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,member_count:e.member_count,members:e.members,
premium_subscription_count:e.premium_subscription_count,properties:e.properties,roles:e.roles,stage_instances:e.stage_instances,stickers:e.stickers,threads:null!==(a=null===(o=e.threads)||void 0===o?void 0:o.map((function(t){return(0,Re.q_)(t,e.id)})))&&void 0!==a?a:[],channels:e.channels.map((function(t){t.guild_id=e.id;return(0,Re.q_)(t,e.id)})),presences:e.presences,embedded_activities:e.embedded_activities,voice_states:e.voice_states,version:e.version}}if(null==i)throw Error("Guild data was missing from store, but hash was still available.");return{id:e.id,application_command_counts:e.application_command_counts,channels:Je(i,e),embedded_activities:e.embedded_activities,emojis:$e(i.emojis,e.partial_updates.emojis,e.partial_updates.deleted_emoji_ids),guild_scheduled_events:e.guild_scheduled_events,joined_at:e.joined_at,member_count:e.member_count,members:e.members,premium_subscription_count:e.premium_subscription_count,presences:e.presences,
properties:null!==(n=e.properties)&&void 0!==n?n:i.properties,roles:Xe(e.id,i.roles,e.partial_updates.roles,e.partial_updates.deleted_role_ids),stage_instances:e.stage_instances,stickers:$e(i.stickers,e.partial_updates.stickers,e.partial_updates.deleted_sticker_ids),unableToSyncDeletes:e.unable_to_sync_deletes,threads:null!==(r=null===(t=e.threads)||void 0===t?void 0:t.map((function(t){return(0,Re.q_)(t,e.id)})))&&void 0!==r?r:[],voice_states:e.voice_states,version:e.version}}(t);c.Z.createGuild(d);Vt({type:"VOICE_STATE_UPDATES",voiceStates:d.voice_states.map((function(e){return{userId:e.user_id,guildId:d.id,sessionId:e.session_id,channelId:e.channel_id,mute:e.mute,deaf:e.deaf,selfMute:e.self_mute,selfDeaf:e.self_deaf,selfVideo:e.self_video||!1,suppress:e.suppress,selfStream:e.self_stream||!1,requestToSpeakTimestamp:null!==(f=e.request_to_speak_timestamp)&&void 0!==f?f:null}}))})}break;case"GUILD_UPDATE":Vt({type:"GUILD_UPDATE",guild:t});t.unavailable&&Vt({type:"GUILD_UNAVAILABLE",
guildId:t.id});break;case"GUILD_DELETE":Vt({type:"GUILD_DELETE",guild:t});t.unavailable&&Vt({type:"GUILD_UNAVAILABLE",guildId:t.id});break;case"GUILD_MEMBERS_CHUNK":o.ZP.Emitter.batched((function(){Vt({type:"GUILD_MEMBERS_CHUNK",guildId:t.guild_id,members:t.members,notFound:t.not_found});null!=t.presences&&t.presences.forEach((function(e){var n=e.user,r=e.status,i=e.client_status,o=e.activities;return Ht(t.guild_id,n,r,o,i)}));Bt.flushDebouncers()}));break;case"THREAD_MEMBER_LIST_UPDATE":o.ZP.Emitter.batched((function(){Vt({type:"THREAD_MEMBER_LIST_UPDATE",guildId:t.guild_id,threadId:t.thread_id,members:t.members});null!=t.presences&&t.presences.forEach((function(e){var n=e.user,r=e.status,i=e.client_status,o=e.activities;return Ht(t.guild_id,n,r,o,i)}));Bt.flushDebouncers()}));break;case"GUILD_BAN_ADD":case"GUILD_BAN_REMOVE":case"GUILD_MEMBER_ADD":case"GUILD_MEMBER_UPDATE":case"GUILD_MEMBER_REMOVE":Vt({type:e,guildId:t.guild_id,user:t.user,avatar:t.avatar,roles:t.roles,nick:t.nick,
premiumSince:t.premium_since,isPending:t.pending,joinedAt:t.joined_at,communicationDisabledUntil:t.communication_disabled_until,flags:t.flags});break;case"GUILD_ROLE_CREATE":case"GUILD_ROLE_UPDATE":Vt({type:e,guildId:t.guild_id,role:t.role});break;case"GUILD_ROLE_DELETE":Vt({type:"GUILD_ROLE_DELETE",guildId:t.guild_id,roleId:t.role_id,version:t.version});break;case"GUILD_EMOJIS_UPDATE":Vt({type:"GUILD_EMOJIS_UPDATE",guildId:t.guild_id,emojis:t.emojis});break;case"GUILD_STICKERS_UPDATE":Vt({type:"GUILD_STICKERS_UPDATE",guildId:t.guild_id,stickers:t.stickers});break;case"GUILD_INTEGRATIONS_UPDATE":Vt({type:"GUILD_INTEGRATIONS_UPDATE",guildId:t.guild_id});break;case"USER_UPDATE":Vt({type:"CURRENT_USER_UPDATE",user:t});break;case"USER_SETTINGS_PROTO_UPDATE":var p=(0,Pe.kI)(t.settings.type,t.settings.proto);if(null==p)break;if("string"==typeof p){console.error("Invalid proto: |".concat(p,"| |").concat(t.settings.proto,"|"));console.error({parsed:p,wire:t.settings.proto,type:t.settings.type
});throw Error("UserSettingsProto must not be a string")}Vt({type:"USER_SETTINGS_PROTO_UPDATE",settings:{proto:p,type:t.settings.type},partial:t.partial});break;case"USER_GUILD_SETTINGS_UPDATE":Vt({type:"USER_GUILD_SETTINGS_FULL_UPDATE",userGuildSettings:[t]});break;case"USER_CONNECTIONS_UPDATE":Vt({type:"USER_CONNECTIONS_UPDATE"});break;case"USER_REQUIRED_ACTION_UPDATE":Vt({type:"USER_REQUIRED_ACTION_UPDATE",requiredAction:t.required_action});break;case"USER_NOTE_UPDATE":Vt(Ot({type:"USER_NOTE_UPDATE"},t));break;case"RELATIONSHIP_ADD":Vt({type:"RELATIONSHIP_ADD",relationship:{id:t.id,type:t.type,user:t.user,since:t.since,nickname:t.nickname},shouldNotify:!0===t.should_notify});break;case"RELATIONSHIP_REMOVE":Vt({type:"RELATIONSHIP_REMOVE",relationship:t});break;case"RELATIONSHIP_UPDATE":Vt({type:"RELATIONSHIP_UPDATE",relationship:t});break;case"PRESENCE_UPDATE":Ht(t.guild_id,t.user,t.status,t.activities,t.client_status);break;case"PRESENCES_REPLACE":Vt({type:"PRESENCES_REPLACE",
presences:t});break;case"SESSIONS_REPLACE":Vt({type:"SESSIONS_REPLACE",sessions:jt(t)});break;case"VOICE_STATE_UPDATE":null!=t.member&&Nt(t.guild_id,t.member.user,t.member);var _;Vt({type:"VOICE_STATE_UPDATES",voiceStates:[{userId:t.user_id,guildId:t.guild_id,sessionId:t.session_id,channelId:t.channel_id,mute:t.mute,deaf:t.deaf,selfMute:t.self_mute,selfDeaf:t.self_deaf,selfVideo:t.self_video||!1,suppress:t.suppress,selfStream:t.self_stream||!1,requestToSpeakTimestamp:null!==(_=t.request_to_speak_timestamp)&&void 0!==_?_:null,oldChannelId:st.Z.getUserVoiceChannelId(t.guild_id,t.user_id)}]});break;case"LOBBY_VOICE_STATE_UPDATE":Vt({type:"LOBBY_VOICE_STATE_UPDATE",userId:t.user_id,lobbyId:t.lobby_id,sessionId:t.session_id,channelId:t.channel_id,mute:t.mute,deaf:t.deaf,selfMute:t.self_mute,selfDeaf:t.self_deaf});break;case"VOICE_SERVER_UPDATE":Vt({type:"VOICE_SERVER_UPDATE",guildId:t.guild_id,channelId:t.channel_id,endpoint:t.endpoint,token:t.token});break;case"LOBBY_VOICE_SERVER_UPDATE":
Vt({type:"LOBBY_VOICE_SERVER_UPDATE",lobbyId:t.lobby_id,endpoint:t.endpoint,token:t.token});break;case"CALL_CREATE":Vt({type:"CALL_CREATE",channelId:t.channel_id,messageId:t.message_id,region:t.region,ringing:t.ringing});var h=t.voice_states;if(null!=h){var E;Vt({type:"VOICE_STATE_UPDATES",voiceStates:h.map((function(e){return{userId:e.user_id,guildId:null,sessionId:e.session_id,channelId:e.channel_id,mute:e.mute,deaf:e.deaf,selfMute:e.self_mute,selfDeaf:e.self_deaf,selfVideo:e.self_video||!1,suppress:e.suppress,selfStream:e.self_stream||!1,requestToSpeakTimestamp:null!==(E=e.request_to_speak_timestamp)&&void 0!==E?E:null}}))})}break;case"CALL_UPDATE":Vt({type:"CALL_UPDATE",channelId:t.channel_id,messageId:t.message_id,region:t.region,ringing:t.ringing});break;case"CALL_DELETE":Vt({type:"CALL_DELETE",channelId:t.channel_id,unavailable:t.unavailable});break;case"OAUTH2_TOKEN_REVOKE":Vt({type:"OAUTH2_TOKEN_REVOKE",accessToken:t.access_token});break;case"RECENT_MENTION_DELETE":Vt({
type:"RECENT_MENTION_DELETE",id:t.message_id});break;case"FRIEND_SUGGESTION_CREATE":Vt({type:"FRIEND_SUGGESTION_CREATE",suggestion:t});break;case"FRIEND_SUGGESTION_DELETE":Vt({type:"FRIEND_SUGGESTION_DELETE",suggestedUserId:t.suggested_user_id});break;case"WEBHOOKS_UPDATE":Vt({type:"WEBHOOKS_UPDATE",guildId:t.guild_id,channelId:t.channel_id});break;case"MESSAGE_REACTION_ADD":case"MESSAGE_REACTION_REMOVE":Vt({type:e,channelId:t.channel_id,messageId:t.message_id,userId:t.user_id,emoji:t.emoji,burst:t.burst,colors:t.burst_colors});break;case"MESSAGE_REACTION_REMOVE_ALL":Vt({type:"MESSAGE_REACTION_REMOVE_ALL",channelId:t.channel_id,messageId:t.message_id});break;case"MESSAGE_REACTION_REMOVE_EMOJI":Vt({type:"MESSAGE_REACTION_REMOVE_EMOJI",channelId:t.channel_id,messageId:t.message_id,emoji:t.emoji});break;case"PAYMENT_UPDATE":Vt({type:"PAYMENT_UPDATE",payment:t});break;case"ENTITLEMENT_CREATE":case"ENTITLEMENT_UPDATE":case"ENTITLEMENT_DELETE":Vt({type:e,entitlement:t});break
;case"USER_PAYMENT_SOURCES_UPDATE":if(rt.Z.hasLayers()){u.tZ();s.Gn(lt.Z.getFetchedSKUIDs())}break;case"USER_SUBSCRIPTIONS_UPDATE":l.k();rt.Z.hasLayers()&&u.jg();break;case"USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_CREATE":Vt({type:"GUILD_BOOST_SLOT_CREATE",guildBoostSlot:De.Z.createFromServer(t)});break;case"USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UPDATE":Vt({type:"GUILD_BOOST_SLOT_UPDATE",guildBoostSlot:De.Z.createFromServer(t)});break;case"BILLING_POPUP_BRIDGE_CALLBACK":Vt({type:"BILLING_POPUP_BRIDGE_CALLBACK",paymentSourceType:t.payment_source_type,state:t.state,path:t.path,query:t.query});break;case"USER_PAYMENT_CLIENT_ADD":(0,Le.L)().then((function(e){var n=t.purchase_token_hash;n===e&&Vt({type:"USER_PAYMENT_CLIENT_ADD",purchaseTokenHash:n,expiresAt:t.expires_at})}));break;case"GUILD_MEMBER_LIST_UPDATE":o.ZP.Emitter.batched((function(){var e=function(e){if(null!=e.member){var n=e.member;Nt(t.guild_id,n.user,n);if(null!=n.presence){var r=n.presence
;Ht(t.guild_id,r.user,r.status,r.activities,r.client_status)}}};t.ops.forEach((function(t){var n=t.op,r=t.items,i=t.item;switch(n){case"SYNC":r.forEach(e);break;case"UPDATE":case"INSERT":e(i)}}));Bt.flushDebouncers();Vt({type:"GUILD_MEMBER_LIST_UPDATE",guildId:t.guild_id,id:t.id,ops:t.ops,groups:t.groups,memberCount:t.member_count})}));break;case"LOBBY_CREATE":Vt({type:"LOBBY_CREATE",lobby:t});t.voice_states.forEach((function(e){Vt({type:"LOBBY_VOICE_STATE_UPDATE",lobbyId:t.id,userId:e.user_id,sessionId:e.session_id,channelId:e.channel_id,mute:e.mute,deaf:e.deaf,selfMute:e.self_mute,selfDeaf:e.self_deaf})}));break;case"LOBBY_UPDATE":Vt({type:"LOBBY_UPDATE",lobby:t});break;case"LOBBY_DELETE":Vt({type:"LOBBY_DELETE",lobbyId:t.id,reason:t.reason});break;case"LOBBY_MEMBER_CONNECT":case"LOBBY_MEMBER_UPDATE":case"LOBBY_MEMBER_DISCONNECT":Vt({type:e,lobbyId:t.lobby_id,member:t.member});break;case"LOBBY_MESSAGE":Vt({type:"LOBBY_MESSAGE",lobbyId:t.lobby_id,senderId:t.sender_id,data:t.data})
;break;case"GIFT_CODE_UPDATE":Vt({type:"GIFT_CODE_UPDATE",uses:t.uses,code:t.code});break;case"GIFT_CODE_CREATE":Vt({type:"GIFT_CODE_CREATE",giftCode:t});break;case"USER_ACHIEVEMENT_UPDATE":Vt({type:"USER_ACHIEVEMENT_UPDATE",userAchievement:t});break;case"LIBRARY_APPLICATION_UPDATE":Vt({type:"LIBRARY_APPLICATION_UPDATE",libraryApplication:t});break;case"STREAM_CREATE":Vt({type:"STREAM_CREATE",streamKey:t.stream_key,region:t.region,viewerIds:t.viewer_ids,rtcServerId:t.rtc_server_id,paused:t.paused});break;case"STREAM_SERVER_UPDATE":Vt({type:"STREAM_SERVER_UPDATE",streamKey:t.stream_key,endpoint:t.endpoint,token:t.token});break;case"STREAM_UPDATE":Vt({type:"STREAM_UPDATE",streamKey:t.stream_key,region:t.region,viewerIds:t.viewer_ids,paused:t.paused});break;case"STREAM_DELETE":Vt({type:"STREAM_DELETE",streamKey:t.stream_key,unavailable:t.unavailable,reason:t.reason});break;case"GENERIC_PUSH_NOTIFICATION_SENT":Vt({type:"GENERIC_PUSH_NOTIFICATION_SENT",title:t.title,body:t.body,
trackingType:t.tracking_type,icon:t.icon,route:t.route,tag:t.tag});break;case"NOTIFICATION_CENTER_ITEM_CREATE":Vt({type:"NOTIFICATION_CENTER_ITEM_CREATE",item:t});break;case"NOTIFICATION_CENTER_ITEM_DELETE":Vt({type:"NOTIFICATION_CENTER_ITEM_DELETE",id:t.id});break;case"NOTIFICATION_CENTER_ITEMS_ACK":Vt({type:"NOTIFICATION_CENTER_ITEMS_ACK",id:t.id,optimistic:!1});break;case"NOTIFICATION_CENTER_ITEM_COMPLETED":Vt({type:"NOTIFICATION_CENTER_ITEM_COMPLETED",item_enum:t.item_enum});break;case"APPLICATION_COMMAND_PERMISSIONS_UPDATE":Vt({type:e,guildId:t.guild_id});break;case"GUILD_APPLICATION_COMMAND_INDEX_UPDATE":Vt({type:"GUILD_APPLICATION_COMMAND_INDEX_UPDATE",guildId:t.guild_id,applicationCommandCounts:t.application_command_counts});break;case"GUILD_JOIN_REQUEST_CREATE":Vt({type:"GUILD_JOIN_REQUEST_CREATE",request:t.request,status:t.status,guildId:t.guild_id});break;case"GUILD_JOIN_REQUEST_UPDATE":Vt({type:"GUILD_JOIN_REQUEST_UPDATE",request:t.request,status:t.status,guildId:t.guild_id
});break;case"GUILD_JOIN_REQUEST_DELETE":Vt({type:"GUILD_JOIN_REQUEST_DELETE",id:t.id,userId:t.user_id,guildId:t.guild_id});break;case"INTERACTION_CREATE":Vt({type:"INTERACTION_CREATE",interactionId:t.id,nonce:t.nonce});break;case"INTERACTION_SUCCESS":Vt({type:"INTERACTION_SUCCESS",interactionId:t.id,nonce:t.nonce});break;case"INTERACTION_FAILURE":Vt({type:"INTERACTION_FAILURE",nonce:t.nonce});break;case"APPLICATION_COMMAND_AUTOCOMPLETE_RESPONSE":Vt({type:"APPLICATION_COMMAND_AUTOCOMPLETE_RESPONSE",choices:t.choices,nonce:t.nonce});break;case"INTERACTION_MODAL_CREATE":Vt({type:"INTERACTION_MODAL_CREATE",id:t.id,channelId:t.channel_id,customId:t.custom_id,application:t.application,title:t.title,components:t.components,nonce:t.nonce});break;case"STAGE_INSTANCE_CREATE":Vt({type:"STAGE_INSTANCE_CREATE",instance:t});break;case"STAGE_INSTANCE_UPDATE":Vt({type:"STAGE_INSTANCE_UPDATE",instance:t});break;case"STAGE_INSTANCE_DELETE":Vt({type:"STAGE_INSTANCE_DELETE",instance:t});break
;case"GUILD_SCHEDULED_EVENT_CREATE":Vt({type:"GUILD_SCHEDULED_EVENT_CREATE",guildScheduledEvent:t});break;case"GUILD_SCHEDULED_EVENT_UPDATE":Vt({type:"GUILD_SCHEDULED_EVENT_UPDATE",guildScheduledEvent:t});break;case"GUILD_SCHEDULED_EVENT_DELETE":Vt({type:"GUILD_SCHEDULED_EVENT_DELETE",guildScheduledEvent:t});break;case"GUILD_SCHEDULED_EVENT_USER_ADD":Vt({type:"GUILD_SCHEDULED_EVENT_USER_ADD",userId:t.user_id,guildId:t.guild_id,guildEventId:t.guild_scheduled_event_id});break;case"GUILD_SCHEDULED_EVENT_USER_REMOVE":Vt({type:"GUILD_SCHEDULED_EVENT_USER_REMOVE",userId:t.user_id,guildId:t.guild_id,guildEventId:t.guild_scheduled_event_id});break;case"GUILD_DIRECTORY_ENTRY_CREATE":Vt({type:"GUILD_DIRECTORY_ENTRY_CREATE",channelId:t.directory_channel_id,entry:t});break;case"GUILD_DIRECTORY_ENTRY_UPDATE":Vt({type:"GUILD_DIRECTORY_ENTRY_UPDATE",channelId:t.directory_channel_id,entry:t});break;case"GUILD_DIRECTORY_ENTRY_DELETE":Vt({type:"GUILD_DIRECTORY_ENTRY_DELETE",
channelId:t.directory_channel_id,guildId:t.entity_id});break;case"VOICE_CHANNEL_EFFECT_SEND":Vt({type:"VOICE_CHANNEL_EFFECT_SEND",emoji:t.emoji,channelId:t.channel_id,userId:t.user_id,animationType:t.animation_type,animationId:t.animation_id});break;case"EMBEDDED_ACTIVITY_UPDATE":Vt({type:"EMBEDDED_ACTIVITY_INBOUND_UPDATE",guildId:t.guild_id,channelId:t.channel_id,embeddedActivity:t.embedded_activity,connections:t.connections,updateCode:t.update_code});break;case"AUTH_SESSION_CHANGE":Vt({type:"AUTH_SESSION_CHANGE",authSessionIdHash:t.auth_session_id_hash});break;case"USER_CONNECTIONS_LINK_CALLBACK":Vt({type:"USER_CONNECTIONS_LINK_CALLBACK",provider:t.provider,callbackCode:t.callback_code,callbackState:t.callback_state});break;case"DELETED_ENTITY_IDS":Vt(Ot({type:"DELETED_ENTITY_IDS"},t));case"CONSOLE_COMMAND_UPDATE":Vt({type:"CONSOLE_COMMAND_UPDATE",id:t.id,result:t.result,error:t.error});break;case"PASSIVE_UPDATE_V1":var y,v,O;Vt({type:"PASSIVE_UPDATE_V1",guildId:t.guild_id,
members:t.members,channels:null===(y=t.channels)||void 0===y?void 0:y.map((function(e){return{id:e.id,lastMessageId:e.last_message_id,lastPinTimestamp:e.last_pin_timestamp}})),voiceStates:null===(v=t.voice_states)||void 0===v?void 0:v.map((function(e){return{channelId:e.channel_id,deaf:e.deaf||!1,mute:e.mute||!1,requestToSpeakTimestamp:null!==(O=e.request_to_speak_timestamp)&&void 0!==O?O:null,selfDeaf:e.self_deaf||!1,selfMute:e.self_mute||!1,selfStream:e.self_stream||!1,selfVideo:e.self_video||!1,sessionId:e.session_id,suppress:e.suppress,userId:e.user_id}}))})}}(t[0],t[1])}))}))}catch(e){Zt.resetSocketOnError(e)}var n=Date.now()-e;if(n>100){At.log("Dispatched ".concat(t.length," messages in ").concat(n,"ms"));Kt=250}else Kt=33}),Kt))}));function qt(){kt.update();Mt.update();return!1}function Wt(){Ut.update();return!1}function Qt(){Mt.update();return!1}function Jt(e){Zt.isSessionEstablished()&&Zt.streamDelete(e)}function $t(){var e=ct.Z.getAllActiveStreamKeys().find((function(e){
return(0,Ne.my)(e).ownerId===et.default.getId()}));ct.Z.getAllActiveStreamKeys().filter((function(t){return t!==e})).forEach((function(e){return Jt(e)}))}var Xt=function(e){vt(n,e);var t=Tt(n);function n(){pt(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(et.default,at.Z,Me.Z,tt.Z,it.Z);this.syncWith([ot.Z],qt);this.syncWith([ut.Z],Wt)};r.getSocket=function(){return Zt};r.isTryingToConnect=function(){return!Zt.isClosed()};r.isConnected=function(){return Zt.isSessionEstablished()};r.isConnectedOrOverlay=function(){return Zt.isSessionEstablished()||__OVERLAY__};r.lastTimeConnectedChanged=function(){return wt};r.__getLocalVars=function(){return{logger:At,MAX_GUILD_MEMBER_REQUEST_SIZE:100,lastTimeConnectedChanged:wt,sessionId:Lt,localPresenceState:Ut,localVoiceState:kt,localLobbyVoiceStates:Mt,socket:Zt,channelUpdateDebouncer:xt,presenceUpdateDebouncer:Ft,STANDARD_TIMEOUT:33,LONG_TIMEOUT:250,dispatchQueue:Yt,dispatchTimeout:zt,
nextDispatchTimeout:Kt}};return n}(o.ZP.Store);Xt.displayName="GatewayConnectionStore";const en=new Xt(a.Z,{START_SESSION:function(){return!!Zt.isClosed()&&Zt.connect()},LOGIN_SUCCESS:function(){if(Zt.isSessionEstablished()){Zt.close();return Zt.connect()}return!1},LOGOUT:function(e){e.isSwitchingAccount&&Ut.handleAccountSwitch();Zt.close()},CONNECTION_OPEN:function(e){wt=Date.now();Lt=e.sessionId;Ut.handleConnectionOpen();var t={},n=at.Z.getVoiceChannelId();if(null!=n){var r=Me.Z.getChannel(n);null!=r&&(t={guildId:r.getGuildId(),channelId:n})}kt.update(t,!0);Mt.update({},!0)},CONNECTION_CLOSED:function(){wt=Date.now()},RTC_CONNECTION_STATE:function(e){if(e.state!==W.hes.DISCONNECTED)return!1;e.willReconnect&&(null!=e.streamKey?Zt.streamPing(e.streamKey):Zt.voiceServerPing())},VOICE_CHANNEL_SELECT:function(e){kt.update({guildId:e.guildId,channelId:e.channelId});return!1},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){if(et.default.getId()!==t.userId)return e
;if(t.sessionId===Lt)kt.setState({guildId:t.guildId,channelId:t.channelId});else{if(t.guildId!==kt.guildId)return e;kt.setState({guildId:null,channelId:null})}return!0}),!1)},GUILD_DELETE:function(e){e.guild.id===kt.guildId&&kt.setState({guildId:null,channelId:null})},CHANNEL_DELETE:function(e){e.channel.id===kt.channelId&&kt.setState({guildId:null,channelId:null})},CALL_DELETE:function(e){e.channelId===kt.channelId&&kt.setState({guildId:null,channelId:null})},APP_STATE_UPDATE:function(e){e.state===W.$7l.ACTIVE&&Zt.resetBackoff("App state is active");return!1},GUILD_MEMBERS_REQUEST:function(e){Zt.isSessionEstablished()&&("userIds"in e?i()(e.userIds).chunk(100).forEach((function(t){Zt.requestGuildMembers(e.guildIds,{userIds:t,presences:!!e.presences})})):Zt.requestGuildMembers(e.guildIds,{query:e.query,limit:e.limit,presences:!!e.presences}));return!1},GUILD_SUBSCRIPTIONS_FLUSH:function(e){var t=e.guildId,n=e.subscriptions;Zt.isSessionEstablished()&&Zt.updateGuildSubscriptions(t,n)
;return!1},CALL_CONNECT:function(e){var t=e.channelId;Zt.isSessionEstablished()&&Zt.callConnect(t);return!1},LOBBY_CONNECT:function(e){var t=e.lobbyId,n=e.lobbySecret;Zt.isSessionEstablished()&&Zt.lobbyConnect(t,n);return!1},LOBBY_DISCONNECT:function(e){var t=e.lobbyId;Zt.isSessionEstablished()&&Zt.lobbyDisconnect(t);Mt.update();return!1},LOBBY_VOICE_CONNECT:Qt,LOBBY_VOICE_DISCONNECT:Qt,RPC_APP_DISCONNECTED:Qt,STREAM_START:function(e){var t=e.streamType,n=e.guildId,r=e.channelId;if(Zt.isSessionEstablished()){var i,o,a=null!=n?null===(i=Me.Z.getChannel(r))||void 0===i?void 0:i.rtcRegion:null===(o=tt.Z.getCall(r))||void 0===o?void 0:o.region;Zt.streamCreate(t,n,r,null!=a?a:S.Z.getPreferredRegion())}return!1},STREAM_WATCH:function(e){var t=e.streamKey,n=e.allowMultiple;if(Zt.isSessionEstablished()){n||$t();Zt.streamWatch(t)}return!1},STREAM_STOP:function(e){Jt(e.streamKey);return!1},STREAM_SET_PAUSED:function(e){var t=e.streamKey,n=e.paused
;Zt.isSessionEstablished()&&Zt.streamSetPaused(t,n)},PUSH_NOTIFICATION_CLICK:function(){Zt.expeditedHeartbeat(5e3,"user clicked on notification",!0);return!1},EMBEDDED_ACTIVITY_DISCONNECT:function(e){var t,n,r=e.channelId,i=e.applicationId,o=null!==(n=null===(t=Me.Z.getChannel(r))||void 0===t?void 0:t.getGuildId())&&void 0!==n?n:null;null!=o&&Zt.embeddedActivityClose(o,r,i)},REQUEST_FORUM_UNREADS:function(e){var t=e.guildId,n=e.channelId,r=e.threads;Zt.requestForumUnreads(t,n,r)},REMOTE_COMMAND:function(e){var t=e.sessionId,n=e.payload;Zt.isSessionEstablished()&&Zt.remoteCommand(t,n);return!1}})},210854:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(496486),i=n.n(r),o=n(791462),a=n(173436),u=n(365523);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t,n){c(this,e);this._pendingRequests=new Set;this._sentRequests=new Set;this._unacknowledgedRequests=new Set;this._guildId=t;this._guildMemberExists=function(e){
return n(t,e)}}var t=e.prototype;t.acknowledge=function(e){this._unacknowledgedRequests.delete(e);this._pendingRequests.delete(e)};t.flushRequests=function(e){var t=this;if(0!==this._pendingRequests.size){var n=[];this._pendingRequests.forEach((function(e){if(!t._guildMemberExists(e)){t._unacknowledgedRequests.add(e);t._sentRequests.add(e);n.push(e)}}));n.length>0&&e(this._guildId,n);this._pendingRequests.clear()}};t.requestUnacknowledged=function(){var e=this;if(0===this._unacknowledgedRequests.size)return!1;this._unacknowledgedRequests.forEach((function(t){e._guildMemberExists(t)?e._unacknowledgedRequests.delete(t):e._pendingRequests.add(t)}));return 0!==this._pendingRequests.size&&void 0};t.request=function(e){if(this._guildMemberExists(e)||this._sentRequests.has(e)||this._pendingRequests.has(e))return!1;this._pendingRequests.add(e)};return e}(),l=function(){function e(t,n){var r=this;c(this,e);this._guildStates={};this._flush=new u.sW(0,(function(){return r.flushRequests()}))
;this._guildMemberExists=t;this._onChange=n}var t=e.prototype;t.reset=function(){this._guildStates={};this._flush.cancel()};t.request=function(e,t){!1!==this._getGuildState(e).request(t)&&this._flush.delay(!1)};t.acknowledge=function(e,t){this._getGuildState(e).acknowledge(t)};t.flushRequests=function(){var e=this;i().forEach(this._guildStates,(function(t){return t.flushRequests(e._onChange)}))};t.requestUnacknowledged=function(){i().reduce(this._guildStates,(function(e,t){return!1!==t.requestUnacknowledged()||t}),!1)&&this._flush.delay()};t._getGuildState=function(e){var t=this._guildStates[e];null==t&&(t=this._guildStates[e]=new s(e,this._guildMemberExists));return t};return e}(),f=n(353098),d=n(356004),p=n(212218);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function E(e,t){
return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var I=new l(p.ZP.isMember,(function(e,t){a.Z.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[e],userIds:t})}));function b(){I.reset()}function m(e,t){I.request(e,t);return!1}function S(e,t){
t.forEach((function(t){var n=t.author,r=t.mentions;null!=n&&m(e,n.id);r.forEach((function(t){return m(e,t.id)}))}));return!1}function g(e){var t=e.channelId,n=e.messages,r=d.Z.getChannel(t);return null!=r&&null!=r.guild_id&&S(r.guild_id,n)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&y(e,t)}(n,e);var t=O(n);function n(){_(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(d.Z,p.ZP)};r.requestMember=function(e,t){m(e,t)};r.__getLocalVars=function(){return{requester:I}};return n}(o.ZP.Store);T.displayName="GuildMemberRequesterStore";const A=new T(a.Z,{CONNECTION_CLOSED:b,CONNECTION_OPEN:b,CONNECTION_RESUMED:function(){I.requestUnacknowledged();return!1},GUILD_MEMBERS_CHUNK:function(e){var t=e.guildId,n=e.members,r=e.notFound;n.forEach((function(e){
I.acknowledge(t,e.user.id)}));null!=r&&r.forEach((function(e){return I.acknowledge(t,e)}));return!1},SEARCH_FINISH:function(e){var t=e.guildId,n=e.messages;return null!=t&&S(t,i().flatten(n))},LOAD_MESSAGES_SUCCESS:g,LOAD_MESSAGES_AROUND_SUCCESS:g,LOAD_PINNED_MESSAGES_SUCCESS:g,LOAD_RECENT_MENTIONS_SUCCESS:g,GUILD_FEED_FETCH_SUCCESS:function(e){var t=e.guildId,n=e.data;return S(t,(0,f._)(n))}})},179468:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(791462),i=n(444450),o=n(173436);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}
var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var d="GuildNSFWAgreeStore",p={};var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&s(e,t)}(n,e);var t=f(n);function n(){a(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){var e;p=null!==(e=i.Z.get(d))&&void 0!==e?e:p};r.didAgree=function(e){
return null!=e&&(p[e]||!1)};r.__getLocalVars=function(){return{STORAGE_KEY:d,guilds:p}};return n}(r.ZP.Store);_.displayName="GuildNSFWAgreeStore";const h=new _(o.Z,{GUILD_NSFW_AGREE:function(e){var t=e.guildId;p[t]=!0;i.Z.set(d,p)}})},243256:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(791462),i=n(173436),o=n(204424),a=n(418674),u=n(212218),c=n(653772),s=n(859023),l=n(461061);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function _(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}
function E(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}var O={notClaimed:!1,notEmailVerified:!1,notPhoneVerified:!1,newAccount:!1,newMember:!1,canChat:!0},I=new Set,b={};function m(e){S(e);I.add(e);var t=c.Z.getGuild(e),n=s.default.getCurrentUser();if(null!=t&&t.verificationLevel!==l.sFg.NONE&&null!=n&&!t.isOwner(n)&&!n.isPhoneVerified()){var r=u.ZP.getMember(t.id,n.id);if(null!=r){var f;if((0,a.yE)(null!==(f=r.flags)&&void 0!==f?f:0,o.qQ.BYPASSES_VERIFICATION))return;var d=new Set,p=!0,_=!1,h=void 0;try{for(var y,v=r.roles[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){var O=y.value,m=t.getRole(O);null==m||m.managed||d.add(O)}}catch(e){_=!0;h=e}finally{try{p||null==v.return||v.return()}finally{if(_)throw h}}var g=new Date("2022-12-02 00:00:00"),T=null==r.joinedAt||new Date(r.joinedAt)<g
;if(!(t.hasFeature(l.oNc.GUILD_ONBOARDING_EVER_ENABLED)&&!T)&&d.size>0)return}var A=+n.createdAt+6e4*l.fDV.ACCOUNT_AGE-Date.now(),N=+t.joinedAt+6e4*l.fDV.MEMBER_AGE-Date.now(),C=t.verificationLevel>=l.sFg.LOW&&!n.isClaimed(),P=!1,R=!1,D=!1,w=!1;if(!n.isPhoneVerified()&&!n.isStaff()){P=t.verificationLevel>=l.sFg.LOW&&!n.verified;R=t.verificationLevel>=l.sFg.VERY_HIGH;D=t.verificationLevel>=l.sFg.MEDIUM&&A>0;w=t.verificationLevel>=l.sFg.HIGH&&N>0}var L,U=[];w&&U.push(N);D&&U.push(A);if(U.length>0){var k;L=setTimeout((function(){return i.Z.dispatch({type:"GUILD_VERIFICATION_CHECK",guildId:e})}),(k=Math).max.apply(k,E(U)))}b[e]={notClaimed:C,notEmailVerified:P,notPhoneVerified:R,newAccount:D,newMember:w,canChat:!(C||P||R||D||w),accountDeadline:new Date(Date.now()+A),memberDeadline:new Date(Date.now()+N),timeoutRef:L}}}function S(e){var t=b[e];null!=t&&clearTimeout(t.timeoutRef);delete b[e]}function g(e){I.delete(e.guild.id);m(e.guild.id)}var T=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=v(n);function n(){d(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(c.Z,s.default)};r.getCheck=function(e){I.has(e)||m(e);var t;return null!==(t=b[e])&&void 0!==t?t:O};r.canChatInGuild=function(e){return this.getCheck(e).canChat};r.__getLocalVars=function(){return{DEFAULT_CHECK:O,guildIdsComputed:I,checks:b}};return n}(r.ZP.Store);T.displayName="GuildVerificationStore";const A=new T(i.Z,{CONNECTION_OPEN:function(){I.clear();for(var e in b)S(e)},CONNECTION_CLOSED:function(){Object.keys(b).forEach(S)},CURRENT_USER_UPDATE:function(){I.clear()},GUILD_CREATE:g,GUILD_UPDATE:g,GUILD_DELETE:function(e){S(e.guild.id)},GUILD_MEMBER_UPDATE:function(e){var t,n=e.guildId
;if(e.user.id!==(null===(t=s.default.getCurrentUser())||void 0===t?void 0:t.id))return!1;I.delete(n)},GUILD_VERIFICATION_CHECK:function(e){m(e.guildId)}})},287452:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(208804),i=n.n(r),o=n(531351),a=n.n(o),u=n(189734),c=n.n(u),s=n(791462),l=n(173436),f=n(548349),d=n(848545);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return _(e)}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var O,I={},b={},m={},S={},g=!1,T=!1,A=!1;var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&E(e,t)}(n,e);var t=v(n);function n(){p(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getInvite=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.targetType,r=t.targetUserId,i=t.targetApplicationId;if(n===d.Iq.STREAM&&null!=r){var o;return null===(o=b[e])||void 0===o?void 0:o[r]}
if(n===d.Iq.EMBEDDED_APPLICATION&&null!=i){var a;return null===(a=m[e])||void 0===a?void 0:a[i]}return I[e]};r.getFriendInvite=function(){return O};r.getFriendInvitesFetching=function(){return g};r.canRevokeFriendInvite=function(){return null!=O&&!T&&!A};r.__getLocalVars=function(){return{channelInvites:I,streamInvites:b,applicationInvites:m,friendInvites:S,friendInvite:O,friendInvitesFetching:g,friendInvitesRevokeFetching:T,friendInvitesCreateFetching:A}};return n}(s.ZP.Store);N.displayName="InstantInviteStore";const C=new N(l.Z,{CONNECTION_OPEN:function(){I={};b={};m={};S={};O=null;T=!1;A=!1;g=!1},CHANNEL_DELETE:function(e){var t=e.channel;delete I[t.id];delete b[t.id];delete m[t.id]},FRIEND_INVITE_CREATE_SUCCESS:function(e){S[e.invite.code]=f.Z.createFromServer(e.invite);var t;O=null!==(t=i()(a()(c()(Object.values(S),"createdAt"))))&&void 0!==t?t:null;A=!1},FRIEND_INVITE_CREATE_FAILURE:function(){A=!1},FRIEND_INVITE_REVOKE_SUCCESS:function(e){
null!=e.invites&&e.invites.forEach((function(e){null!=S[e.code]&&delete S[e.code]}));var t;O=null!==(t=i()(a()(c()(Object.values(S),"createdAt"))))&&void 0!==t?t:null;T=!1},INSTANT_INVITE_CREATE_SUCCESS:function(e){var t=e.channelId,n=e.invite,r=f.Z.createFromServer(n);if(r.targetType===d.Iq.STREAM&&null!=r.targetUser){null==b[t]&&(b[t]={});b[t][String(r.targetUser.id)]=r}else if(r.targetType===d.Iq.EMBEDDED_APPLICATION&&null!=r.targetApplication){null==m[t]&&(m[t]={});m[t][r.targetApplication.id]=r}else I[t]=r},INSTANT_INVITE_CREATE_FAILURE:function(e){var t=e.channelId;I[t]=null},INSTANT_INVITE_REVOKE_SUCCESS:function(e){var t=e.channelId;I[t]=null},FRIEND_INVITE_REVOKE_REQUEST:function(){T=!0},FRIEND_INVITE_CREATE_REQUEST:function(){A=!0},FRIEND_INVITES_FETCH_REQUEST:function(){g=!0},FRIEND_INVITES_FETCH_RESPONSE:function(e){S={};e.invites.forEach((function(e){S[e.code]=f.Z.createFromServer(e)}));var t;O=null!==(t=i()(a()(c()(Object.values(S),"createdAt"))))&&void 0!==t?t:null;g=!1}
})},142583:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(791462),i=n(173436),o=n(46323),a=n(461061);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}function f(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function d(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var E={},y={},v={};function O(e,t){var n;e=null!=e?e:"";var r=l({code:(0,o.fU)(e).code,state:a.r2o.RESOLVING},E[e]);t(r);E=f(l({},E),c({},e,r));null!=(null===(n=r.guild)||void 0===n?void 0:n.id)&&(v=f(l({},v),c({},r.guild.id,e)))}function I(e){return O(e.code,(function(t){t.state="banned"in e&&e.banned?a.r2o.BANNED:a.r2o.EXPIRED}))}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=h(n);function n(){u(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getInvite=function(e){return E[e]};r.getInviteError=function(e){return y[e]};r.getInvites=function(){return E};r.getInviteKeyForGuildId=function(e){return v[e]};r.__getLocalVars=function(){return{invites:E,inviteErrors:y,inviteKeysByGuildId:v}}
;return n}(r.ZP.Store);b.displayName="InviteStore";const m=new b(i.Z,{INVITE_RESOLVE:function(e){var t=e.code,n=(0,o.fU)(t);E=f(l({},E),c({},t,{code:n.baseCode,state:a.r2o.RESOLVING}))},INVITE_RESOLVE_SUCCESS:function(e){return O(e.code,(function(t){t.state=a.r2o.RESOLVED;t.guild=e.invite.guild;t.channel=e.invite.channel;t.inviter=e.invite.inviter;var n,r;t.approximate_member_count=null!==(n=e.invite.approximate_member_count)&&void 0!==n?n:null;t.approximate_presence_count=null!==(r=e.invite.approximate_presence_count)&&void 0!==r?r:null;t.target_type=e.invite.target_type;t.target_user=e.invite.target_user;t.target_application=e.invite.target_application;t.expires_at=e.invite.expires_at;t.stage_instance=e.invite.stage_instance;t.guild_scheduled_event=e.invite.guild_scheduled_event;t.type=e.invite.type}))},INVITE_RESOLVE_FAILURE:I,INSTANT_INVITE_REVOKE_SUCCESS:I,FRIEND_INVITE_CREATE_SUCCESS:function(e){return O(e.invite.code,(function(t){t.state=a.r2o.RESOLVED;t.inviter=e.invite.inviter
}))},FRIEND_INVITE_REVOKE_SUCCESS:function(e){e.invites.forEach((function(e){return O(e.code,(function(e){e.state=a.r2o.EXPIRED}))}))},INSTANT_INVITE_CREATE_SUCCESS:function(e){return O(e.invite.code,(function(t){t.state=a.r2o.RESOLVED;t.guild=e.invite.guild;t.channel=e.invite.channel;t.inviter=e.invite.inviter;var n,r;t.approximate_member_count=null!==(n=e.invite.approximate_member_count)&&void 0!==n?n:null;t.approximate_presence_count=null!==(r=e.invite.approximate_presence_count)&&void 0!==r?r:null;t.target_type=e.invite.target_type;t.target_user=e.invite.target_user;t.target_application=e.invite.target_application;t.stage_instance=e.invite.stage_instance;t.guild_scheduled_event=e.invite.guild_scheduled_event;t.type=e.invite.type}))},INVITE_ACCEPT:function(e){return O(e.code,(function(e){e.state=a.r2o.ACCEPTING}))},INVITE_ACCEPT_SUCCESS:function(e){return O(e.code,(function(t){t.state=a.r2o.ACCEPTED;t.guild=e.invite.guild;t.new_member=e.invite.new_member
;t.channel=l({},t.channel,e.invite.channel)}))},INVITE_ACCEPT_FAILURE:function(e){y[e.code]=e.error;return O(e.code,(function(e){e.state=a.r2o.ERROR}))},INVITE_APP_OPENING:function(e){return O(e.code,(function(e){e.state=a.r2o.APP_OPENING}))},INVITE_APP_OPENED:function(e){return O(e.code,(function(e){e.state=a.r2o.APP_OPENED}))},INVITE_APP_NOT_OPENED:function(e){return O(e.code,(function(e){e.state=a.r2o.APP_NOT_OPENED}))}})},212033:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(791462),i=n(173436);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}function l(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var p=[];function _(){p=[]}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&s(e,t)}(n,e);var t=d(n);function n(){a(this,n);return t.apply(this,arguments)}var r=n.prototype;r.hasLayers=function(){return p.length>0};r.getLayers=function(){return p};r.__getLocalVars=function(){return{layers:p}};return n}(r.ZP.Store);h.displayName="LayerStore";const E=new h(i.Z,{LAYER_PUSH:function(e){var t=e.component
;if(p.indexOf(t)>=0)return!1;p=l(p).concat([t])},LAYER_POP:function(){if(0===p.length)return!1;p=p.slice(0,-1)},LAYER_POP_ALL:_,LOGOUT:_,NOTIFICATION_CLICK:_})},403872:(e,t,n)=>{"use strict";n.d(t,{t:()=>E,Z:()=>m});var r=n(496486),i=n.n(r),o=n(791462),a=n(173436),u=n(461061);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){s(e,t,n[t])}))}return e}function d(e,t){
return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var E=function e(t){c(this,e);this.code=t},y={},v={};function O(e,t){if(null==v[e])return null;var n=v[e],r=n.socketId,i=n.timeout,o=n.resolve,a=n.reject;delete v[e];null!=i&&clearTimeout(i)
;null!=o&&null!=a&&t(o,a);return r}function I(e){var t=e.lobbyId,n=e.member,r=n.user,i=n.metadata,o=y[t];if(null==o)return!1;var a=o.members.find((function(e){return e.user.id===r.id}));if(null!=a){a.user=r;a.metadata=i}else o.members.push({user:r,metadata:i})}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=h(n);function n(){c(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getLobbies=function(){return y};r.getLobbiesWithVoice=function(){return i().filter(y,(function(e){return e.voice}))};r.getLobby=function(e){return y[e]};r.getPendingLobbies=function(){return i().map(v,(function(e,t){return{id:t,secret:e.secret}}))};r.__getLocalVars=function(){return{lobbies:y,pendingLobbies:v}};return n}(o.ZP.Store);b.displayName="LobbyStore";const m=new b(a.Z,{
CONNECTION_OPEN:function(){y={}},OVERLAY_INITIALIZE:function(e){y=e.lobbies},LOBBY_CONNECT:function(e){var t=e.socketId,n=e.lobbyId,r=e.lobbySecret,i=e.resolve,o=e.reject;null==v[n]&&null==y[n]?v[n]={socketId:t,secret:r,resolve:i,reject:o,timeout:__OVERLAY__?null:setTimeout((function(){a.Z.dispatch({type:"LOBBY_DELETE",lobbyId:n,reason:u.ogU.SERVICE_UNAVAILABLE})}),15e3)}:null!=o&&o(new E(u.ogU.ALREADY_CONNECTING))},LOBBY_DISCONNECT:function(e){O(e.lobbyId,(function(e,t){return t(new E(u.ogU.NO_ERROR))}))},LOBBY_CREATE:function(e){var t=e.lobby,n=O(t.id,(function(e){return e(t)}));null!=n&&(y[t.id]=f({socketId:n,voice:!1},y[t.id],t))},LOBBY_UPDATE:function(e){var t=e.lobby,n=y[t.id];null!=n&&(y[t.id]=f({},n,t))},LOBBY_DELETE:function(e){var t=e.lobbyId,n=e.reason;delete y[t];O(t,(function(e,t){return t(new E(n))}))},LOBBY_MEMBER_CONNECT:I,LOBBY_MEMBER_UPDATE:I,LOBBY_MEMBER_DISCONNECT:function(e){var t=e.lobbyId,n=e.member.user,r=y[t];if(null==r)return!1
;r.members=r.members.filter((function(e){return e.user.id!==n.id}))},LOBBY_VOICE_CONNECT:function(e){var t=e.lobbyId,n=y[t];if(null==n)return!1;n.voice=!0},LOBBY_VOICE_DISCONNECT:function(e){var t=e.lobbyId,n=y[t];if(null==n)return!1;n.voice=!1},RPC_APP_DISCONNECTED:function(e){var t=e.socketId;i().forEach(y,(function(e){e.socketId===t&&a.Z.dispatch({type:"LOBBY_DISCONNECT",lobbyId:e.id})}))}})},651972:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var r=n(110251),i=n.n(r),o=n(496486),a=n.n(o),u=n(791462),c=n(173436),s=n(623899),l=n(24390),f=n(501887);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function _(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){
h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}var v=[f.Z],O=[];function I(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,a=v[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value.getActivity();null!=u&&e.push(u)}}catch(e){n=!0;r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}if(i()(e,O))return!1;O=e;return!0}var b=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=y(n);function n(){d(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.syncWith(v,I)};r.getActivities=function(){return O};r.__getLocalVars=function(){return{delegateStores:v,activities:O}};return n}(u.ZP.Store);b.displayName="FirstPartyRichPresenceStore";const m=new b(c.Z);var S=n(830260),g=n(409271),T=n(537127),A=n(18416),N=n(631134),C=n(358434),P=n(367124),R=n(73462),D=n(461061),w=n(959797);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function M(e){
M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return M(e)}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){k(e,t,n[t])}))}return e}function j(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e,t){G=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return G(e,t)}function V(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var i=M(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j(this,n)}}var F=[],H={};function Y(){var e,t=[],n=g.Ok.getSetting()
;null!=n&&("0"===n.expiresAtMs||new Date(Number(n.expiresAtMs)).getTime()-(new Date).getTime()>0)&&t.push((0,l.Z)(n));var r=m.getActivities();(e=t).push.apply(e,V(r));var o=C.Z.getStream();null!=o&&t.push(Z({type:D.IIU.STREAMING},o));var u=new Set,c=new Set;a().forEach(H,(function(e){if(null!=e.application_id){u.add(e.name);c.add(e.application_id);t.push(e)}}));s.ZP.getSelfEmbeddedActivities().forEach((function(e){var n,r=e.application_id;if(!c.has(r)){var i=null===(n=P.Z.getGame(r))||void 0===n?void 0:n.name;t.push({type:D.IIU.PLAYING,name:null!=i?i:w.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCHING_ACTIVITY,application_id:r,flags:D.xjy.EMBEDDED})}}));var f=R.Z.getVisibleGame(),d=null!=f&&null!=f.name&&u.has(f.name),p=null!=f&&f.isLauncher,_=A.Z.getActiveStreamForUser(N.default.getId()),h=d||p&&!(null!=_);null==f||null==f.name||h||t.push({type:D.IIU.PLAYING,name:f.name,application_id:f.id,timestamps:{start:f.start}});var E=S.Z.getActivity();null!=E&&t.push(Z({type:D.IIU.LISTENING},E))
;i()(F,t)||(F=t)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&G(e,t)}(n,e);var t=x(n);function n(){U(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(R.Z,s.ZP,C.Z,A.Z,S.Z,T.Z);this.syncWith([m],(function(){return Y()}))};r.getActivities=function(){return F};r.getPrimaryActivity=function(){return F[0]};r.getApplicationActivity=function(e){return this.findActivity((function(t){return t.application_id===e}))};r.getCustomStatusActivity=function(){return this.findActivity((function(e){return e.type===D.IIU.CUSTOM_STATUS}))};r.findActivity=function(e){return F.find(e)};r.getApplicationActivities=function(){return H};r.__getLocalVars=function(){return{activities:F,applicationActivities:H}};return n}(u.ZP.Store);z.displayName="LocalActivityStore"
;const K=new z(c.Z,{OVERLAY_INITIALIZE:function(e){var t=e.localActivities;H=Z({},t);Y()},START_SESSION:function(){H={};Y()},LOCAL_ACTIVITY_UPDATE:function(e){var t=e.socketId,n=e.activity;if(i()(H[t],n))return!1;null!=n?H[t]=n:delete H[t];Y()},RPC_APP_DISCONNECTED:function(e){var t=e.socketId;delete H[t];Y()},RUNNING_GAMES_CHANGE:Y,LIBRARY_APPLICATION_FLAGS_UPDATE_SUCCESS:Y,SPOTIFY_PLAYER_STATE:Y,SPOTIFY_PLAYER_PLAY:Y,STREAMING_UPDATE:Y,USER_CONNECTIONS_UPDATE:Y,STREAM_START:Y,STREAM_STOP:Y,USER_SETTINGS_PROTO_UPDATE:Y,EMBEDDED_ACTIVITY_OPEN:Y,EMBEDDED_ACTIVITY_CLOSE:Y})},970397:(e,t,n)=>{"use strict";n.d(t,{h:()=>u});var r=n(173436),i=n(172762),o=[];r.Z.subscribe("CONNECTION_OPEN",(function(){o.forEach((function(e){return a(e)}));o=[]}));function a(e){setImmediate((function(){return e()}))}function u(e){i.Z.isConnectedOrOverlay()?a(e):o.push(e)}},979662:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F})
;var r=n(110251),i=n.n(r),o=n(496486),a=n.n(o),u=n(791462),c=n(173436),s=n(572561),l=n(830260),f=n(409271),d=n(537127),p=n(57203),_=n(367124),h=n(978627),E=n(800539),y=n(651972),v=n(962564),O=n(963886),I=n(461061);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return S(e)}function g(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e,t){T=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return T(e,t)}function A(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){
var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var P=!1,R=I.Skl.ONLINE,D=I.Skl.UNKNOWN,w=0,L=[],U=!1,k=!0,M=Object.freeze([]),Z=[];function j(e){return(0,p.OT)(e,E.Z)}function G(e){switch(e.type){case I.IIU.LISTENING:return(0,s.Z)(e)?l.Z.shouldShowActivity():null!=e.application_id&&j(e.application_id);case I.IIU.PLAYING:return null!=e.application_id?j(e.application_id):(t=e.name,null!=(n=_.Z.getGameByName(t))?j(n.id):f.G6.getSetting());case I.IIU.STREAMING:case I.IIU.WATCHING:default:return null==e.application_id||j(e.application_id)}var t,n}function V(){var e;w=null!==(e=h.Z.getIdleSince())&&void 0!==e?e:0;U=h.Z.isAFK();(R=k?D:P?I.Skl.INVISIBLE:f.co.getSetting())===I.Skl.ONLINE&&w>0&&(R=I.Skl.IDLE);var t=!1,n=k||R===I.Skl.INVISIBLE?[]:y.Z.getActivities().filter(G);if(!i()(L,n)){L=n;t=!0}var r=O.Z.getRemoteActivities();if(M!==r){M=r;t=!0}if(t){var o=L.find((function(e){return e.type===I.IIU.CUSTOM_STATUS
})),u=L.filter((function(e){return e.type!==I.IIU.CUSTOM_STATUS}));Z=u.length>0?L:null!=o?[o].concat(A(a()(M).filter((function(e){return e.type!==I.IIU.CUSTOM_STATUS})).uniqBy((function(e){return"".concat(e.type,":").concat(e.application_id,":").concat(e.name)})).value())):a().uniqBy(M,(function(e){return"".concat(e.type,":").concat(e.application_id,":").concat(e.name)}))}}function B(){k=!1;D=I.Skl.UNKNOWN;V();v.Z.setCurrentUserOnConnectionOpen(R,Z)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&T(e,t)}(n,e);var t=C(n);function n(){m(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(h.Z,d.Z,y.Z,O.Z,E.Z,_.Z);this.syncWith([y.Z],V)};r.getLocalPresence=function(){return{status:R,since:w,activities:L,afk:U}};r.getStatus=function(){return R}
;r.getActivities=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?Z:L};r.getPrimaryActivity=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?Z[0]:L[0]};r.getApplicationActivity=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.findActivity((function(t){return t.application_id===e}),t)};r.findActivity=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getActivities(t).find(e)};r.__getLocalVars=function(){return{forceInvisible:P,status:R,lastLoginStatus:D,since:w,localActivities:L,afk:U,loggedOut:k,remoteActivities:M,mergedActivities:Z}};return n}(u.ZP.Store);x.displayName="SelfPresenceStore";const F=new x(c.Z,{START_SESSION:V,CONNECTION_OPEN:B,CONNECTION_OPEN_SUPPLEMENTAL:B,OVERLAY_INITIALIZE:B,CONNECTION_CLOSED:V,IDLE:V,AFK:V,RUNNING_GAMES_CHANGE:V,STREAMING_UPDATE:V,USER_SETTINGS_PROTO_UPDATE:V,LOCAL_ACTIVITY_UPDATE:V,
SPOTIFY_PLAYER_STATE:V,SPOTIFY_PLAYER_PLAY:V,USER_CONNECTIONS_UPDATE:V,SESSIONS_REPLACE:V,RPC_APP_DISCONNECTED:V,LIBRARY_FETCH_SUCCESS:V,LIBRARY_APPLICATION_FLAGS_UPDATE_SUCCESS:V,LOGOUT:function(){k=!0;D=R;V()},EMBEDDED_ACTIVITY_CLOSE:V,EMBEDDED_ACTIVITY_OPEN:V,FORCE_INVISIBLE:function(e){P=e.invisible;return V()},WINDOW_FOCUS:function(){P=!1;return V()}})},74922:(e,t,n)=>{"use strict";n.d(t,{Z:()=>pe});var r=n(441143),i=n.n(r),o=n(496486),a=n.n(o),u=n(791462),c=n(149556),s=n(173436),l=n(992553),f=n(631134),d=n(112187),p=n(733285),_=n(535247),h=n(932847),E=n(840502),y=n(365523),v=n(497802),O=n(461061);function I(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function b(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null!=e?Math.round(e):t}var S=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._targetResolution=0;this._targetFPS=0;this._streamSettingsChanged=!1;this._lastLayoutChanged=0;this._layoutChanges=0;this._incrementLayout=function(e,t){null==r._layoutBuckets[e]&&(r._layoutBuckets[e]=0);r._layoutBuckets[e]+=t};this._sampleStats=function(){var e=v.Z.getState(),t=e.resolution,n=e.fps;r._streamSettingsChanged=t!==r._targetResolution||n!==r._targetFPS};this._isSender=n;this._statInterval=new y.Xp;this._lastLayout=t;this._layoutBuckets={}}var t=e.prototype;t.start=function(){var e=v.Z.getState(),t=e.resolution,n=e.fps
;this._targetResolution=t;this._targetFPS=n;this._statInterval.start(1e3,this._sampleStats);this._lastLayoutChanged=(0,E.zO)()};t.stop=function(){this._statInterval.stop();this._streamEnd=(0,E.zO)();this._incrementLayout(this._lastLayout,(this._streamEnd-this._lastLayoutChanged)/1e3)};t.layoutChange=function(e){if(e!==this._lastLayout&&null==this._streamEnd){var t=(0,E.zO)();this._incrementLayout(this._lastLayout,(t-this._lastLayoutChanged)/1e3);this._layoutChanges++;this._lastLayout=e;this._lastLayoutChanged=t}};t.getLayout=function(){return this._lastLayout};t.getStats=function(){var e={num_layout_changes:this._layoutChanges,duration_layout_fullscreen:m(this._layoutBuckets[O.hVg.FULL_SCREEN]),duration_layout_theatre:m(this._layoutBuckets[O.hVg.THEATRE]),duration_layout_pip:m(this._layoutBuckets[O.hVg.PIP]),duration_layout_popout:m(this._layoutBuckets[O.hVg.POPOUT]),duration_layout_portrait:m(this._layoutBuckets[O.hVg.PORTRAIT]),
duration_layout_landscape:m(this._layoutBuckets[O.hVg.LANDSCAPE]),duration_layout_minimized:m(this._layoutBuckets[O.hVg.MINIMIZED])};return this._isSender?b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){I(e,t,n[t])}))}return e}({},e),{target_fps:this._targetFPS,target_resolution_height:this._targetResolution,stream_settings_changed:this._streamSettingsChanged}):e};return e}(),g=n(997163);const T=n(735489).t;var A=n(866452);function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function P(e,t,n){t in e?Object.defineProperty(e,t,{
value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function R(e,t,n){R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}};return R(e,t,n||e)}function D(e){D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return D(e)}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){P(e,t,n[t])}))}return e}function L(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e)
;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function U(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e,t){k=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return k(e,t)}var M=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){
var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}var j=function(){function e(t){var n=t.streamRegion,r=t.streamApplication,i=t.actionContext,o=t.numViewers;N(this,e);this.streamRegion=n;this.streamApplication=r;this.actionContext=i;this.maxViewers=o}var t=e.prototype;t.setActionContext=function(e){this.actionContext=e};t.trackViewerCount=function(e){this.maxViewers=Math.max(e,this.maxViewers)};return e}(),G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&k(e,t)}(n,e);var t=Z(n);function n(e){var r,i=e.sessionId,o=e.streamKey,u=e.serverId,c=e.initialLayout,l=e.analyticsContext,d=e.isStreamer,p=e.parentMediaSessionId;N(this,n);var _=(0,g.my)(o),h=_.guildId,E=_.channelId;(r=t.call(this,{userId:f.default.getId(),sessionId:i,guildId:h,channelId:E,
context:A.Yn.STREAM,rtcServerId:u,parentMediaSessionId:p}))._streamContext=_;r._streamKey=o;r._isStreamer=d;r._videoStreamStats=new S(c,r.isOwner);r.analyticsContext=l;r._updateVideoStreamId=a().debounce((function(e,t){var n=(0,g.my)(r._streamKey),i=n.guildId,o=n.channelId,a=n.ownerId;s.Z.wait((function(){return s.Z.dispatch({type:"RTC_CONNECTION_VIDEO",guildId:i,channelId:o,userId:a,streamId:e,rtcServerId:t,context:A.Yn.STREAM})}))}),200);r._videoStreamStats.start();r._initializeEvents();return r}var r=n.prototype;r.destroy=function(e){this._videoStreamStats.stop();this._trackVideoEndStats(e);this._updateVideoStreamId.cancel();this._updateVideoStreamId(null,null);this._updateVideoStreamId.flush();R(D(n.prototype),"destroy",this).call(this)};r.streamUpdate=function(e){var t=this._videoQuality;null!=t&&(e?t.pause():t.resume())};r.layoutChange=function(e){this._videoStreamStats.layoutChange(e)};r._initializeEvents=function(){var e=this,t=!1;this.on("state",(function(t,n,r){
s.Z.wait((function(){return s.Z.dispatch(L(w({type:"RTC_CONNECTION_STATE",state:t},n,r),{streamKey:e._streamKey}))}))}));this.on("video",(function(n,r,i,o,a){var u=(0,g.my)(e._streamKey);if(u.guildId===n&&u.channelId===r&&u.ownerId===i){if(null!=e.getMediaSessionId()&&!t){e._trackVideoStartStats();t=!0}e._updateVideoStreamId(o,a)}}))};r._getStreamAnalyticsProperties=function(){var e=this.analyticsContext,t=e.streamRegion,n=e.streamApplication,r=e.actionContext,i=this._streamContext,o=i.ownerId,a=i.guildId,u=_.Z.getRegion(p.Z.getHostname());return{channel_id:this.channelId,rtc_connection_id:this.getRTCConnectionId(),media_session_id:this.getMediaSessionId(),parent_media_session_id:this.parentMediaSessionId,sender_user_id:o,context:A.Yn.STREAM,guild_id:a,stream_region:t,guild_region:u,participant_type:this.isOwner?"streamer":"receiver",share_application_name:null!=n?n.name:null,share_application_id:null!=n?n.id:null,share_application_executable:null!=n?n.exe:null,
video_layout:this._videoStreamStats.getLayout(),client_event_source:r}};r._trackVideoStartStats=function(){var e=this.isOwner?T():null;h.default.track(O.rMx.VIDEO_STREAM_STARTED,L(w({},this._getStreamAnalyticsProperties(),e),{connection_type:d.Z.getType(),effective_connection_speed:d.Z.getEffectiveConnectionSpeed(),service_provider:d.Z.getServiceProvider()}))};r._trackVideoEndStats=function(e){var t=this._streamContext.ownerId,n=null,r=null,i=this._videoQuality;if(null!=i){n=this.isOwner?i.getOutboundStats()[0]:i.getInboundStats(t);r=i.getNetworkStats()}h.default.track(O.rMx.VIDEO_STREAM_ENDED,L(w({},n,r,null,this._videoStreamStats.getStats(),this._soundshareStats.getStats(),this._getStreamAnalyticsProperties()),{reason:e,max_viewers:this.analyticsContext.maxViewers,hostname:this.hostname}))};r._getExtraConnectionOptions=function(){return{streamUserId:(0,g.my)(this._streamKey).ownerId}};!function(e,t,n){t&&C(e.prototype,t);n&&C(e,n)}(n,[{key:"isOwner",get:function(){
var e=this._streamContext.ownerId;return f.default.getId()===e}}]);return n}(l.Z),V=n(573643),B=n(945296),x=n(18416),F=n(934714),H=n(962564),Y=n(73462);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e){q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return q(e)}function W(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e,t){Q=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Q(e,t)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{
for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $,X,ee=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var i=q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W(this,n)}}var ne={},re={},ie={},oe={},ae=O.hVg.THEATRE,ue={},ce=[];function se(){a().forEach(ue,(function(e,t){e.destroy(e.isOwner?"sender-disconnect":"receiver-disconnect");delete ue[t]}))}function le(e){e.filter((function(e){var t=J(e,2),n=t[0];t[1];return n.context===A.Yn.STREAM})).forEach((function(e){var t=J(e,2),n=(t[0],t[1]);s.Z.dispatch({type:"STREAM_STATS_UPDATE",stats:n})}))}function fe(){return!0}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Q(e,t)}(n,e);var t=te(n);function n(){K(this,n);return t.apply(this,arguments)}var r=n.prototype
;r.getActiveStreamKey=function(){return(0,B.Z)(F.Z)?X:null};r.getAllActiveStreamKeys=function(){return Object.keys(ue)};r.getStatsHistory=function(e,t){if(!(0,B.Z)(F.Z))return null;if(null==e)return null;if(t){var n=x.Z.getActiveStreamForUser(e);if(null==n)return null;if(0===x.Z.getViewerIds(n).length)return null}return ce.map((function(n){return t?(r=n.rtp.outbound,null!=(s=r.find((function(e){return"video"===e.type})))&&"video"===s.type?{type:"streamer",packetsSentOrReceived:null!==(o=s.packetsSent)&&void 0!==o?o:0,packetsLost:null!==(a=s.packetsLost)&&void 0!==a?a:0,frameRate:null!==(u=s.frameRateEncode)&&void 0!==u?u:0,resolution:null!==(c=null===(i=s.resolution)||void 0===i?void 0:i.height)&&void 0!==c?c:0,bitrate:0}:null):function(e){var t;if(null==e)return null;var n,r,i,o,a,u=e.find((function(e){return"video"===e.type}));return null!=u&&"video"===u.type?{type:"spectator",packetsSentOrReceived:null!==(n=u.packetsReceived)&&void 0!==n?n:0,
packetsLost:null!==(r=u.packetsLost)&&void 0!==r?r:0,frameRate:null!==(i=u.frameRateDecode)&&void 0!==i?i:0,bitrate:null!==(o=u.bitrate)&&void 0!==o?o:0,resolution:null!==(a=null===(t=u.resolution)||void 0===t?void 0:t.height)&&void 0!==a?a:0}:null}(n.rtp.inbound[e]);var r,i,o,a,u,c,s}))};r.getQuality=function(){if(!(0,B.Z)(F.Z))return O.IE4.UNKNOWN;var e=this.getActiveStreamKey(),t=null!=e?ue[e]:null;return null!=t?t.quality:O.IE4.UNKNOWN};r.getActiveMediaSessionId=function(){if(null==X)return null;var e=ue[X];return null!=e?e.getMediaSessionId():null};r.getActiveRTCConnectionId=function(){if(null==X)return null;var e=ue[X];return null!=e?e.getRTCConnectionId():null};r.getHostname=function(){if(null==X)return"";var e=ue[X];return null!=e.hostname?e.hostname:""};r.getStreamSourceId=function(e){return oe[e]};r.__getLocalVars=function(){return{sessionId:$,selectedStreamKey:X,streamActionContexts:ne,streamApplications:re,streamApplicationPIDs:ie,streamSourceIds:oe,streamLastLayout:ae,
rtcConnections:ue,statsHistory:ce,MAX_STATS_HISTORY:30}};return n}(u.ZP.Store);de.displayName="StreamRTCConnectionStore";const pe=new de(s.Z,!F.Z.isSupported()||__OVERLAY__?{}:{CONNECTION_OPEN:function(e){$=e.sessionId;X=null;se()},CONNECTION_CLOSED:function(){$=null;X=null;se()},RTC_CONNECTION_STATE:fe,RTC_CONNECTION_PING:fe,RTC_CONNECTION_LOSS_RATE:fe,RTC_CONNECTION_UPDATE_ID:function(e){return a().some(ue,(function(t){return t==e.connection}))},STREAM_START:function(e){var t=e.streamType,n=e.guildId,r=e.channelId,i=e.appContext,o=e.pid,u=e.sourceId,c=(0,g.V9)({streamType:t,guildId:n,channelId:r,ownerId:f.default.getId()});ne[c]=i;a().forEach(ue,(function(e){e.analyticsContext.setActionContext(i)}));oe[c]=u;ie[c]=o;if(null!=o){var s=Y.Z.getGameForPID(o);null!=s&&(re[c]={name:s.name,id:s.id,exe:s.exeName})}},STREAM_STOP:function(e){var t=e.appContext,n=e.streamKey;ne[n]=t;a().forEach(ue,(function(e){e.analyticsContext.setActionContext(t)}));oe[n]=null;ie[n]=null},
STREAM_CREATE:function(e){var t=e.streamKey,n=e.rtcServerId,r=e.region,o=e.viewerIds;X=t;var a=ue[t];if(null==a&&null!=n){null==ie[t]&&(re[t]=null);null==re[t]&&null==oe[t]&&(re[t]=(0,V.L2)((0,g.my)(t),H.Z));a=function(e,t,n){i()(null!=$,"Creating RTCConnection without session.");var r=new G({sessionId:$,streamKey:e,serverId:t,initialLayout:ae,analyticsContext:n,isStreamer:null!=re[e],parentMediaSessionId:p.Z.getMediaSessionId()});r.on("video-source-quality-changed",(function(e,t,n,r,i,o){s.Z.wait((function(){return s.Z.dispatch({type:"MEDIA_ENGINE_VIDEO_SOURCE_QUALITY_CHANGED",guildId:e,channelId:t,senderUserId:n,maxResolution:r,maxFrameRate:i,context:o})}))}));return r}(t,n,new j({streamRegion:r,streamApplication:re[t],actionContext:ne[t],numViewers:null!=o?o.length:0}));ue[t]=a}ce=[];F.Z.getMediaEngine().on(c.aB.ConnectionStats,le)},STREAM_SERVER_UPDATE:function(e){var t=ue[e.streamKey];if(null==t)return!1;t.connect(e.endpoint,e.token)},STREAM_UPDATE:function(e){
var t=e.streamKey,n=e.viewerIds,r=e.paused,i=ue[t];if(null==i)return!1;null!=n&&i.analyticsContext.trackViewerCount(n.length);i.streamUpdate(r)},STREAM_DELETE:function(e){var t=e.streamKey,n=ue[t];if(null==n)return!1;if(t===X){X=null;F.Z.getMediaEngine().off(c.aB.ConnectionStats,le)}n.destroy("stream-end");delete ue[t]},STREAM_STATS_UPDATE:function(e){var t=e.stats;if(null==t)return!1;ce.push(t);ce.length>30&&ce.shift()},STREAM_LAYOUT_UPDATE:function(e){var t=e.layout;ae=t;Object.values(ue).forEach((function(e){return e.layoutChange(t)}))}})},343435:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(791462),i=n(173436),o=n(733730),a=n(367124),u=n(73462),c=n(534115);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)
}function d(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}function _(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h,E=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function v(e){var t={os:e.os,name:e.name};null!=e.arguments&&(t.arguments=e.arguments);null!=e.isLauncher&&(t.is_launcher=e.isLauncher);return t}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=y(n);function n(){l(this,n);return t.apply(this,arguments)}var r=n.prototype
;r.getGameForPID=function(e){if(__OVERLAY__)return null;if(null==e)return null;var t=u.Z.getGameNameForPID(e);return a.Z.getGameByName(t)};r.getGame=function(){return __OVERLAY__?h:null};r.getGameAsJSON=function(e){var t=this.getGameForPID(e);return null==t?null:{id:t.id,name:t.name,description:t.description,type:c.w.GAME,icon:t.icon,splash:t.splash,overlay:t.overlay,overlay_warn:t.overlayWarn,aliases:_(t.aliases),publishers:_(t.publishers),developers:_(t.developers),third_party_skus:_(t.thirdPartySkus),executables:t.executables.map(v),hashes:_(t.hashes),tags:_(t.tags)}};r.__getLocalVars=function(){return{currentGame:h}};return n}(r.ZP.Store);O.displayName="OverlayRunningGameStore";const I=new O(i.Z,{OVERLAY_INITIALIZE:function(e){h=null!=e.currentGame?new o.Z(e.currentGame):null}})},137861:(e,t,n)=>{"use strict";n.d(t,{f:()=>C,xF:()=>P,GR:()=>U});var r=n(441143),i=n.n(r),o=n(496486),a=n.n(o),u=n(675860),c=n(832691),s=n(769002),l=n(461061);function f(e,t){
(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,u,"next",e)}function u(e){d(o,r,i,a,u,"throw",e)}a(void 0)}))}}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E,y=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1}
;case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},v="mp",O="https://i.scdn.co/image/",I=/https:\/\/static-cdn\.jtvnw\.net\/previews-ttv\/live_user_(.+)-\{width\}x\{height\}.jpg/,b=/https:\/\/i\.ytimg\.com\/vi\/([a-zA-Z0-9_-]+)\/hqdefault_live\.jpg/,m=(_(E={},l.ABu.SPOTIFY,{deserialize:function(e){return"".concat(O).concat(encodeURIComponent(e))},serialize:function(e){return e.split(O)[1]}}),_(E,l.ABu.TWITCH,{deserialize:function(e,t){return n=encodeURIComponent(e),r=t[0],i=t[1],
"https://static-cdn.jtvnw.net/previews-ttv/live_user_".concat(n,"-").concat(r,"x").concat(i,".jpg");var n,r,i},serialize:function(e){var t=e.match(I);return null!=t?t[1]:null}}),_(E,l.ABu.YOUTUBE,{deserialize:function(e){return function(e){return"https://i.ytimg.com/vi/".concat(e,"/hqdefault_live.jpg")}(encodeURIComponent(e))},serialize:function(e){var t=e.match(b);return null!=t?t[1]:null}}),_(E,v,{deserialize:function(e){i()(null!=window.GLOBAL_ENV.MEDIA_PROXY_ENDPOINT,"MEDIA_PROXY_ENDPOINT not configured");return new URL(e,location.protocol+window.GLOBAL_ENV.MEDIA_PROXY_ENDPOINT).toString()},serialize:function(e){return e}}),E),S={},g={};function T(e){return A.apply(this,arguments)}function A(){return(A=p((function(e){var t,n;return y(this,(function(r){switch(r.label){case 0:return[4,u.Z.get({url:l.ANM.APPLICATION_ASSETS(e),oldFormErrors:!0})];case 1:t=r.sent(),n=t.body;return[2,S[e]={assets:a().keyBy(n,"name"),lastUpdated:Date.now()}]}}))}))).apply(this,arguments)}function N(e){
var t,n=S[e];return null==n||(t=n.lastUpdated,Date.now()-t>36e5)?T(e):Promise.resolve(n)}function C(e,t){var n=m[e].serialize(t);return n?"".concat(e,":").concat(n.toString()):null}function P(e,t,n){if(null!=t&&t.includes(":")){var r=h(t.split(":"),2),i=r[0],o=r[1];if(i===l.ABu.TWITCH){if(null==n||"number"==typeof n){new c.Z("ApplicationAssetUtils").warn("getAssetImage: size must === [number, number] for Twitch");return}return m[l.ABu.TWITCH].deserialize(o,n)}return Object.prototype.hasOwnProperty.call(m,i)?m[i].deserialize(o):void 0}if(null!=e&&null!=t){var a="number"==typeof n?"?size=".concat((0,s.oO)(n)):"";return null!=window.GLOBAL_ENV.CDN_HOST?"".concat(location.protocol,"//").concat(window.GLOBAL_ENV.CDN_HOST,"/app-assets/").concat(e,"/").concat(t,".png").concat(a):"".concat(u.Z.getAPIBaseURL(),"/applications/").concat(e,"/app-assets/").concat(t,".png").concat(a)}}function R(e){return D.apply(this,arguments)}function D(){return(D=p((function(e){return y(this,(function(t){
switch(t.label){case 0:return[4,N(e)];case 1:return[2,t.sent().assets]}}))}))).apply(this,arguments)}function w(e,t){return L.apply(this,arguments)}function L(){return(L=p((function(e,t){var n,r,i,o,a,c,s,f,d,p;return y(this,(function(_){switch(_.label){case 0:return 0===(n=t.filter((function(e){return null!=e&&!Object.prototype.hasOwnProperty.call(g,e)&&null==g[e]}))).length?[2]:[4,u.Z.post({url:l.ANM.APPLICATION_EXTERNAL_ASSETS(e),body:{urls:n},oldFormErrors:!0})];case 1:r=_.sent().body;i=!0,o=!1,a=void 0;try{for(c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){f=s.value,d=f.url,p=f.external_asset_path;g[d]=p}}catch(e){o=!0;a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return[2]}}))}))).apply(this,arguments)}function U(e,t){return k.apply(this,arguments)}function k(){k=p((function(e,t){var n,r,i,o,a,u,c,s,l,f,d,p,_=arguments;return y(this,(function(h){switch(h.label){case 0:n=_.length>2&&void 0!==_[2]?_[2]:1;r=[];i=t.length;o=0;a=t.filter((function(e){
return(null==e?void 0:e.startsWith("http:"))||(null==e?void 0:e.startsWith("https:"))}));return a.length>0?[4,w(e,a)]:[3,2];case 1:h.sent();for(u=0;u<i;u++)if(null!=(c=t[u])&&null!=(s=Object.prototype.hasOwnProperty.call(g,c)?g[c]:void 0)){r[u]=C(v,s);o++}h.label=2;case 2:return i===o?[2,r]:[4,R(e)];case 3:l=h.sent();for(f=0;f<i;f++)if(null!=(d=t[f])&&null==r[f]){if(!(p=Object.prototype.hasOwnProperty.call(l,d)&&l[d])){if(n<=0){r[f]=null;continue}return[2,T(e).then((function(){return U(e,t,n-1)}))]}r[f]=p.id}return[2,r]}}))}));return k.apply(this,arguments)}},714226:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,N:()=>f});var r=n(932847),i=n(532497),o=n(461061),a=n(959797);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{
for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=/^\d+$/;function l(e){if(/^(.+?@.+?\..+?|.+?#\d{4})$/.test(e))return null;!function(e){var t=c(e.split("#"),2),n=t[0],a=t[1];r.default.track(o.rMx.FRIEND_REQUEST_FAILED,{reason:"Invalid Username",query:e,discrim_len:(null!=a?a:"").length,username_len:n.length,is_email_like:i.Z.isEmail(e),is_invite_like:i.Z.isInvite(e),
is_num_only:s.test(e)})}(e);return/^DiscordTag/i.test(e)?a.Z.Messages.ADD_FRIEND_ERROR_DISCORD_TAG_USERNAME:s.test(e)?a.Z.Messages.ADD_FRIEND_ERROR_NUMBERS_ONLY:e.length>0&&-1===e.indexOf("#")?a.Z.Messages.ADD_FRIEND_ERROR_USERNAME_ONLY.format({username:e}):a.Z.Messages.ADD_FRIEND_ERROR_OTHER}function f(e,t){switch(e){case o.evJ.RELATIONSHIP_INCOMING_DISABLED:return a.Z.Messages.ADD_FRIEND_ERROR_INVALID_DISCORD_TAG.format({discordTag:t});case o.evJ.TOO_MANY_FRIENDS:return a.Z.Messages.ADD_FRIEND_ERROR_TOO_MANY_FRIENDS;case o.evJ.RELATIONSHIP_ALREADY_FRIENDS:return a.Z.Messages.ADD_FRIEND_ERROR_ALREADY_FRIENDS;case o.evJ.USER_QUARANTINED:return a.Z.Messages.YOUR_ACCOUNT_IS_QUARANTINED;case o.evJ.RELATIONSHIP_INCOMING_BLOCKED:case o.evJ.RELATIONSHIP_INVALID_SELF:case o.evJ.RELATIONSHIP_INVALUD_USER_BOT:case o.evJ.RELATIONSHIP_INVALID_DISCORD_TAG:default:return a.Z.Messages.ADD_FRIEND_ERROR_OTHER}}},405959:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,P:()=>o});var r=50;function i(e){
var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0===e)return 0;t=e>n?(e-n)/n*6:e/n*r-r;return n*Math.pow(10,t/20)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0===e)return 0;var n=20*Math.log10(e/t);return t*(n>0?n/6+1:(r+n)/r)}},316076:(e,t,n)=>{"use strict";n.d(t,{tR:()=>d,nG:()=>p,ml:()=>h,bp:()=>E,Wc:()=>y,Ye:()=>v});var r=n(653772),i=n(733285),o=n(859023),a=n(932847),u=n(461061),c=n(664637),s=n(298716),l=n(866452),f=n(959797);function d(e){if(null!=e){var t=e.maxResolution.type===l.uA.SOURCE?c.LY.RESOLUTION_SOURCE:e.maxResolution.height,n=(0,c.aW)(t);return(0,c.L9)(e.maxFrameRate)!==c.ws.FPS_5&&null==c.ND.find((function(e){return e.resolution===n&&e.fps!==c.ws.FPS_5&&!_(e)}))}}function p(e){if(null!=e){var t=(0,c.L9)(e.maxFrameRate);return null==c.ND.find((function(e){return e.fps===t&&!_(e)}))}}function _(e){return null!=e.quality||null!=e.guildPremiumTier}function h(e){
return e.type===l.uA.SOURCE?f.Z.Messages.SCREENSHARE_SOURCE:f.Z.Messages.SCREENSHARE_RESOLUTION_ABBREVIATED.format({resolution:e.height})}function E(e){return f.Z.Messages.SCREENSHARE_FPS_ABBREVIATED.format({fps:e})}function y(e){return null==e.maxResolution||null==e.maxFrameRate?null:{maxFrameRate:e.maxFrameRate,maxResolution:e.maxResolution}}function v(e,t,n){var l=function(e,t,n){return c.ND.find((function(r){return(null==r.preset||r.preset===e)&&r.resolution===t&&r.fps===n}))}(e,t,n),f=o.default.getCurrentUser(),d=i.Z.getGuildId(),p=null!=d?r.Z.getGuild(d):null;a.default.track(u.rMx.STREAM_SETTINGS_UPDATE,{user_premium_tier:null==f?void 0:f.premiumType,guild_premium_tier:null==p?void 0:p.premiumTier,stream_quality_user_premium_tier:null!=(null==l?void 0:l.quality)?s.bg[l.quality]:null,stream_quality_guild_premium_tier:null==l?void 0:l.guildPremiumTier,stream_quality_preset:e,stream_quality_resolution:t,stream_quality_frame_rate:n})}},532497:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s})
;var r=/^([\w-+]+(?:\.[\w-+]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,63}(?:\.[a-z]{2})?)$/i,i=/^((https:\/\/)?(discord\.gg\/)|(discord\.com\/)(invite\/)?)?[A-Za-z0-9]{8,8}$/,o=/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/,a=/^(.*)#[0-9]{1,5}$/,u=["@","#",":","```","discord","hypesquad","system message","system mesage","sustem message","sustem mesage"],c=["discordtag","everyone","here","discord nitro","discord"];const s={isEmail:function(e){return r.test(e)},isInvite:function(e){return i.test(e)},isPhoneNumber:function(e){return o.test(e)},isUserTagLike:function(e){var t=a.exec(e);if(null!=t&&t.length>1){var n=t[1],r=u.some((function(e){return n.includes(e)})),i=c.includes(n);return!r&&!i}return!1}}},618468:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(131795),i=n.n(r),o=n(734155);function a(e,t){if(!e.startsWith("discord:")){location.href=e;return o.nextTick((function(){return t(!0)}))}var n=document.body;if(null==n)return o.nextTick((function(){return t(!1)}))
;var r=document.createElement("iframe");n.appendChild(r);try{null!=r.contentWindow&&(r.contentWindow.location.href=e);o.nextTick((function(){return t(!0)}))}catch(e){"NS_ERROR_UNKNOWN_PROTOCOL"===e.name&&o.nextTick((function(){return t(!1)}))}window.setTimeout((function(){var e;null!==(null!==(e=null==r?void 0:r.parentElement)&&void 0!==e?e:null)&&n.removeChild(r)}),1e3)}function u(e,t){var n=function(){r=!0},r=!1;window.addEventListener("blur",n);location.href=e;setTimeout((function(){window.removeEventListener("blur",n);t(r)}),1e3)}function c(e,t){t(!1)}function s(e,t){location.href=e;o.nextTick((function(){return t(!0)}))}const l={launch:"Android"===(null===(f=i().os)||void 0===f?void 0:f.family)||"iOS"===(null===(d=i().os)||void 0===d?void 0:d.family)?s:"Gecko"===i().layout?a:null!=i().ua&&-1!==i().ua.indexOf("Valve Steam GameOverlay")?c:u};var f,d}}]);
//# sourceMappingURL=46091dacca8c6dcc9145.js.map